{% extends 'component/base.html' %}
{% load static %}
{% block title %}Company Profile{% endblock title %}
{% block extracss %}
{% load custom_filters %}
{% endblock extracss %}
{% block maincontent %}
<div class="main-content">
    {% for message in messages %}
    {% if message.tags == 'success' %}
    <div class="alert alert-success" role="alert">
        {{ message }}
    </div>
    {% else %}
    <label for="exampleInputEmail1" class="form-label mb-0 text-left text-danger">{{ message }}</label>
    {% endif %}
    {% endfor %}
    {% if form.errors %}
    <div class="alert alert-danger" role="alert">
        {% for field, errors in form.errors.items %}
        {% for error in errors %}
        {{ error }}
        {% endfor %}
        {% endfor %}
    </div>
    {% endif %}
    <ul class="profile-tabs nav nav-tabs" id="nav-tab" role="tablist">
        <li class="nav-item">
            <button class="nav-link active" id="nav-Overview-tab" data-bs-toggle="tab" data-bs-target="#nav-Overview"
                type="button" role="tab" aria-controls="nav-Overview" aria-selected="true">Overview</button>
        </li>
        <li class="nav-item">
            <button class="nav-link" id="nav-CBranch-tab" data-bs-toggle="tab" data-bs-target="#nav-CBranch"
                type="button" role="tab" aria-controls="nav-CBranch" aria-selected="false">Branch</button>
        </li>
        {% comment %} <li class="nav-item">
            <button class="nav-link" id="nav-CBankList-tab" data-bs-toggle="tab" data-bs-target="#nav-CBankList"
                type="button" role="tab" aria-controls="nav-CBankList" aria-selected="false">Bank List</button>
        </li> {% endcomment %}
        <li class="nav-item">
            <button class="nav-link" id="nav-Department-tab" data-bs-toggle="tab" data-bs-target="#nav-Department"
                type="button" role="tab" aria-controls="nav-Department" aria-selected="false">Department</button>
        </li>
        <li class="nav-item">
            <button class="nav-link" id="nav-Designation-tab" data-bs-toggle="tab" data-bs-target="#nav-Designation"
                type="button" role="tab" aria-controls="nav-Designation" aria-selected="false">Designation</button>
        </li>
        <li class="nav-item">
            <button class="nav-link" id="nav-Position-tab" data-bs-toggle="tab" data-bs-target="#nav-Position"
                type="button" role="tab" aria-controls="nav-Position" aria-selected="false">Position</button>
        </li>
        <li class="nav-item">
            <button class="nav-link" id="nav-CWeekoff-tab" data-bs-toggle="tab" data-bs-target="#nav-CWeekoff"
                type="button" role="tab" aria-controls="nav-CWeekoff" aria-selected="false">Weekoff</button>
        </li>
        <li class="nav-item">
            <button class="nav-link" id="nav-CHoliday-tab" data-bs-toggle="tab" data-bs-target="#nav-CHoliday"
                type="button" role="tab" aria-controls="nav-CHoliday" aria-selected="false">Holiday</button>
        </li>
        <li class="nav-item">
            <button class="nav-link" id="nav-CHolidayList-tab" data-bs-toggle="tab" data-bs-target="#nav-CHolidayList"
                type="button" role="tab" aria-controls="nav-CHolidayList" aria-selected="false">Holiday List </button>
        </li>
        <li class="nav-item">
            <button class="nav-link" id="nav-CPayroll-tab" data-bs-toggle="tab" data-bs-target="#nav-CPayroll"
                type="button" role="tab" aria-controls="nav-CPayroll" aria-selected="false">Payroll</button>
        </li>
        <li class="nav-item">
            <button class="nav-link" id="nav-Policy-tab" data-bs-toggle="tab" data-bs-target="#nav-Policy" type="button"
                role="tab" aria-controls="nav-Policy" aria-selected="false">Policies</button>
        </li>
    </ul>
    <div class="tab-content" id="nav-tabContent">
        <!-- Overview tab panel -->
        <div class="tab-pane fade show active" id="nav-Overview" role="tabpanel" aria-labelledby="nav-Overview-tab"
            tabindex="0">
            <!-- Overview form content -->
            <div class="card">
                <div class="card-body">
                    <form id="companyInfoForm" method="POST" action="{% url 'hr:update_company_info' company_data.id %}"
                        enctype="multipart/form-data" class="w-100 d-flex justify-content-center flex-wrap">
                        {% csrf_token %}
                        <div class="row w-100">
                            <div class="col-12 mb-3  border-bottom d-flex justify-content-between">
                                <h5>Company Info</h5>
                                <div class="d-flex justify-content-end align-items-center mb-2">
                                    <button type="button" id="editCompanyInfoBtn"
                                        class="btn custom-button btn-sm">Edit</button>
                                </div>
                            </div>
                            <div class="col-12 col-md-4 d-flex mb-3 align-items-center flex-wrap flex-md-nowrap">
                                <label for="CompanyName"
                                    class="form-label text-nowrap me-2 mb-md-0 col-12 col-sm-12 col-md-5">Company Name :</label>
                                <input type="text" class="form-control form-control-sm " id="CompanyName"
                                    placeholder="Company Name" disabled value="{{company_data.name}}" />
                            </div>
                            <div class="col-12 col-md-4 d-flex mb-3 align-items-center flex-wrap flex-md-nowrap">
                                <label for="IndustryType"
                                    class="form-label text-nowrap me-2 mb-md-0 col-12 col-sm-12 col-md-5">Industry Type :</label>
                                <input type="text" class="form-control form-control-sm " id="IndustryType"
                                    placeholder="" disabled value="{{company_data.industries_type|default:''}}"
                                    name="industries_type">
                            </div>
                            <div class="col-12 col-md-4 d-flex mb-3 align-items-center flex-wrap flex-md-nowrap">
                                <label for="CompanyGSTNo"
                                    class="form-label text-nowrap me-2 mb-md-0 col-12 col-sm-12 col-md-5">GST No
                                    :</label>
                                <input type="text" class="form-control form-control-sm " id="CompanyGSTNo" placeholder="" disabled value="{{company_data.gst_no|default:''}}" name="gst_no" minlength="15" maxlength="15" title="Required 15 digits of GST No">
                            </div>
                            <div class="col-12 col-md-4 d-flex mb-3 align-items-center flex-wrap flex-md-nowrap">
                                <label for="CompanyTINNo"
                                    class="form-label text-nowrap me-2 mb-md-0 col-12 col-sm-12 col-md-5">TIN No :</label>
                                <input type="text" class="form-control form-control-sm" id="CompanyTINNo"
                                    placeholder="" disabled value="{{company_data.tin_no|default:''}}" name="tin_no" minlength="11" maxlength="11" title="Required 11 digits of TIN No">
                            </div>
                            <div class="col-12 col-md-4 d-flex mb-3 align-items-center flex-wrap flex-md-nowrap">
                                <label for="CompanyCINNo" class="form-label text-nowrap me-2 mb-md-0 col-12 col-sm-12 col-md-5">CIN No :</label>
                                <input type="text" class="form-control form-control-sm" id="CompanyCINNo"
                                    placeholder="" disabled value="{{company_data.cin_no|default:''}}" name="cin_no" minlength="21" maxlength="21" >
                            </div>
                            <div class="col-12 col-md-4 d-flex mb-3 align-items-center flex-wrap flex-md-nowrap">
                                <label for="CompanyPanCard"
                                    class="form-label text-nowrap me-2 mb-md-0 col-12 col-sm-12 col-md-5">Pan
                                    Card:</label>
                                <input type="Text" class="form-control form-control-sm" disabled
                                    value="{{company_data.pancard_no|default:''}}" name="pancard_no" placeholder=""
                                    id="CompanyPanCard" pattern="[A-Z]{5}[0-9]{4}[A-Z]{1}"
                                    title="Invalid PAN Number entered. eg.ABCTY1234D"
                                    oninput="this.value = this.value.toUpperCase()">
                            </div>
                            <div class="col-12 col-md-4 d-flex mb-3 align-items-center flex-wrap flex-md-nowrap">
                                <label for="CompanyStartDate"
                                    class="form-label text-nowrap me-2 mb-md-0 col-12 col-sm-12 col-md-5">Start Date
                                    :</label>
                                <input type="date" class="form-control form-control-sm" id="CompanyStartDate"
                                    placeholder="" disabled
                                    value="{{company_data.start_date|date:'Y-m-d'}}" name="start_date">
                            </div>
                            <div class="col-12 col-md-4 d-flex mb-3 align-items-center flex-wrap flex-md-nowrap">
                                <label for="CompanyEmployeeId"
                                    class="form-label text-nowrap me-2 mb-md-0 col-12 col-sm-12 col-md-5">Employee ID
                                    Series:</label>
                                <input type="text" class="form-control form-control-sm" id="CompanyEmployeeId"
                                    placeholder="" disabled value="{{company_data.emp_id_series|default:''}}"
                                    name="emp_id_series">
                            </div>
                            <div class="col-12 col-md-4 d-flex mb-3 align-items-center flex-wrap flex-md-nowrap">
                                <label for="CompanyStatus"
                                    class="form-label text-nowrap me-2 mb-md-0 col-12 col-md-5">Status:</label>
                                <select disabled class="form-control form-control-sm" name="status" id="CompanyStatus">
                                    <option value="Active" {% if company_data.status == 'Active' %}selected{% endif %}>
                                        Active
                                    </option>
                                    <option value="Deactive"
                                        {% if company_data.status == 'Deactive' %}selected{% endif %}>
                                        Deactive</option>
                                </select>
                            </div>
                        </div>
                        <div class="row w-100">
                            <div class="col-12 col-md-4 d-flex mb-3 align-items-start flex-wrap flex-md-nowrap">
                                <label for="CompanyLogo"
                                    class="form-label text-nowrap me-2 mb-md-0 col-12 col-sm-12 col-md-5">Company
                                    Logo:</label>
                                <input  type="file" disabled name="logo" class="form-control form-control-sm "
                                    id="CompanyLogo" placeholder="">
                            </div>
                        </div>
                        <!-- contact info -->
                        <div class="row w-100">
                            <div class="col-12 mb-3  border-bottom">
                                <h5>Contact info</h5>
                            </div>
                            <div class="col-12 col-md-4 d-flex mb-3 align-items-center flex-wrap flex-md-nowrap">
                                <label for="CompanyWebsite"
                                    class="form-label text-nowrap me-2 mb-md-0 col-12 col-sm-12 col-md-5">Website:</label>
                                <input type="text" class="form-control form-control-sm text-lowercase" id="CompanyWebsite"
                                    placeholder="" disabled value="{{company_data.website|default:''}}" name="website">
                            </div>
                            <div class="col-12 col-md-4 d-flex mb-3 align-items-center flex-wrap flex-md-nowrap">
                                <label for="CompanyDomain"
                                    class="form-label text-nowrap me-2 mb-md-0 col-12 col-sm-12 col-md-5">Domain Name
                                    :</label>
                                <input type="text" class="form-control form-control-sm " id="CompanyDomain"
                                    placeholder="" disabled value="{{company_data.domain|default:''}}" name="domain">
                            </div>
                            <!-- phone no -->
                            <div class="col-12 col-md-4 d-flex mb-3 align-items-center flex-wrap flex-md-nowrap">
                                <label for="CompanyPhoneno"
                                    class="form-label text-nowrap me-2 mb-md-0 col-12 col-md-5">Phone No :</label>
                                <input type="tel" disabled class="form-control form-control-sm " name="phone_no"
                                    id="CompanyPhoneno" placeholder="" autocomplete="off" pattern="[0-9]{10}"
                                    maxlength="10" minlength="10" value="{{company_data.phone_no|default:''}}">
                            </div>
                            <!-- email id -->
                            <div class="col-12 col-md-4 d-flex mb-3 align-items-center flex-wrap flex-md-nowrap">
                                <label for="CompanyEmail"
                                    class="form-label text-nowrap me-2 mb-md-0 col-12 col-sm-12 col-md-5">Email ID
                                    :</label>
                                <input type="email" class="form-control form-control-sm" id="CompanyEmail"
                                    placeholder="" disabled value="{{company_data.email_id|default:''}}" name="email_id">
                            </div>
                            <div class="col-12 mb-3  border-bottom">
                                <h5>Registered Office</h5>
                            </div>
                            <div class="row">
                                <div class="col-12 col-md-4 d-flex mb-3 align-items-center flex-wrap flex-md-nowrap">
                                    <label for="CAddressline1"
                                        class="form-label text-nowrap me-2 mb-md-0 col-12 col-sm-12 col-md-5 ">Address
                                        line 1 :</label>
                                    <input type="text" class="form-control form-control-sm" id="CAddressline1" disabled
                                        value="{{company_data.reg_address|default:''}}" name="reg_address">
                                </div>
                            </div>
                            <div class="row d-flex w-100">
                                <div class="col-12 col-md-4 d-flex mb-3 align-items-center flex-wrap flex-md-nowrap">
                                    <label for="CCity"
                                        class="form-label text-nowrap me-2 mb-md-0 col-12 col-sm-12 col-md-5">City
                                        :</label>
                                    <input type="text" class="form-control form-control-sm" id="CCity"
                                         disabled value="{{company_data.reg_city|default:''}}" name="reg_city">
                                </div>
                                <div class="col-12 col-md-4 d-flex mb-3 align-items-center flex-wrap flex-md-nowrap">
                                    <label for="CState"
                                        class="form-label text-nowrap me-2 mb-md-0 col-12 col-sm-12 col-md-5">State
                                        :</label>
                                    <input type="text" class="form-control form-control-sm " id="CState"
                                         disabled value="{{company_data.reg_state|default:''}}"
                                        name="reg_state">
                                </div>
                                <div class="col-12 col-md-4 d-flex mb-3 align-items-center flex-wrap flex-md-nowrap">
                                    <label for="CCountry"
                                        class="form-label text-nowrap me-2 mb-md-0 col-12 col-sm-12 col-md-5">Country
                                        :</label>
                                    <input type="text" class="form-control form-control-sm" id="CCountry"
                                      disabled value="{{company_data.reg_country|default:''}}"
                                        name="reg_country">
                                </div>
                                <div class="col-12 col-md-4 d-flex mb-3 align-items-center flex-wrap flex-md-nowrap">
                                    <label for="CPincode"
                                        class="form-label text-nowrap me-2 mb-md-0 col-12 col-sm-12 col-md-5">Pincode:</label>
                                    <input type="tel" class="form-control form-control-sm" id="CPincode"
                                        disabled value="{{company_data.reg_pin_code|default:''}}"  pattern="[0-9]{6}" title="Please enter exactly 6 digits."
                                        name="reg_pin_code">
                                </div>
                            </div>
                            <!-- corporate office -->
                            <div class="row px-3  w-100">
                                <div class="col-12 mb-3  border-bottom">
                                    <h5>Corporate Office</h5>
                                </div>
                                <div class="col-12 col-md-4  d-flex mb-3 align-items-center flex-wrap flex-md-nowrap">
                                    <label for="CCAddressline1"
                                        class="form-label text-nowrap me-2 mb-md-0 col-12 col-sm-12 col-md-5 ">Address
                                        line 1 :</label>
                                    <input type="text" class="form-control form-control-sm  " id="CCAddressline1"
                                        disabled value="{{company_data.corp_address|default:''}}" 
                                        name="corp_address">
                                </div>
                                <div class="col-12 col-md-4 d-flex mb-3 align-items-center flex-wrap flex-md-nowrap">
                                    <label for="CCCity"
                                        class="form-label text-nowrap me-2 mb-md-0 col-12 col-sm-12 col-md-5">City
                                        :</label>
                                    <input type="text" class="form-control form-control-sm " id="CCCity"
                                      disabled value="{{company_data.corp_city|default:''}}" name="corp_city">
                                </div>
                                <div class="col-12 col-md-4 d-flex mb-3 align-items-center flex-wrap flex-md-nowrap">
                                    <label for="CCState"
                                        class="form-label text-nowrap me-2 mb-md-0 col-12 col-sm-12 col-md-5">State
                                        :</label>
                                    <input type="text" class="form-control form-control-sm " id="CCState"
                                        disabled value="{{company_data.corp_state|default:''}}"
                                        name="corp_state">
                                </div>
                                <div class="col-12 col-md-4 d-flex mb-3 align-items-center flex-wrap flex-md-nowrap">
                                    <label for="CCCountry"
                                        class="form-label text-nowrap me-2 mb-md-0 col-12 col-sm-12 col-md-5">Country
                                        :</label>
                                    <input type="text" class="form-control form-control-sm" id="CCCountry"
                                        disabled value="{{company_data.corp_country|default:''}}"
                                        name="corp_country">
                                </div>
                                <div class="col-12 col-md-4 d-flex mb-3 align-items-center flex-wrap flex-md-nowrap">
                                    <label for="CCPincode"
                                        class="form-label text-nowrap me-2 mb-md-0 col-12 col-sm-12 col-md-5">Pincode:</label>
                                    <input type="tel" class="form-control form-control-sm" id="CCPincode" step="0" pattern="[0-9]{6}" title="Please enter exactly 6 digits."
                                        disabled value="{{company_data.corp_pin_code|default:''}}"
                                        name="corp_pin_code">
                                </div>
                            </div>
                        </div>
                        <!-- bank details -->
                        <div class="row w-100">
                            <div class="col-12 mb-3  border-bottom">
                                <h5>Bank info</h5>
                            </div>
                        </div>
                        <div class="row w-100">
                            <div class="col-12 col-md-4 d-flex mb-3 align-items-center flex-wrap flex-md-nowrap">
                                <label for="CompanyAccountNo"
                                    class="form-label text-nowrap me-2 mb-md-0 col-12 col-sm-12 col-md-5">Account No:
                                </label>
                                <input type="tel" class="form-control form-control-sm " id="CompanyAccountNo"
                                  disabled value="{{company_data.account_no|default:''}}"   maxlength="21" minlength="8"  title="Please enter a 21-digit decimal number."
                                    name="account_no" required>
                            </div>
                            <div class="col-12 col-md-4 d-flex mb-3 align-items-center flex-wrap flex-md-nowrap">
                                <label for="CompanyBankName"
                                    class="form-label text-nowrap me-2 mb-md-0 col-12 col-sm-12 col-md-5">Bank Name
                                    :</label>
                                <input type="text" class="form-control form-control-sm " id="CompanyBankName"
                                     disabled value="{{company_data.bank_name|default:''}}"
                                    name="bank_name">
                            </div>
                            <div class="col-12 col-md-4 d-flex mb-3 align-items-center flex-wrap flex-md-nowrap">
                                <label for="CompaanyBankIFSCCode"
                                    class="form-label text-nowrap me-2 mb-md-0 col-12 col-sm-12 col-md-5">IFSC
                                    Code:</label>
                                <input type="text" class="form-control form-control-sm " id="CompaanyBankIFSCCode" maxlength="11" pattern="[A-Z]{4}0[A-Z0-9]{6}" oninput="this.value = this.value.toUpperCase()"
                                    disabled value="{{company_data.ifsc_code|default:''}}"
                                    name="ifsc_code">
                            </div>
                            <div class="col-12 col-md-4 d-flex mb-3 align-items-center flex-wrap flex-md-nowrap">
                                <label for="CompanyBankBranch"
                                    class="form-label text-nowrap me-2 mb-md-0 col-12 col-sm-12 col-md-5">Bank Branch
                                    :</label>
                                <input type="text" class="form-control form-control-sm " id="CompanyBankBranch"
                                disabled value="{{company_data.branch|default:''}}" name="branch">
                            </div>
                        </div>
                        <div class="row w-100">
                            <div class="d-flex justify-content-end align-items-center mb-2">
                                <button type="submit" id="saveCompanyInfoBtn" class="btn custom-button btn-sm"
                                    disabled>Save Changes</button>
                            </div>
                        </div>
                        <!-- company Bank Info -->
                        <div class="row">
                        </div>
                    </form>
                </div>
            </div>
        </div>
        <!-- Branch List tab Panel -->
        <div class="tab-pane fade" id="nav-CBranch" role="tabpanel" aria-labelledby="nav-CBranch-tab" tabindex="0">
            <div class="card">
                <div class="card-header d-flex justify-content-between border-0">
                    <div class="text-center d-flex align-items-center">
                        <h6 class="mb-0 pageTitle"><strong>Branch List</strong></h6>
                    </div>
                    <div class="d-flex justify-content-end mb-0">
                        <button type="button" class="btn custom-button btn-sm" data-bs-toggle="modal"
                            data-bs-target="#AddBranchModal">
                            <i class="bi bi-plus-lg"></i> Add Branch List
                        </button>
                    </div>
                </div>
                <div class="card-body pt-0">
                    <div class="row">  
                        <div class="table-responsive overflow-auto">
                            <table class="table-responsive overflow-auto DataTable w-100" id="allbranchMasterTablelist">
                                <thead>
                                    <tr>
                                        <th scope="col" class="text-nowrap fw-medium">Company Master</th>
                                        <th scope="col" class="text-nowrap fw-medium">Name</th>
                                        <th scope="col" class="text-nowrap fw-medium" style="max-width: 400px; width: 100%; white-space: normal; word-wrap: break-word; overflow-wrap: break-word;">Address</th>
                                        <th scope="col" class="text-nowrap fw-medium">city</th>
                                        <th scope="col" class="text-nowrap fw-medium">state</th>
                                        <th scope="col" class="text-nowrap fw-medium">country</th>
                                        <th scope="col" class="text-nowrap fw-medium">pincode</th>
                                        <th scope="col" class="text-nowrap fw-medium">email</th>
                                        <th scope="col" class="text-nowrap fw-medium">contact No</th>
                                        <th scope="col" class="text-nowrap fw-medium">start Date</th>
                                        <th scope="col" class="text-nowrap fw-medium">status</th>
                                        <th scope="col" class="text-nowrap fw-medium text-center"><p class="text-center mb-0">Action</p></th>
                                    </tr>
                                </thead>
                                <tbody>
                                    {% for branch_list in company_branch_all %}
                                    <tr>
                                        <td  style=" white-space: nowrap; word-wrap: break-word; overflow-wrap: break-word;">{{ branch_list.company }}</td>
                                        <td>{{ branch_list.name}}</td>
                                        <td style=" white-space: nowrap; word-wrap: break-word; overflow-wrap: break-word;"><div>{{ branch_list.address }}</div></td>
                                        <td>{{ branch_list.city }}</td>
                                        <td>{{ branch_list.state }}</td>
                                        <td>{{ branch_list.country }}</td>
                                        <td>{{ branch_list.pin_code }}</td>
                                        <td>{{ branch_list.email}}</td>
                                        <td>{{ branch_list.contact_no|default:"" }}</td>
                                        <td>{{ branch_list.start_date|date:'d-m-Y'}}</td>
                                        <td>{{ branch_list.status }}</td>
                                        <td>
                                            <div class="d-flex justify-content-center">
                                                <button type="button"
                                                    class="btn custom-button btn-sm me-2 edit-branch_list"
                                                    data-branch_list-id="{{ branch_list.id }}" data-bs-toggle="modal"
                                                    data-bs-target="#Editbranch_listModal">
                                                    <i class="bi bi-pencil-square"></i>
                                                </button>
                                                <button class="btn btn-sm btn-danger me-2 delete-branch_list"
                                                    data-branch_list-id="{{ branch_list.id }}">
                                                    <i class="bi bi-trash"></i>
                                                </button> 
                                            </div>
                                        </td>
                                    </tr>
                                    {% endfor %}
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <!--Company Branch add Modal -->
        <div class="modal fade" id="AddBranchModal" tabindex="-1" aria-labelledby="AddBranchModalLabel"
            aria-hidden="true">
            <div class="modal-dialog">
                <div class="modal-content">
                    <form id="addbranch_listForm" method="post" enctype="multipart/form-data">
                        {% csrf_token %}
                        <div class="modal-header">
                            <h1 class="modal-title fs-5 primary-color" id="Addbranch_listModalLabel">Add Branch</h1>
                            <button type="button" class="btn-close  btn-close-white" data-bs-dismiss="modal"
                                aria-label="Close"></button>
                        </div>
                        <div class="modal-body model-add">
                            <div class="d-flex flex-wrap w-100">
                                <div class="col-12 col-md-12">
                                    <div class="mb-2">
                                        <label for="AddBranchCompany" class="form-label">Select Company</label>
                                        <select class="form-select form-select-sm" aria-label="Select branch_master"
                                            name="company" id="AddBranchCompany">
                                            {% for company in company %}
                                            <option value="{{ company.id }}">{{ company.name }}</option>
                                            {% endfor %}
                                        </select>
                                    </div>
                                </div>
                                <div class="col-12 col-md-12">
                                    <div class="mb-2">
                                        <label for="Addbranchname" class="form-label">Branch Name</label>
                                        <input type="text" class="form-control form-control-sm" id="Addbranchname"
                                            name="name" required>
                                    </div>
                                </div>
                                <div class="col-12 col-md-12">
                                    <div class="mb-2">
                                        <label for="Addbranchaddress" class="form-label">Address</label>
                                        <input type="text" class="form-control form-control-sm" id="Addbranchaddress"
                                            name="address" >
                                    </div>
                                </div>
                                <div class="col-12 col-md-12">
                                    <div class="mb-2">
                                        <label for="Addbranchcity" class="form-label">City</label>
                                        <input type="text" class="form-control form-control-sm" id="Addbranchcity"
                                            name="city" >
                                    </div>
                                </div>
                                <div class="col-12 col-md-12">
                                    <div class="mb-2">
                                        <label for="Addbranchstate" class="form-label">State</label>
                                        <input type="text" class="form-control form-control-sm" id="Addbranchstate"
                                            name="state" >
                                    </div>
                                </div>
                                <div class="col-12 col-md-12">
                                    <div class="mb-2">
                                        <label for="AAddbranchcountry" class="form-label">Country</label>
                                        <input type="text" class="form-control form-control-sm" id="AAddbranchcountry"
                                            name="country" >
                                    </div>
                                </div>
                                <div class="col-12 col-md-12">
                                    <div class="mb-2">
                                        <label for="Addbranchpin_code" class="form-label">Pin Code</label>
                                        <input type="tel" step="0" class="form-control form-control-sm" id="Addbranchpin_code" pattern="[0-9]{6}" title="Please enter exactly 6 digits."
                                            name="pin_code" >
                                    </div>
                                </div>
                                <div class="col-12 col-md-12">
                                    <div class="mb-2">
                                        <label for="Addbranchemail" class="form-label">Email</label>
                                        <input type="email" class="form-control form-control-sm" id="Addbranchemail"
                                            name="email" >
                                    </div>
                                </div>
                                <div class="col-12 col-md-12">
                                    <div class="mb-2">
                                        <label for="Addbranchcontact_no" class="form-label">Contact No</label>
                                        <input type="tel" class="form-control form-control-sm" id="Addbranchcontact_no"
                                            name="contact_no" pattern="[0-9]{10}" maxlength="10" minlength="10">
                                    </div>
                                </div>
                                <div class="col-12 col-md-12">
                                    <div class="mb-2">
                                        <label for="Addbranchstart_date" class="form-label">Start Date</label>
                                        <input type="date" class="form-control form-control-sm" id="Addbranchstart_date"
                                            name="start_date" >
                                    </div>
                                </div>
                                <div class="col-12 col-md-12">
                                    <div class="mb-2">
                                        <label for="Addbranchstatus" class="form-label">Status:</label>

                                        <select class="form-control form-control-sm " name="status"
                                            id="Addbranchstatus">
                                            <option value="Active" {% if company_data.status == 'Active' %}selected
                                                {%endif%}>Active
                                            </option>
                                            <option value="Deactive" {% if company_data.status == 'Deactive' %}selected
                                                {% endif %}>
                                                Deactive</option>
                                        </select>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="modal-footer">
                            <button type="button" class="btn btn-secondary btn-sm"
                                data-bs-dismiss="modal">Close</button>
                            <button type="submit" class="btn custom-button btn-sm">Add</button>
                        </div>
                    </form>
                </div>
            </div>
        </div>
        <!-- Company Branch edit Modal -->
        <div class="modal fade" id="Editbranch_listModal" tabindex="-1" aria-labelledby="Editbranch_listModalLabel"
            aria-hidden="true">
            <div class="modal-dialog">
                <div class="modal-content">
                    <form id="updatebranch_listForm" method="post" action="">
                        {% csrf_token %}
                        <input type="hidden" id="editbranch_listId" name="id">
                        <div class="modal-header">
                            <h1 class="modal-title fs-5" id="Editbranch_listModalLabel">Edit Branch List</h1>
                            <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal"
                                aria-label="Close"></button>
                        </div>
                        <div class="modal-body">
                            <div class="d-flex flex-wrap w-100">
                                <div class="col-12 col-md-12">
                                    <div class="mb-2">
                                        <label for="Editbranch_listbranch_master" class="form-label">Company
                                        </label>
                                        <select class="form-select form-select-sm" id="Editbranch_listbranch_master"
                                            name="company">
                                            {% for company in company %}
                                            <option value="{{ company.id }}">{{ company.name }}</option>
                                            {% endfor %}
                                        </select>
                                    </div>
                                    <div class="mb-2">
                                        <label for="Editbranch_listbranch_name" class="form-label">Company
                                            branch</label>
                                        <input type="text" class="form-control form-control-sm"
                                            id="Editbranch_listbranch_name" name="name" required>
                                    </div>
                                    <div class="mb-2">
                                        <label for="Editbranch_address" class="form-label">address</label>
                                        <input type="text" class="form-control form-control-sm" id="Editbranch_address"
                                            name="address" required>
                                    </div>
                                    <div class="mb-2">
                                        <label for="Editbranch_city" class="form-label">city</label>
                                        <input type="text" class="form-control form-control-sm" id="Editbranch_city"
                                            name="city" required>
                                    </div>
                                    <div class="mb-2">
                                        <label for="Editbranch_state" class="form-label">state</label>
                                        <input type="text" class="form-control form-control-sm" id="Editbranch_state"
                                            name="state" required>
                                    </div>
                                    <div class="mb-2">
                                        <label for="Editbranch_country" class="form-label">country</label>
                                        <input type="text" class="form-control form-control-sm" id="Editbranch_country"
                                            name="country" required>
                                    </div>
                                    <div class="mb-2">
                                        <label for="Editbranch_pin_code" class="form-label">pin_code</label>
                                        <input type="tel" step="0" class="form-control form-control-sm" id="Editbranch_pin_code" pattern="[0-9]{6}"
                                            name="pin_code" required>
                                    </div>
                                    <div class="mb-2">
                                        <label for="Editbranch_email" class="form-label">email</label>
                                        <input type="email" class="form-control form-control-sm" id="Editbranch_email"
                                            name="email" required>
                                    </div>
                                    <div class="mb-2">
                                        <label for="Editbranch_contact_no" class="form-label">contact_no</label>
                                        <input type="text" class="form-control form-control-sm" pattern="[0-9]{10}" maxlength="10" minlength="10" 
                                            id="Editbranch_contact_no" name="contact_no" required>
                                    </div>
                                    <div class="mb-2">
                                        <label for="Editbranch_start_date" class="form-label">start_date</label>
                                        <input type="date" class="form-control form-control-sm"
                                            id="Editbranch_start_date" name="start_date" required>
                                    </div>
                                    <div class="mb-2">
                                        <label for="Editbranch_end_date" class="form-label">end_date</label>
                                        <input type="date" class="form-control form-control-sm" id="Editbranch_end_date"
                                            name="end_date">
                                    </div>
                                    <div class="mb-2">
                                        <label for="Editbranch_status" class="form-label">Status:</label>
                                        <select class="form-control form-control-sm " name="status"
                                            id="Editbranch_status">
                                            <option value="Active"
                                                {% if company_data.status == 'Active' %}selected{% endif %}>Active</option>
                                            <option value="Deactive"
                                                {% if company_data.status == 'Deactive' %}selected{% endif %}>Deactive</option>
                                        </select>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="modal-footer">
                            <button type="button" class="btn btn-secondary btn-sm"
                                data-bs-dismiss="modal">Close</button>
                            <button type="submit" class="btn custom-button btn-sm editBranchBtn"
                                id="save_branch_list_changes_btn">Save changes</button>
                        </div>
                    </form>
                </div>
            </div>
        </div>
        {% comment %} <!-- Bank List tab Panel -->
        <div class="tab-pane fade" id="nav-CBankList" role="tabpanel" aria-labelledby="nav-CBankList-tab" tabindex="0">
            <div class="card">
                <div class="card-header d-flex justify-content-between border-0">
                    <div class="text-center d-flex align-items-center">
                        <h6 class="mb-0 pageTitle"><strong>Bank List</strong></h6>
                    </div>
                <div class="d-flex justify-content-end mb-2">
                    <button type="button" class="btn custom-button btn-sm" data-bs-toggle="modal"
                        data-bs-target="#AddBankModal">
                        <i class="bi bi-plus-lg"></i> Add Bank List
                    </button>
                </div>
            </div>
                <div class="card-body">
                    <div class="row">
                        
                        <div class="table-responsive overflow-auto">
                            <table class="table-responsive overflow-auto DataTable w-100" id="allbankMasterTablelist">
                                <thead>
                                    <tr>
                                        <th scope="col" class="text-nowrap fw-medium">Company Master</th>
                                        <th scope="col" class="text-nowrap fw-medium">Bank Name</th>
                                        <th scope="col" class="text-nowrap fw-medium">IFSC Code</th>
                                        <th scope="col" class="text-nowrap fw-medium">Branch</th>
                                        <th scope="col" class="text-nowrap fw-medium">Account No</th>
                                        <th scope="col" class="text-nowrap fw-medium">Remarks</th>
                                        <th scope="col" class="text-nowrap fw-medium">Status</th>
                                        <th scope="col" class="text-nowrap fw-medium text-center">
                                            <p class="text-center">Action</p>
                                        </th>
                                    </tr>
                                </thead>
                                <tbody>
                                    {% for bank_list in company_bank_all %}
                                    <tr>
                                        <td>{{ bank_list.company }}</td>
                                        <td>{{ bank_list.bank_name}}</td>
                                        <td>{{ bank_list.ifsc_code }}</td>
                                        <td>{{ bank_list.branch }}</td>
                                        <td>{{ bank_list.account_no }}</td>
                                        <td>{{ bank_list.remarks }}</td>
                                        <td>{{ bank_list.status }}</td>
                                        <td>
                                            <div class="d-flex justify-content-center">
                                                <button type="button"
                                                    class="btn custom-button btn-sm me-2 edit-bank_list"
                                                    data-bank_list-id="{{ bank_list.id }}" data-bs-toggle="modal"
                                                    data-bs-target="#Editbank_listModal">
                                                    <i class="bi bi-pencil-square"></i>
                                                </button>
                                                <button class="btn btn-sm btn-danger me-2 delete-bank_list"
                                                    data-bank_list-id="{{ bank_list.id }}">
                                                    <i class="bi bi-trash"></i>
                                                </button>
                                            </div>
                                        </td>
                                    </tr>
                                    {% endfor %}
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <!--Company Bank add Modal -->
        <div class="modal fade" id="AddBankModal" tabindex="-1" aria-labelledby="AddBankModalLabel" aria-hidden="true">
            <div class="modal-dialog">
                <div class="modal-content">
                    <form id="addbank_listForm" action="{% url 'hr:add_bank_list_details' %}" method="post"
                        enctype="multipart/form-data">
                        {% csrf_token %}
                        <div class="modal-header">
                            <h1 class="modal-title fs-5 primary-color" id="Addbank_listModalLabel">Add Bank
                            </h1>
                            <button type="button" class="btn-close  btn-close-white" data-bs-dismiss="modal"
                                aria-label="Close"></button>
                        </div>
                        <div class="modal-body model-add">
                            <div class="d-flex flex-wrap w-100">
                                <div class="col-12 col-md-12">
                                    <div class="mb-2">
                                        <label for="Addbank_listMasterName" class="form-label">Select Company</label>
                                        <select class="form-select form-select-sm" aria-label="Select bank_master"
                                            name="company" id="AddBankCompany">
                                            {% for company in company %}
                                            <option value="{{ company.id }}">{{ company.name }}</option>
                                            {% endfor %}
                                        </select>
                                    </div>
                                </div>

                                <div class="col-12 col-md-12">
                                    <div class="mb-2">
                                        <label for="AddBank_remarks" class="form-label">Remarks</label>
                                        <input type="text" class="form-control form-control-sm" id="AddBank_remarks"
                                            name="remarks" required>
                                    </div>
                                </div>
                                <div class="col-12 col-md-12">
                                    <label for="AddBank_status" class="form-label">Status:</label>

                                    <select class="form-control form-control-sm " name="status" id="AddBank_status">
                                        <option value="Active"
                                            {% if company_data.status == 'Active' %}selected{% endif %}>
                                            Active
                                        </option>
                                        <option value="Deactive"
                                            {% if company_data.status == 'Deactive' %}selected{% endif %}>
                                            Deactive</option>
                                    </select>
                                </div>
                            </div>
                        </div>
                        <div class="modal-footer">
                            <button type="button" class="btn btn-secondary btn-sm"
                                data-bs-dismiss="modal">Close</button>
                            <button type="submit" class="btn custom-button btn-sm">Add</button>
                        </div>
                    </form>
                </div>
            </div>
        </div>
        <!-- Company Bank edit Modal -->
        <div class="modal fade" id="Editbank_listModal" tabindex="-1" aria-labelledby="Editbank_listModalLabel"
            aria-hidden="true">
            <div class="modal-dialog">
                <div class="modal-content">
                    <form id="updatebank_listForm" method="post" action="">
                        {% csrf_token %}
                        <input type="hidden" id="editbank_listId" name="id">
                        <div class="modal-header">
                            <h1 class="modal-title fs-5" id="Editbank_listModalLabel">Edit Bank List</h1>
                            <button type="button" class="btn-close  btn-close-white" data-bs-dismiss="modal"
                                aria-label="Close"></button>
                        </div>
                        <div class="modal-body">
                            <div class="d-flex flex-wrap w-100">
                                <div class="col-12 col-md-12">
                                    <div class="mb-2">
                                        <label for="Editbank_listbank_master" class="form-label">Holiday
                                            Master</label>

                                        <select class="form-select form-select-sm" id="Editbank_listbank_master"
                                            name="company">
                                            {% for company in company %}
                                            <option value="{{ company.id }}">{{ company.name }}</option>

                                            {% endfor %}
                                        </select>
                                    </div>
                                    <div class="mb-2">
                                        <label for="Editbank_listbank_name" class="form-label">Company Bank</label>
                                        <input type="text" class="form-control form-control-sm"
                                            id="Editbank_listbank_name" name="bank_name" required>
                                    </div>
                                    <div class="mb-2">
                                        <label for="Editbank_listifsc_code" class="form-label">IFSC Code</label>
                                        <input type="text" class="form-control form-control-sm"
                                            id="Editbank_listifsc_code" name="ifsc_code" required>
                                    </div>
                                    <div class="mb-2">
                                        <label for="Editbank_listbranch" class="form-label">Branch</label>
                                        <input type="text" class="form-control form-control-sm" id="Editbank_listbranch"
                                            name="branch" required>
                                    </div>
                                    <div class="mb-2">
                                        <label for="Editbank_listaccount_no" class="form-label">Account No</label>
                                        <input type="text" class="form-control form-control-sm"
                                            id="Editbank_listaccount_no" name="account_no" required>
                                    </div>
                                    <div class="mb-2">
                                        <label for="Editbank_listremarks" class="form-label">Remarks</label>
                                        <input type="text" class="form-control form-control-sm"
                                            id="Editbank_listremarks" name="remarks" required>
                                    </div>
                                    <div class="mb-2">
                                        <label for="Editbank_status" class="form-label">Status:</label>

                                        <select class="form-control form-control-sm " name="status"
                                            id="Editbank_status">
                                            <option value="Active" {% if company_data.status == 'Active' %}selected
                                                {% endif %}>Active
                                            </option>
                                            <option value="Deactive"
                                                {% if company_data.status == 'Deactive' %}selected{% endif %}>
                                                Deactive</option>
                                        </select>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="modal-footer">
                            <button type="button" class="btn btn-secondary btn-sm"
                                data-bs-dismiss="modal">Close</button>
                            <button type="submit" class="btn custom-button btn-sm" id="save_bank_list_changes_btn">Save
                                changes</button>
                        </div>
                    </form>
                </div>
            </div>
        </div> {% endcomment %}
        <!-- Department Tab -->
        <div class="tab-pane fade" id="nav-Department" role="tabpanel" aria-labelledby="nav-Department-tab"
            tabindex="0">
            <div class="card">
                <div class="card-header d-flex justify-content-between border-0">
                    <div class="text-center d-flex align-items-center">
                        <h6 class="mb-0 pageTitle"><strong>Department List</strong></h6>
                    </div>
                    <div class="d-flex justify-content-end mb-0">
                        <button type="button" class="btn custom-button btn-sm" data-bs-toggle="modal"
                            id="AddDepartment" data-bs-target="#AddDepartmentModal">
                            <i class="bi bi-plus-lg"></i> Add Department
                        </button>
                    </div>
                </div>

                <div class="card-body">
                    <div class="row">
                        
                        <div class="table-responsive overflow-auto">
                            <table class="table-responsive overflow-auto DataTable w-100"
                                id="allDepartmentMasterTablelist">
                                <!-- Table Header -->
                                <thead>
                                    <tr>
                                        <th scope="col" class="text-nowrap fw-medium">Department</th>
                                        <th scope="col" class="text-nowrap fw-medium text-center">
                                            <p class="mb-0 text-center"> Action </p>
                                        </th>
                                    </tr>
                                </thead>
                                <!-- Table Body -->
                                <tbody>
                                    {% for department in department_all %}
                                    <tr>
                                        <td>{{ department.name }}</td>
                                        <td>
                                            <div class="d-flex justify-content-center">
                                                <button id="edit_department_button_{{ department.id }}"
                                                    class="btn btn-sm custom-button me-2 edit-department"
                                                    data-bs-toggle="modal" data-bs-target="#DepartmenteditModal"
                                                    data-department-id="{{ department.id }}">
                                                    <i class="bi bi-pencil-square"></i>
                                                </button>
                                                <button class="btn btn-sm btn-danger delete-department"
                                                    data-department-id="{{ department.id }}">
                                                    <i class="bi bi-trash"></i>
                                                </button>
                                            </div>
                                        </td>
                                    </tr>
                                    {% endfor %}
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <!-- Department Add Modal -->
        <div class="modal fade" id="AddDepartmentModal" tabindex="-1" aria-labelledby="AddDepartmentModalLabel"
            aria-hidden="true">
            <div class="modal-dialog">
                <div class="modal-content">
                    <form id="adddepartmentmasterForm" method="post" action="#">
                        {% csrf_token %}
                        <div class="modal-header">
                            <h1 class="modal-title fs-5 primary-color" id="AddDepartmentModalLabel">Add Department</h1>
                            <button type="button" class="btn-close  btn-close-white" data-bs-dismiss="modal"
                                aria-label="Close"></button>
                        </div>
                        <div class="modal-body">
                            <div class="d-flex flex-wrap w-100">
                                <div class="col-12 col-md-12">
                                    <div class="mb-2">
                                        <label for="newdepartment" class="form-label">Department</label>
                                        <input type="text" class="form-control form-control-sm" id="newdepartment"
                                            name="newdepartment" required>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="modal-footer">
                            <button type="button" class="btn btn-secondary btn-sm"
                                data-bs-dismiss="modal">Close</button>
                            <button id="" type="submit" class="btn custom-button btn-sm addDeptBtn">Add</button>
                        </div>
                    </form>
                </div>
            </div>
        </div>
        <!-- Department Edit Modal -->
        <div class="modal fade" id="DepartmenteditModal" tabindex="-1" aria-labelledby="DepartmenteditModalLabel"
            aria-hidden="true">
            <div class="modal-dialog">
                <div class="modal-content">
                    <form id="updateDepartmentForm" method="post" action="">
                        {% csrf_token %}
                        <input type="hidden" name="id" id="updateDepartmentId">
                        <div class="modal-header">
                            <h1 class="modal-title fs-5" id="DepartmenteditModalLabel">Edit Department</h1>
                            <button type="button" class="btn-close  btn-close-white" data-bs-dismiss="modal"
                                aria-label="Close"></button>
                        </div>
                        <div class="modal-body">
                            <div class="d-flex flex-wrap w-100">
                                <div class="col-12 col-md-12">
                                    <div class="mb-2">
                                        <label for="EditDepartmentName" class="form-label">Department</label>
                                        <input type="text" class="form-control form-control-sm" id="EditDepartmentName"
                                            name="name">
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="modal-footer">
                            <button type="button" class="btn btn-secondary btn-sm" data-bs-dismiss="modal">Close</button>
                            <button type="submit" class="btn custom-button btn-sm" id="save_department_changes_btn">Save
                                changes</button>
                        </div>
                    </form>
                </div>
            </div>
        </div>
        <!-- Designation Tab Panel -->
        <div class="tab-pane fade" id="nav-Designation" role="tabpanel" aria-labelledby="nav-Designation-tab"
            tabindex="0">
            <div class="card">
                <div class="card-header d-flex justify-content-between border-0">
                    <div class="text-center d-flex align-items-center">
                        <h6 class="mb-0 pageTitle"><strong>Designation List</strong></h6>
                    </div>
                    <div class="d-flex justify-content-end mb-0">
                        <button type="button" class="btn custom-button btn-sm" data-bs-toggle="modal"
                            data-bs-target="#AddDesignationModal">
                            <i class="bi bi-plus-lg"></i> Add Designation
                        </button>
                    </div>
                </div>
                <div class="card-body">
                    <div class="row">
                       
                        <div class="table-responsive overflow-auto">
                            <table class="table-responsive overflow-auto DataTable w-100"
                                id="allDesignationMasterTablelist">
                                <thead>
                                    <tr>
                                        <th scope="col" class="text-nowrap fw-medium">Department</th>
                                        <th scope="col" class="text-nowrap fw-medium">Designation</th>
                                        <th scope="col" class="text-nowrap fw-medium text-center">
                                            <p class="mb-0 text-center">Action</p>
                                        </th>
                                    </tr>
                                </thead>
                                <tbody>
                                    {% for designation in designation_all %}
                                    <tr>
                                        <td>{{ designation.department.name }}</td>
                                        <td>{{ designation.name }}</td>
                                        <td>
                                            <div class="d-flex justify-content-center">
                                                <button type="button"
                                                    class="btn custom-button btn-sm me-2 edit-designation"
                                                    data-designation-id="{{ designation.id }}" data-bs-toggle="modal"
                                                    data-bs-target="#EditDesignationModal">
                                                    <i class="bi bi-pencil-square"></i>
                                                </button>
                                                <button class="btn btn-sm btn-danger delete-designation"
                                                    data-designation-id="{{ designation.id }}">
                                                    <i class="bi bi-trash"></i>
                                                </button>
                                            </div>
                                        </td>
                                    </tr>
                                    {% endfor %}
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <!-- Designation Add Modal -->
        <div class="modal fade" id="AddDesignationModal" tabindex="-1" aria-labelledby="AddDesignationModalLabel"
            aria-hidden="true">
            <div class="modal-dialog">
                <div class="modal-content">
                    <form id="addDesignationForm" action="{% url 'hr:add_designation_details' %}" method="post"
                        enctype="multipart/form-data">
                        {% csrf_token %}
                        <div class="modal-header">
                            <h1 class="modal-title fs-5 primary-color" id="AddDesignationModalLabel">Add Designation
                            </h1>
                            <button type="button" class="btn-close  btn-close-white" data-bs-dismiss="modal"
                                aria-label="Close"></button>
                        </div>
                        <div class="modal-body model-add">
                            <div class="d-flex flex-wrap w-100">
                                <div class="col-12 col-md-12">
                                    <div class="mb-2">
                                        <label for="AddDepartmentName" class="form-label">Select
                                            Department</label>
                                        <select class="form-select form-select-sm" aria-label="Select Department"
                                            name="department" id="AddDepartmentName">
                                            {% for department in department_all %}
                                            <option value="{{ department.name }}">{{ department.name }}
                                            </option>
                                            {% endfor %}
                                        </select>
                                    </div>
                                </div>
                                <div class="col-12 col-md-12">
                                    <div class="mb-2">
                                        <label for="AddDesignationName" class="form-label">Designation</label>
                                        <input type="text" class="form-control form-control-sm" id="AddDesignationName"
                                            name="name" required>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="modal-footer">
                            <button type="button" class="btn btn-secondary btn-sm"
                                data-bs-dismiss="modal">Close</button>
                            <button type="submit" class="btn custom-button btn-sm addDesignationBtn" >Add</button>
                        </div>
                    </form>
                </div>
            </div>
        </div>
        <!-- Designation edit modal -->
        <div class="modal fade" id="EditDesignationModal" tabindex="-1" aria-labelledby="EditDesignationModalLabel"
            aria-hidden="true">
            <div class="modal-dialog">
                <div class="modal-content">
                    <form id="updateDesignationForm" method="post" action="">
                        {% csrf_token %}
                        <input type="hidden" id="editDesignationId" name="id">
                        <div class="modal-header">
                            <h1 class="modal-title fs-5" id="EditDesignationModalLabel">Edit Designation</h1>
                            <button type="button" class="btn-close  btn-close-white" data-bs-dismiss="modal"
                                aria-label="Close"></button>
                        </div>
                        <div class="modal-body">
                            <div class="d-flex flex-wrap w-100">
                                <div class="col-12 col-md-12">
                                    <div class="mb-2">
                                        <label for="EditDesignationDepartment" class="form-label">Department</label>
                                        <select class="form-select form-select-sm" id="EditDesignationDepartment"
                                            name="department">
                                            {% for department in department_all %}
                                            <option value="{{ department.id }}">{{ department.name }}</option>
                                            {% endfor %}
                                        </select>
                                    </div>
                                    <div class="mb-2">
                                        <label for="EditDesignationName" class="form-label">Designation</label>
                                        <input type="text" class="form-control form-control-sm" id="EditDesignationName"
                                            name="name" required>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="modal-footer">
                            <button type="button" class="btn btn-secondary btn-sm"
                                data-bs-dismiss="modal">Close</button>
                            <button type="submit" class="btn custom-button btn-sm savedesignationBtn"
                                id="save_designation_changes_btn">Save changes</button>
                        </div>
                    </form>
                </div>
            </div>
        </div>
        <!-- Position Tab -->
        <div class="tab-pane fade" id="nav-Position" role="tabpanel" aria-labelledby="nav-Position-tab" tabindex="0">
            <div class="card">
                <div class="card-header d-flex justify-content-between border-0">
                    <div class="text-center d-flex align-items-center">
                        <h6 class="mb-0 pageTitle"><strong>Position List</strong></h6>
                    </div>
                    <div class="d-flex justify-content-end mb-0">
                        <button type="button" class="btn custom-button btn-sm" data-bs-toggle="modal"
                            id="AddPosition" data-bs-target="#AddPositionModal">
                            <i class="bi bi-plus-lg"></i> Add Position
                        </button>
                    </div>
                </div>

                <div class="card-body">
                    <div class="row">
                        
                        <div class="table-responsive overflow-auto">
                            <table class="table-responsive overflow-auto DataTable dataTable border-0 w-100"
                                id="allPositionMasterTablelist">
                                <!-- Table Header -->
                                <thead>
                                    <tr>
                                        <th scope="col" class="text-nowrap fw-medium">Position</th>
                                        <th scope="col" class="text-nowrap fw-medium">Remarks</th>
                                        <th scope="col" class="text-nowrap fw-medium text-center">
                                            <p class="mb-0 text-center"> Action </p>
                                        </th>
                                    </tr>
                                </thead>
                                <!-- Table Body -->
                                <tbody>
                                    {% for position in position_all %}
                                    <tr>
                                        <td>{{ position.name }}</td>
                                        <td>{{ position.remarks|default:"" }}</td>
                                        <td>
                                            <div class="d-flex justify-content-center">
                                                <button id="edit_position_button_{{ position.id }}"
                                                    class="btn btn-sm custom-button me-2 edit-position"
                                                    data-bs-toggle="modal" data-bs-target="#PositioneditModal"
                                                    data-position-id="{{ position.id }}">
                                                    <i class="bi bi-pencil-square"></i>
                                                </button>
                                                <button class="btn btn-sm btn-danger delete-position"
                                                    data-position-id="{{ position.id }}">
                                                    <i class="bi bi-trash"></i>
                                                </button>
                                            </div>
                                        </td>
                                    </tr>
                                    {% endfor %}
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <!-- Position Add Modal -->
        <div class="modal fade" id="AddPositionModal" tabindex="-1" aria-labelledby="AddPositionModalLabel"
            aria-hidden="true">
            <div class="modal-dialog">
                <div class="modal-content">
                    <form id="addpositionmasterForm" method="post" action="#">
                        {% csrf_token %}
                        <div class="modal-header">
                            <h1 class="modal-title fs-5 primary-color" id="AddPositionModalLabel">Add Position</h1>
                            <button type="button" class="btn-close  btn-close-white" data-bs-dismiss="modal"
                                aria-label="Close"></button>
                        </div>
                        <div class="modal-body">
                            <div class="d-flex flex-wrap w-100">
                                <div class="col-12 col-md-12">
                                    <div class="mb-2">
                                        <label for="newposition" class="form-label">Position</label>
                                        <input type="text" class="form-control form-control-sm" id="newposition"
                                            name="newposition" required>
                                    </div>
                                    <div class="mb-2">
                                        <label for="newremarks" class="form-label">Remarks</label>
                                        <input type="text" class="form-control form-control-sm" id="newremarks"
                                            name="newremarks" required>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="modal-footer">
                            <button type="button" class="btn btn-secondary btn-sm"
                                data-bs-dismiss="modal">Close</button>
                            <button id="" type="submit" class="btn custom-button btn-sm addpositionBtn" >Add</button>
                        </div>
                    </form>
                </div>
            </div>
        </div>
        <!-- Position Edit Modal -->
        <div class="modal fade" id="PositioneditModal" tabindex="-1" aria-labelledby="PositioneditModalLabel"
            aria-hidden="true">
            <div class="modal-dialog">
                <div class="modal-content">
                    <form id="updatePositionForm" method="post" action="">
                        {% csrf_token %}
                        <input type="hidden" name="id" id="updatePositionId">
                        <div class="modal-header">
                            <h1 class="modal-title fs-5" id="PositioneditModalLabel">Edit Position</h1>
                            <button type="button" class="btn-close  btn-close-white" data-bs-dismiss="modal"
                                aria-label="Close"></button>
                        </div>
                        <div class="modal-body">
                            <div class="d-flex flex-wrap w-100">
                                <div class="col-12 col-md-12">
                                    <div class="mb-2">
                                        <label for="EditPositionName" class="form-label">Position</label>
                                        <input type="text" class="form-control form-control-sm" id="EditPositionName"
                                            name="name">
                                    </div>
                                    <div class="mb-2">
                                        <label for="EditPositionRemarks" class="form-label">Remarks</label>
                                        <input type="text" class="form-control form-control-sm" id="EditPositionRemarks"
                                            name="remarks">
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="modal-footer">
                            <button type="button" class="btn btn-secondary btn-sm"
                                data-bs-dismiss="modal">Close</button>
                            <button type="submit" class="btn custom-button btn-sm positionSaveBtn" id="save_position_changes_btn">Save
                                changes</button>
                        </div>
                    </form>
                </div>
            </div>
        </div>
        <!-- Weekoff tab Panel -->
        <div class="tab-pane fade" id="nav-CWeekoff" role="tabpanel" aria-labelledby="nav-CWeekoff-tab" tabindex="0">
            <div class="card">
                <div class="card-header d-flex justify-content-between border-0">
                    <div class="text-center d-flex align-items-center">
                        <h6 class="mb-0 pageTitle"><strong>Weekoff List</strong></h6>
                    </div>
                    <div class="d-flex justify-content-end mb-0">
                        <button type="button" class="btn custom-button btn-sm" data-bs-toggle="modal"
                            data-bs-target="#AddWeekoffModal">
                            <i class="bi bi-plus-lg"></i> Add Weekoff
                        </button>
                    </div>
                </div>
                <div class="card-body">
                    <div class="row">
                       
                        <div class="table-responsive overflow-auto">
                            <table class="DataTable w-100" id="allWeekoffMasterTablelist">
                                <thead>
                                    <tr>
                                        <th scope="col" class="text-nowrap fw-medium">Weekoff</th>
                                        <th scope="col" class="text-nowrap fw-medium">Details</th>
                                        <th scope="col" class="text-nowrap fw-medium text-center">
                                            <p class="text-center mb-0">Action</p>
                                        </th>
                                    </tr>
                                </thead>
                                <tbody>
                                    {% for weekoff in weekoff_all %}
                                    <tr>
                                        <td>{{ weekoff.name }}</td>
                                        <td>{{ weekoff.remarks }}</td>
                                        <td>
                                            <div class="d-flex justify-content-center">
                                                <button id="edit_weekoff_button_{{ weekoff.id }}"
                                                    class="btn btn-sm custom-button me-2 edit-weekoff"
                                                    data-bs-toggle="modal" data-bs-target="#WeekoffeditModal"
                                                    data-department-id="{{ weekoff.id }}">
                                                    <i class="bi bi-pencil-square"></i>
                                                </button>
                                                <button class="btn btn-sm btn-danger delete-weekoff"
                                                    data-weekoff-id="{{ weekoff.id }}"><i
                                                        class="bi bi-trash"></i></button>
                                            </div>
                                        </td>
                                    </tr>
                                    {% endfor %}
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>
            <div class="modal fade" id="AddWeekoffModal" tabindex="-1" aria-labelledby="AddWeekoffModalLabel"
                aria-hidden="true">
                <div class="modal-dialog">
                    <div class="modal-content">
                        <form id="addweekoffForm" action="{% url 'hr:add_weekoff_details' %}" method="post"
                            enctype="multipart/form-data">
                            {% csrf_token %}
                            <div class="modal-header">
                                <h1 class="modal-title fs-5 primary-color" id="AddWeekoffModalLabel">Add Weekoff</h1>
                                <button type="button" class="btn-close  btn-close-white" data-bs-dismiss="modal"
                                    aria-label="Close"></button>
                            </div>
                            <div class="modal-body">
                                <div class="d-flex flex-wrap w-100">
                                    <div class="col-12 col-md-12 ">
                                        <div class="mb-2">
                                            <label for="AddWeekoffName" class="form-label">Weekoff Name</label>
                                            <input type="text" class="form-control form-control-sm" id="AddWeekoffName"
                                                name="name">
                                        </div>
                                    </div>
                                    <div class="col-12 col-md-12">
                                        <div class="mb-3">
                                            <label for="exampleFormControlTextarea1" class="form-label">Remarks</label>
                                            <textarea class="form-control form-control-sm"
                                                id="exampleFormControlTextarea1" name="remarks" rows="3"></textarea>
                                        </div>
                                    </div>
                                    <div class="col-12 ">
                                        <div class="d-flex justify-content-between">
                                            <h6>Weekoff </h6>
                                        </div>
                                        <div class="col-12">
                                            <div class="table-responsive text-center">
                                                <table id="weekTable" class="table weekTable weekTable-edit table-sm">
                                                    <thead>
                                                        <tr>
                                                            <th>Sun</th>
                                                            <th>Mon</th>
                                                            <th>Tue</th>
                                                            <th>Wed</th>
                                                            <th>Thu</th>
                                                            <th>Fri</th>
                                                            <th>Sat</th>
                                                        </tr>
                                                    </thead>
                                                    <tbody id="weekTableBody">
                                                    </tbody>
                                                </table>
                                            </div>
                                            <div class=" d-flex">
                                                <div class="d-flex align-items-center">
                                                    <div class="green p-2">
                                                        <div class="day-switch p-2"></div>
                                                    </div>
                                                    <div>Working day</div>
                                                </div>
                                                <div class="d-flex align-items-center">
                                                    <div class="red p-2">
                                                        <div class="day-switch p-2"></div>
                                                    </div>
                                                    <div>Weekoff</div>
                                                </div>
                                                <div class="d-flex align-items-center">
                                                    <div class="yellow p-2">
                                                        <div class="day-switch p-2"></div>
                                                    </div>
                                                    <div>Half Day</div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="modal-footer">
                                <button type="button" class="btn btn-secondary btn-sm"
                                    data-bs-dismiss="modal">Close</button>
                                <button type="submit" class="btn custom-button btn-sm add-weekoff-button" >Add</button>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
            <!-- edit modal -->
            <div class="modal fade" id="WeekoffeditModal" tabindex="-1" aria-labelledby="WeekoffeditModalLabel"
                aria-hidden="true">
                <div class="modal-dialog">
                    <div class="modal-content">
                        <form id="updateweekoffForm" method="post" action="">
                            {% csrf_token %}
                            <div class="modal-header">
                                <h1 class="modal-title fs-5" id="WeekoffeditModalLabel">Edit Weekoff</h1>
                                <button type="button" class="btn-close  btn-close-white " data-bs-dismiss="modal"
                                    aria-label="Close"></button>
                            </div>
                            <div class="modal-body">
                                <div class="d-flex flex-wrap w-100">
                                    <div class="col-12 col-md-12 ">
                                        <div class="mb-2">
                                            <label for="editWeekoffName" class="form-label">Weekoff Name</label>
                                            <input type="text" class="form-control form-control-sm" id="editWeekoffName"
                                                value="">

                                        </div>
                                    </div>
                                    <div class="col-12 col-md-12">
                                        <div class="mb-3">
                                            <label for="exampleFormControlTextarea1" class="form-label">Remarks</label>
                                            <textarea class="form-control form-control-sm" id="editWeekoffRemarks"
                                                rows="3" value=""></textarea>

                                        </div>
                                    </div>
                                    <div class="col-12 ">
                                        <div class="d-flex justify-content-between">
                                            <h6>Weekoff </h6>
                                        </div>
                                        <div class="col-12">
                                            <div class="table-responsive text-center">
                                                <table id="weekTable2" class="table weekTable weekTable-edit table-sm">
                                                    <thead>
                                                        <tr>
                                                            <th>Sun</th>
                                                            <th>Mon</th>
                                                            <th>Tue</th>
                                                            <th>Wed</th>
                                                            <th>Thu</th>
                                                            <th>Fri</th>
                                                            <th>Sat</th>
                                                        </tr>
                                                    </thead>
                                                    <tbody id="weekTableBody2">
                                                    </tbody>
                                                </table>
                                            </div>
                                            <div class=" d-flex">
                                                <div class="d-flex align-items-center">
                                                    <div class=" green p-2">
                                                        <div class="day-switch p-2"></div>
                                                    </div>
                                                    <div>Working day</div>
                                                </div>
                                                <div class="d-flex align-items-center">
                                                    <div class=" red p-2">
                                                        <div class="day-switch p-2"></div>
                                                    </div>
                                                    <div>Weekoff</div>
                                                </div>
                                                <div class="d-flex align-items-center">
                                                    <div class=" yellow p-2">
                                                        <div class="day-switch p-2"></div>
                                                    </div>
                                                    <div>Half Day</div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="modal-footer">
                                <button type="button" class="btn btn-secondary btn-sm"
                                    data-bs-dismiss="modal">Close</button>
                                <button type="submit" class="btn custom-button btn-sm edit-weekoff-btn ">Save changes</button>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
        </div>
        <!-- Holiday tab Panel -->
        <div class="tab-pane fade" id="nav-CHoliday" role="tabpanel" aria-labelledby="nav-CHoliday-tab" tabindex="0">
            <div class="card">
                <div class="card-header d-flex justify-content-between border-0">
                    <div class="text-center d-flex align-items-center">
                        <h6 class="mb-0 pageTitle"><strong>Holiday Master List</strong></h6>
                    </div>
                    <div class="d-flex justify-content-end mb-0">
                        <button type="button" class="btn custom-button btn-sm" data-bs-toggle="modal"
                            id="Addholidaymaster" data-bs-target="#AddholidaymasterModal">
                            <i class="bi bi-plus-lg"></i> Add Holiday Master
                        </button>
                    </div>
                </div>

                <div class="card-body">
                    <div class="row">
                       
                        <div class="table-responsive overflow-auto">
                            <table class="table-responsive overflow-auto DataTable w-100"
                                id="allholidaymasterMasterTablelist">
                                <thead>
                                    <tr>
                                        <th scope="col" class="text-nowrap fw-medium">Name</th>
                                        <th scope="col" class="text-nowrap fw-medium">Year</th>
                                        <th scope="col" class="text-nowrap fw-medium">Remarks</th>
                                        <th scope="col" class="text-nowrap fw-medium text-center">
                                            <p class="text-center mb-0">Action</p>
                                        </th>
                                    </tr>
                                </thead>
                                <tbody>
                                    {% for holidaymaster in holidaymaster_all %}
                                    <tr>
                                        <td>{{ holidaymaster.name }}</td>
                                        <td>{{ holidaymaster.year|date:'Y' }}</td>
                                        <td>{{ holidaymaster.remarks }}</td>
                                        <td>
                                            <div class="d-flex justify-content-center">
                                                <button id="edit_holidaymaster_button_{{ holidaymaster.id }}"
                                                    class="btn btn-sm custom-button me-2 edit-holidaymaster"
                                                    data-bs-toggle="modal" data-bs-target="#holidaymastereditModal"
                                                    data-holidaymaster-id="{{ holidaymaster.id }}">
                                                    <i class="bi bi-pencil-square"></i>
                                                </button>
                                                <button class="btn btn-sm btn-danger me-2 delete-holidaymaster"
                                                    data-holidaymaster-id="{{ holidaymaster.id }}">
                                                    <i class="bi bi-trash"></i>
                                                </button>
                                            </div>
                                        </td>
                                    </tr>
                                    {% endfor %}
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <!-- Holiday add Modal -->
        <div class="modal fade" id="AddholidaymasterModal" tabindex="-1" aria-labelledby="AddholidaymasterModalLabel"
            aria-hidden="true">
            <div class="modal-dialog">
                <div class="modal-content">
                    <form id="addholidaymasterForm" method="post" action="{% url 'hr:add_holidaymaster_details' %}">
                        {% csrf_token %}
                        <div class="modal-header">
                            <h1 class="modal-title fs-5 primary-color" id="AddholidaymasterModalLabel">Add Holiday
                                Master</h1>
                            <button type="button" class="btn-close  btn-close-white" data-bs-dismiss="modal"
                                aria-label="Close"></button>
                        </div>
                        <div class="modal-body">
                            <div class="d-flex flex-wrap w-100">
                                <div class="col-12 col-md-12">
                                    <div class="mb-2">
                                        <label for="newholidaymaster" class="form-label">Name</label>
                                        <input type="text" class="form-control form-control-sm" id="newholidaymaster"
                                            name="name">
                                    </div>
                                </div>
                                <div class="col-12 col-md-12">
                                    <div class="mb-2">
                                        <label for="Addannouncement_year" class="form-label">Year</label>
                                        <input type="date" class="form-control form-control-sm"
                                            id="Addannouncement_year" name="year">
                                    </div>
                                </div>
                                <div class="col-12 col-md-12">
                                    <div class="mb-2">
                                        <label for="Addannouncement_remarks" class="form-label">Remarks</label>
                                        <input type="text" class="form-control form-control-sm"
                                            id="Addannouncement_remarks" name="remarks">
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="modal-footer">
                            <button type="button" class="btn btn-secondary btn-sm"
                                data-bs-dismiss="modal">Close</button>
                            <button id="" type="submit" class="btn custom-button btn-sm add-holiday-btn">Add</button>
                        </div>
                    </form>
                </div>
            </div>
        </div>
        <!-- Holiday edit modal -->
        <div class="modal fade" id="holidaymastereditModal" tabindex="-1" aria-labelledby="holidaymastereditModalLabel"
            aria-hidden="true">
            <div class="modal-dialog">
                <div class="modal-content">
                    <form id="updateholidaymasterForm" method="post" action="">
                        {% csrf_token %}
                        <input type="hidden" name="id" id="EditholidaymasterId">
                        <div class="modal-header">
                            <h1 class="modal-title fs-5" id="holidaymastereditModalLabel">Edit Holiday Master</h1>
                            <button type="button" class="btn-close  btn-close-white" data-bs-dismiss="modal"
                                aria-label="Close"></button>
                        </div>
                        <div class="modal-body">
                            <div class="d-flex flex-wrap w-100">
                                <div class="col-12 col-md-12">
                                    <div class="mb-2">
                                        <label for="EditholidaymasterName" class="form-label">Name</label>
                                        <input type="text" class="form-control form-control-sm"
                                            id="EditholidaymasterName" name="name">
                                    </div>
                                </div>
                                <div class="col-12 col-md-12">
                                    <div class="mb-2">
                                        <label for="EditholidaymasterYear" class="form-label">Year</label>
                                        <input type="date" class="form-control form-control-sm"
                                            id="EditholidaymasterYear" name="year">
                                    </div>
                                </div>
                                <div class="col-12 col-md-12">
                                    <div class="mb-2">
                                        <label for="EditholidaymasterRemarks" class="form-label">Remarks</label>
                                        <input type="text" class="form-control form-control-sm update-holiday-save-btn"
                                            id="EditholidaymasterRemarks" name="remarks">
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="modal-footer">
                            <button type="button" class="btn btn-secondary btn-sm"
                                data-bs-dismiss="modal">Close</button>
                            <button type="submit" class="btn custom-button btn-sm edit-holiday-save-btn"
                                id="save_holidaymaster_changes_btn">Save changes</button>
                        </div>
                    </form>
                </div>
            </div>
        </div>

        <!-- Holiday delete modal -->
        <div class="modal fade" id="DeleteModal" tabindex="-1" aria-labelledby="DeleteModalLabel" aria-hidden="true">
            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="modal-header">
                        <h1 class="modal-title fs-5" id="exampleModalLabel">Delete Holiday</h1>
                        <button type="button" class="btn-close  btn-close-white" data-bs-dismiss="modal"
                            aria-label="Close"></button>
                    </div>
                    <div class="modal-body">
                        <h6>Are you sure you want to delete the data?</h6>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                        <button type="button" class="btn btn-danger">Delete</button>
                    </div>
                </div>
            </div>
        </div>
        <!-- HolidayList tab Panel -->
        <div class="tab-pane fade" id="nav-CHolidayList" role="tabpanel" aria-labelledby="nav-CHolidayList-tab"
            tabindex="0">
            <div class="card">
                <div class="card-header d-flex justify-content-between border-0">
                    <div class="text-center d-flex align-items-center">
                        <h6 class="mb-0 pageTitle"><strong>Holiday List</strong></h6>
                    </div>
                    <div class="d-flex justify-content-end mb-0">
                        <button type="button" class="btn custom-button btn-sm" data-bs-toggle="modal"
                            data-bs-target="#Addholiday_listModal">
                            <i class="bi bi-plus-lg"></i> Add Holiday List
                        </button>
                    </div>
                </div>
                <div class="card-body">
                    <div class="row">
                        <div class="table-responsive overflow-auto">
                            <table class="table-responsive overflow-auto DataTable w-100"
                                id="allholiday_listMasterTablelist">
                                <thead>
                                    <tr>
                                        <th scope="col" class="text-nowrap fw-medium">Holiday Master</th>
                                        <th scope="col" class="text-nowrap fw-medium">Date</th>
                                        <th scope="col" class="text-nowrap fw-medium">Festival</th>
                                        <th scope="col" class="text-nowrap fw-medium text-center">
                                            <p class="text-center mb-0">Action</p>
                                        </th>
                                    </tr>
                                </thead>
                                <tbody>
                                    {% for holiday_list in holiday_list_all %}
                                    <tr>
                                        <td>{{ holiday_list.holiday_master }}</td>
                                        <td>{{ holiday_list.date | date:'d-M-Y' }}</td>
                                        <td>{{ holiday_list.festival_name }}</td>
                                        <td>
                                            <div class="d-flex justify-content-center">
                                                <button type="button"
                                                    class="btn custom-button btn-sm me-2 edit-holiday_list"
                                                    data-holiday_list-id="{{ holiday_list.id }}" data-bs-toggle="modal"
                                                    data-bs-target="#Editholiday_listModal">
                                                    <i class="bi bi-pencil-square"></i>
                                                </button>
                                                <button class="btn btn-sm btn-danger me-2 delete-holiday_list"
                                                    data-holiday_list-id="{{ holiday_list.id }}">
                                                    <i class="bi bi-trash"></i>
                                                </button>
                                            </div>
                                        </td>
                                    </tr>
                                    {% endfor %}
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- HolidayList add Modal -->
        <div class="modal fade" id="Addholiday_listModal" tabindex="-1" aria-labelledby="Addholiday_listModalLabel"
            aria-hidden="true">
            <div class="modal-dialog">
                <div class="modal-content">
                    <form id="addholiday_listForm" action="{% url 'hr:add_holiday_list_details' %}" method="post"
                        enctype="multipart/form-data">
                        {% csrf_token %}
                        <div class="modal-header">
                            <h1 class="modal-title fs-5 primary-color" id="Addholiday_listModalLabel">Add Holiday List
                            </h1>
                            <button type="button" class="btn-close  btn-close-white" data-bs-dismiss="modal"
                                aria-label="Close"></button>
                        </div>
                        <div class="modal-body model-add">
                            <div class="d-flex flex-wrap w-100">
                                <div class="col-12 col-md-12">
                                    <div class="mb-2">
                                        <label for="Addholiday_listMasterName" class="form-label">Select Holiday
                                            Master</label>
                                        <select class="form-select form-select-sm" aria-label="Select holiday_master"
                                            name="holiday_master" id="Addholiday_listMasterName">
                                            {% for holiday_master in holidaymaster_all %}
                                            <option value="{{ holiday_master.id }}">{{ holiday_master.name }}
                                            </option>
                                            {% endfor %}
                                        </select>
                                    </div>
                                </div>
                                <div class="col-12 col-md-12">
                                    <div class="mb-2">
                                        <label for="Addholiday_listDate" class="form-label">Holiday Date</label>
                                        <input type="date" class="form-control form-control-sm" id="Addholiday_listDate"
                                            name="date" required>
                                    </div>
                                </div>
                                <div class="col-12 col-md-12">
                                    <div class="mb-2">
                                        <label for="Addholiday_listfestival_name" class="form-label">Festival
                                            Name</label>
                                        <input type="text" class="form-control form-control-sm"
                                            id="Addholiday_listfestival_name" name="festival_name" required>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="modal-footer">
                            <button type="button" class="btn btn-secondary btn-sm"
                                data-bs-dismiss="modal">Close</button>
                            <button type="submit" class="btn custom-button btn-sm">Add</button>
                        </div>
                    </form>
                </div>
            </div>
        </div>
        <!-- HolidayList edit Modal -->
        <div class="modal fade" id="Editholiday_listModal" tabindex="-1" aria-labelledby="Editholiday_listModalLabel"
            aria-hidden="true">
            <div class="modal-dialog">
                <div class="modal-content">
                    <form id="updateholiday_listForm" method="post" action="">
                        {% csrf_token %}
                        <input type="hidden" id="editholiday_listId" name="id">
                        <div class="modal-header">
                            <h1 class="modal-title fs-5" id="Editholiday_listModalLabel">Edit Holiday List</h1>
                            <button type="button" class="btn-close  btn-close-white" data-bs-dismiss="modal"
                                aria-label="Close"></button>
                        </div>
                        <div class="modal-body">
                            <div class="d-flex flex-wrap w-100">
                                <div class="col-12 col-md-12">
                                    <div class="mb-2">
                                        <label for="Editholiday_listholiday_master" class="form-label">Holiday
                                            Master</label>
                                        <select class="form-select form-select-sm" id="Editholiday_listholiday_master"
                                            name="holiday_master" readonly>
                                            {% for holiday_master in holidaymaster_all %}
                                            <option value="{{ holiday_master.id }}">{{ holiday_master.name }}</option>
                                            {% endfor %}
                                        </select>
                                    </div>
                                    <div class="mb-2">
                                        <label for="Editholiday_listDate" class="form-label">Holiday Date</label>
                                        <input type="date" class="form-control form-control-sm"
                                            id="Editholiday_listDate" name="date" required>
                                    </div>
                                    <div class="mb-2">
                                        <label for="Editholiday_listfestival_name" class="form-label">Festival
                                            Name</label>
                                        <input type="text" class="form-control form-control-sm"
                                            id="Editholiday_listfestival_name" name="festival_name" required>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="modal-footer">
                            <button type="button" class="btn btn-secondary btn-sm"
                                data-bs-dismiss="modal">Close</button>
                            <button type="submit" class="btn custom-button btn-sm save-holiday-list-btn"
                                id="save_holiday_list_changes_btn">Save changes</button>
                        </div>
                    </form>
                </div>
            </div>
        </div>


         <!-- Payroll List tab Panel -->
         <div class="tab-pane fade" id="nav-CPayroll" role="tabpanel" aria-labelledby="nav-CPayroll-tab" tabindex="0">
            <div class="card">
                <div class="card-header d-flex justify-content-between border-0">
                    <div class="text-center d-flex align-items-center">
                        <h6 class="mb-0 pageTitle"><strong>Payroll List</strong></h6>
                    </div>
                    <div class="d-flex justify-content-end mb-0">
                        <button type="button" class="btn custom-button btn-sm" data-bs-toggle="modal"
                            data-bs-target="#AddPayrollModal">
                            <i class="bi bi-plus-lg"></i> Add Payroll 
                        </button>
                    </div>
                </div>

                <div class="card-body">
                    <div class="row">
                       
                        <div class="table-responsive overflow-auto">
                            <table class="table-responsive overflow-auto DataTable w-100" id="allpayrollMasterTablelist">
                                <thead>
                                    <tr>
                                        <th scope="col" class="text-nowrap fw-medium">Company Master</th>
                                        <th scope="col" class="text-nowrap fw-medium">Basic</th>
                                        <th scope="col" class="text-nowrap fw-medium">Hra</th>
                                        <th scope="col" class="text-nowrap fw-medium">Ca</th>
                                        <th scope="col" class="text-nowrap fw-medium">Sa</th>
                                        <th scope="col" class="text-nowrap fw-medium">Pt</th>
                                        <th scope="col" class="text-nowrap fw-medium">Employer Pf</th>
                                        <th scope="col" class="text-nowrap fw-medium">Employer Esic</th>
                                        <th scope="col" class="text-nowrap fw-medium">Employee Pf</th>
                                        <th scope="col" class="text-nowrap fw-medium">Employee Esic</th>
                                        <th scope="col" class="text-nowrap fw-medium text-center">
                                            <p class="text-center mb-0">Action</p>
                                        </th>
                                    </tr>
                                </thead>
                                <tbody>
                                    {% for payroll_list in company_payroll_all %}
                                    <tr>
                                        <td>{{payroll_list.company }}</td>
                                        <td>{{payroll_list.basic }}</td>
                                        <td>{{payroll_list.hra }}</td>
                                        <td>{{payroll_list.ca }}</td>
                                        <td>{{payroll_list.sa }}</td>
                                        <td>{{payroll_list.pt }}</td>
                                        <td>{{payroll_list.employer_pf }}</td>
                                        <td>{{payroll_list.employer_esic }}</td>
                                        <td>{{payroll_list.employee_pf }}</td>
                                        <td>{{payroll_list.employee_esic }}</td>
                                        
                                        <td>
                                            <div class="d-flex justify-content-center">
                                                <button type="button"
                                                    class="btn custom-button btn-sm me-2 edit-payroll_list"
                                                    data-payroll_list-id="{{ payroll_list.id }}" data-bs-toggle="modal"
                                                    data-bs-target="#Editpayroll_listModal">
                                                    <i class="bi bi-pencil-square"></i>
                                                </button>
                                                <button class="btn btn-sm btn-danger me-2 delete-payroll_list"
                                                    data-payroll_list-id="{{ payroll_list.id }}">
                                                    <i class="bi bi-trash"></i>
                                                </button>
                                            </div>
                                        </td>
                                    </tr>
                                    {% endfor %}
                                </tbody>
                            </table>
                        </div>
                    </div>

                </div>
            </div>
        </div>
        <!--Company Payroll add Modal -->
        <div class="modal fade" id="AddPayrollModal" tabindex="-1" aria-labelledby="AddPayrollModalLabel"
            aria-hidden="true">
            <div class="modal-dialog">
                <div class="modal-content">
                    <form id="addpayroll_listForm" action="{% url 'hr:add_payroll_list_details' %}" method="post"
                        enctype="multipart/form-data">
                        {% csrf_token %}
                        <div class="modal-header">
                            <h1 class="modal-title fs-5 primary-color" id="Addpayroll_listModalLabel">Add Payroll
                            </h1>
                            <button type="button" class="btn-close  btn-close-white" data-bs-dismiss="modal"
                                aria-label="Close"></button>
                        </div>
                        <div class="modal-body model-add">
                            <div class="d-flex flex-wrap w-100">
                                <div class="col-12 col-md-12">
                                    <div class="mb-2">
                                        <label for="AddPayrollCompany" class="form-label">Select Company</label>
                                        <select class="form-select form-select-sm" aria-label="Select payroll_master"
                                            name="company" id="AddPayrollCompany">
                                            {% for company in company %}
                                            <option value="{{ company.id }}">{{ company.name }}</option>
                                            {% endfor %}
                                        </select>

                                    </div>
                                </div>
                                <div class="col-12 col-md-12">
                                    <div class="mb-2">
                                        <label for="Addpayrollbasic" class="form-label">Basic
                                            </label>
                                        <input type="tel" class="form-control form-control-sm" id="Addpayrollbasic"
                                            name="basic" minlength="0" maxlength="2" pattern="[0-9]{2}" title="Enter Digits only" required>
                                    </div>
                                </div>
                                <div class="col-12 col-md-12">
                                    <div class="mb-2">
                                        <label for="Addpayrollhra" class="form-label">HRA
                                        </label>
                                        <input type="tel" class="form-control form-control-sm" id="Addpayrollhra"
                                            name="hra" minlength="0" maxlength="2" pattern="[0-9]{2}" title="Enter Digits only" required>
                                    </div>
                                </div>
                                <div class="col-12 col-md-12">
                                    <div class="mb-2">
                                        <label for="Addpayrollca" class="form-label">CA</label>
                                        <input type="tel" class="form-control form-control-sm" id="Addpayrollca"
                                            name="ca" pattern="[0-9]{3}" title="Enter Digits only"  required>
                                    </div>
                                </div>
                                <div class="col-12 col-md-12">
                                    <div class="mb-2">
                                        <label for="Addpayrollsa" class="form-label">SA
                                        </label>
                                        <input type="tel" class="form-control form-control-sm" id="Addpayrollsa"
                                            name="sa" pattern="[0-9]{3}" title="Enter Digits only" required>
                                    </div>
                                </div>
                                <div class="col-12 col-md-12">
                                    <div class="mb-2">
                                        <label for="AAddpayrollpt" class="form-label">PT</label>
                                        <input type="tel" class="form-control form-control-sm" id="AAddpayrollpt"
                                            name="pt" minlength="0" pattern="[0-9]{3}" title="Enter Digits only" maxlength="3" required>
                                    </div>
                                </div>
                                <div class="col-12 col-md-12">
                                    <div class="mb-2">
                                        <label for="Addpayrollemployer_pf" class="form-label">Employer PF</label>
                                        <input type="tel" class="form-control form-control-sm" id="Addpayrollemployer_pf"
                                            name="employer_pf" minlength="0" maxlength="5" pattern="[0-9]{5}" title="Enter Digits only" required>
                                    </div>
                                </div>
                                <div class="col-12 col-md-12">
                                    <div class="mb-2">
                                        <label for="Addpayrollemployer_esic" class="form-label">Employer Esic</label>
                                        <input type="tel" class="form-control form-control-sm" id="Addpayrollemployer_esic"
                                            name="employer_esic" minlength="0" maxlength="5" pattern="[0-9]{5}" title="Enter Digits only" required>
                                    </div>
                                </div>
                                <div class="col-12 col-md-12">
                                    <div class="mb-2">
                                        <label for="Addpayrollemployee_pf" class="form-label">Employee PF</label>
                                        <input type="tel" class="form-control form-control-sm" id="Addpayrollemployee_pf"
                                            name="employee_pf" minlength="0" maxlength="5" pattern="[0-9]{5}" title="Enter Digits only" required>
                                    </div>
                                </div>
                                <div class="col-12 col-md-12">
                                    <div class="mb-2">
                                        <label for="Addpayrollemployee_esic" class="form-label">Employee Esic</label>
                                        <input type="tel" class="form-control form-control-sm" id="Addpayrollemployee_esic"
                                            name="employee_esic" minlength="0" maxlength="5" pattern="[0-9]{5}" title="Enter Digits only" required>
                                    </div>
                                </div>            
                            </div>
                        </div>
                        <div class="modal-footer">
                            <button type="button" class="btn btn-secondary btn-sm"
                                data-bs-dismiss="modal">Close</button>
                            <button type="submit" class="btn custom-button btn-sm add-payroll-btn">Add</button>
                        </div>
                    </form>
                </div>
            </div>
        </div>
        <!-- Company Payroll edit Modal -->
        <div class="modal fade" id="Editpayroll_listModal" tabindex="-1" aria-labelledby="Editpayroll_listModalLabel"
            aria-hidden="true">
            <div class="modal-dialog">
                <div class="modal-content">
                    <form id="updatepayroll_listForm" method="post" action="">
                        {% csrf_token %}
                        <input type="hidden" id="editpayroll_listId" name="id">
                        <div class="modal-header">
                            <h1 class="modal-title fs-5" id="Editpayroll_listModalLabel">Edit Payroll List</h1>
                            <button type="button" class="btn-close  btn-close-white" data-bs-dismiss="modal"
                                aria-label="Close"></button>
                        </div>
                        <div class="modal-body">
                            <div class="d-flex flex-wrap w-100">
                                <div class="col-12 col-md-12">
                                    <div class="mb-2">
                                        <label for="Editpayroll_listpayroll_master" class="form-label">Company
                                        </label>
                                        <select class="form-select form-select-sm" id="Editpayroll_listpayroll_master"
                                            name="company">
                                            {% for company in company %}
                                            <option value="{{ company.id }}">{{ company.name }}</option>
                                            {% endfor %}
                                        </select>
                                    </div>
                                    <div class="mb-2">
                                        <label for="Editpayroll_listpayroll_basic" class="form-label">Baic</label>
                                        <input type="tel" class="form-control form-control-sm"
                                            id="Editpayroll_listpayroll_basic" minlength="0" maxlength="2" pattern="[0-9]{2}" title="Enter Digits only"  name="basic" required>
                                    </div>
                                    <div class="mb-2">
                                        <label for="Editpayroll_hra" class="form-label">HRA</label>
                                        <input type="tel" class="form-control form-control-sm" id="Editpayroll_hra"
                                            name="hra" minlength="0" maxlength="2" pattern="[0-9]{2}" title="Enter Digits only" required>
                                    </div>
                                    <div class="mb-2">
                                        <label for="Editpayroll_ca" class="form-label">CA</label>
                                        <input type="tel" class="form-control form-control-sm" id="Editpayroll_ca"
                                            name="ca" pattern="[0-9]{2}" title="Enter Digits only" required>
                                    </div>
                                    <div class="mb-2">
                                        <label for="Editpayroll_sa" class="form-label">SA</label>
                                        <input type="tel" class="form-control form-control-sm" id="Editpayroll_sa"
                                            name="sa" pattern="[0-9]{2}" title="Enter Digits only" required>
                                    </div>

                                    <div class="mb-2">
                                        <label for="Editpayroll_pt" class="form-label">PT</label>
                                        <input type="tel" class="form-control form-control-sm" id="Editpayroll_pt"
                                            name="pt" minlength="0" maxlength="3" pattern="[0-9]{3}" title="Enter Digits only" required>
                                    </div>
                                    <div class="mb-2">
                                        <label for="Editpayroll_employer_pf" class="form-label">Employer PF</label>
                                        <input type="tel" class="form-control form-control-sm" id="Editpayroll_employer_pf"
                                            name="employer_pf" minlength="0" maxlength="4" pattern="[0-9]{4}" title="Enter Digits only" required>
                                    </div>
                                    <div class="mb-2">
                                        <label for="Editpayroll_employer_esic" class="form-label">Employer Esic</label>
                                        <input type="tel" class="form-control form-control-sm" id="Editpayroll_employer_esic"
                                            name="employer_esic" minlength="0" maxlength="5" pattern="[0-9]" title="Enter Digits only" required>
                                    </div>
                                    <div class="mb-2">
                                        <label for="Editpayroll_employee_pf" class="form-label">Employee PF</label>
                                        <input type="tel" class="form-control form-control-sm" id="Editpayroll_employee_pf"
                                            name="employee_pf" minlength="0" maxlength="4" pattern="[0-9]{4}" title="Enter Digits only" required>
                                    </div>
                                    <div class="mb-2">
                                        <label for="Editpayroll_employee_esic" class="form-label">Employee Esic</label>
                                        <input type="tel" class="form-control form-control-sm" id="Editpayroll_employee_esic"
                                            name="employee_esic" minlength="0" maxlength="5" pattern="[0-9]" title="Enter Digits only" required>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="modal-footer">
                            <button type="button" class="btn btn-secondary btn-sm"
                                data-bs-dismiss="modal">Close</button>
                            <button type="submit" class="btn custom-button btn-sm save-payroll-list-changes-btn"
                                id="save_payroll_list_changes_btn">Save changes</button>
                        </div>
                    </form>
                </div>
            </div>
        </div>

        <!-- Policy View -->
        <div class="tab-pane fade" id="nav-Policy" role="tabpanel" aria-labelledby="nav-Policy-tab" tabindex="0">
            <div class="card">
                <div class="card-header d-flex justify-content-between border-0">
                    <div class="text-center d-flex align-items-center">
                        <h6 class="mb-0 pageTitle"><strong>Policy List</strong></h6>
                    </div>
                    <div class="d-flex justify-content-end mb-0">
                        <button type="button" class="btn custom-button btn-sm" data-bs-toggle="modal"
                            data-bs-target="#AddPolicyModal">
                            <i class="bi bi-plus-lg"></i> Add Policy List
                        </button>
                    </div>
                </div>

                <div class="card-body">
                    <div class="row">
                        
                        <div class="table-responsive overflow-auto">
                            <table class="table-responsive overflow-auto DataTable w-100" id="allpolicyMasterTablelist">
                                <thead>
                                    <tr>
                                        <th scope="col" class="text-nowrap fw-medium">Company Master</th>
                                        <th scope="col" class="text-nowrap fw-medium">Name</th>
                                        <th scope="col" class="text-nowrap fw-medium">created_on</th>
                                        <th scope="col" class="text-nowrap fw-medium">remarks</th>
                                        <th scope="col" class="text-nowrap fw-medium">file</th>
                                        <th scope="col" class="text-nowrap fw-medium">status</th>
                                        <th scope="col" class="text-nowrap fw-medium text-center">
                                            <p class="text-center mb-0">Action</p>
                                        </th>
                                    </tr>
                                </thead>
                                <tbody>
                                    {% for policy_list in policiesmaster_all %}
                                    <tr>
                                        <td>{{ policy_list.company }}</td>
                                        <td>{{ policy_list.name}}</td>
                                        <td>{{ policy_list.created_on }}</td>
                                        <td>{{ policy_list.remarks }}</td>
                                        <td>
                                            {% if policy_list.file %}
                                            <a href="{{ policy_list.file.url }}" target="_blank"
                                                class="btn btn-sm custom-button"><i class="bi bi-eye btn-sm"></i></a>
                                            {% else %}
                                            No file available
                                            {% endif %}
                                        </td>
                                        <td>{{ policy_list.status }}</td>
                                        <td>
                                            <div class="d-flex justify-content-center">
                                                <button type="button"
                                                    class="btn custom-button btn-sm me-2 edit-policy_list"
                                                    data-policy_list-id="{{ policy_list.id }}" data-bs-toggle="modal"
                                                    data-bs-target="#Editpolicy_listModal">
                                                    <i class="bi bi-pencil-square"></i>
                                                </button>
                                                <button class="btn btn-sm btn-danger me-2 delete-policy_list"
                                                    data-policy_list-id="{{ policy_list.id }}">
                                                    <i class="bi bi-trash"></i>
                                                </button>
                                            </div>
                                        </td>
                                    </tr>
                                    {% endfor %}
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <!--Company Policy add Modal -->
        <div class="modal fade" id="AddPolicyModal" tabindex="-1" aria-labelledby="AddPolicyModalLabel"
            aria-hidden="true">
            <div class="modal-dialog">
                <div class="modal-content">
                    <form id="addpolicy_listForm" action="{% url 'hr:add_policy_list_details' %}" method="post"
                        enctype="multipart/form-data">
                        {% csrf_token %}
                        <div class="modal-header">
                            <h1 class="modal-title fs-5 primary-color" id="Addpolicy_listModalLabel">Add policy
                            </h1>
                            <button type="button" class="btn-close  btn-close-white" data-bs-dismiss="modal"
                                aria-label="Close"></button>
                        </div>
                        <div class="modal-body model-add">
                            <div class="d-flex flex-wrap w-100">
                                <div class="col-12 col-md-12">
                                    <div class="mb-2">
                                        <label for="Addpolicy_Company" class="form-label">Select Company</label>
                                        <select class="form-select form-select-sm" aria-label="Select policy_master"
                                            name="company" id="Addpolicy_Company">
                                            {% for company in company %}
                                            <option value="{{ company.id }}">{{ company.name }}</option>
                                            {% endfor %}
                                        </select>

                                    </div>
                                </div>
                                <div class="col-12 col-md-12">
                                    <div class="mb-2">
                                        <label for="Addpolicy_name" class="form-label">Policy
                                            Name</label>
                                        <input type="text" class="form-control form-control-sm" id="Addpolicy_name"
                                            name="name" required>
                                    </div>
                                </div>
                                <div class="col-12 col-md-12">
                                    <div class="mb-2">
                                        <label for="Addpolicy_created_on" class="form-label">created_on
                                        </label>
                                        <input type="date" class="form-control form-control-sm"
                                            id="Addpolicy_created_on" name="created_on" required>
                                    </div>
                                </div>

                                <div class="col-12 col-md-12">
                                    <div class="mb-2">
                                        <label for="Addpolicy_remarks" class="form-label">Remarks</label>
                                        <input type="text" class="form-control form-control-sm" id="Addpolicy_remarks"
                                            name="remarks" required>
                                    </div>
                                </div>
                                <div class="col-12 col-md-12">
                                    <div class="mb-2">
                                        <label for="Addpolicy_file" class="form-label">file
                                        </label>
                                        <input type="file" class="form-control form-control-sm" id="Addpolicy_file"
                                            name="file" required>
                                    </div>
                                </div>

                                <div class="col-12 col-md-12">
                                    <div class="mb-2">
                                        <label for="Addpolicy_status" class="form-label">Status:</label>

                                        <select class="form-control form-control-sm " name="status"
                                            id="Addpolicy_status">
                                            <option value="Active"
                                                {% if company_data.status == 'Active' %}selected{%endif%}>Active
                                            </option>
                                            <option value="Deactive"
                                                {% if company_data.status == 'Deactive' %}selected{% endif %}>
                                                Deactive</option>
                                        </select>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="modal-footer">
                            <button type="button" class="btn btn-secondary btn-sm"
                                data-bs-dismiss="modal">Close</button>
                            <button type="submit" class="btn custom-button btn-sm addpolicylistbtn">Add</button>
                        </div>
                    </form>
                </div>
            </div>
        </div>
        <!-- Company Policy edit Modal -->
        <div class="modal fade" id="Editpolicy_listModal" tabindex="-1" aria-labelledby="Editpolicy_listModalLabel"
            aria-hidden="true">
            <div class="modal-dialog">
                <div class="modal-content">
                    <form id="updatepolicy_listForm" method="post" action="">
                        {% csrf_token %}
                        <input type="hidden" id="editpolicy_listId" name="id">
                        <div class="modal-header">
                            <h1 class="modal-title fs-5" id="Editpolicy_listModalLabel">Edit Policy List</h1>
                            <button type="button" class="btn-close  btn-close-white" data-bs-dismiss="modal"
                                aria-label="Close"></button>
                        </div>
                        <div class="modal-body">
                            <div class="d-flex flex-wrap w-100">
                                <div class="col-12 col-md-12">
                                    <div class="mb-2">
                                        <label for="Editpolicy_listpolicy_master" class="form-label">Company
                                        </label>
                                        <select class="form-select form-select-sm" id="Editpolicy_listpolicy_master"
                                            name="company">
                                            {% for company in company %}
                                            <option value="{{ company.id }}">{{ company.name }}</option>
                                            {% endfor %}
                                        </select>
                                    </div>
                                    <div class="mb-2">
                                        <label for="Editpolicy_listpolicy_name" class="form-label">policy name</label>
                                        <input type="text" class="form-control form-control-sm"
                                            id="Editpolicy_listpolicy_name" name="name" required>
                                    </div>
                                    <div class="mb-2">
                                        <label for="Editpolicy_created_on" class="form-label">created_on</label>
                                        <input type="date" class="form-control form-control-sm"
                                            id="Editpolicy_created_on" name="created_on" required>
                                    </div>
                                    <div class="mb-2">
                                        <label for="Editpolicy_remarks" class="form-label">remarks</label>
                                        <input type="text" class="form-control form-control-sm" id="Editpolicy_remarks"
                                            name="remarks" required>
                                    </div>
                                    <div class="mb-2">
                                        <label for="Editpolicy_file" class="form-label">file</label>
                                        <input type="file" class="form-control form-control-sm" id="Editpolicy_file"
                                            name="file" required>
                                    </div>
                                    <div class="mb-2">
                                        <label for="Editpolicy_status" class="form-label">Status:</label>
                                        <select class="form-control form-control-sm " name="status"
                                            id="Editpolicy_status">
                                            <option value="Active"
                                                {% if company_data.status == 'Active' %}selected{%endif%}>Active
                                            </option>
                                            <option value="Deactive"
                                                {% if company_data.status == 'Deactive' %}selected{% endif %}>
                                                Deactive</option>
                                        </select>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="modal-footer">
                            <button type="button" class="btn btn-secondary btn-sm"
                                data-bs-dismiss="modal">Close</button>
                            <button type="submit" class="btn custom-button btn-sm save-policylist-btn"
                                id="save_policy_list_changes_btn">Save changes</button>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock maincontent %}
{% block extrascript %}
<script>
    $(document).ready(function () {
        $('#editCompanyInfoBtn').click(function (event) {
            // Prevent the default behavior of the button
            event.preventDefault();
            // Toggle the disabled attribute of input fields within #nav-Overview
            $('#nav-Overview input').prop('disabled', function (i, v) {
                return !v;
            });
            // Toggle the disabled attribute of select fields within #nav-Overview
            $('#nav-Overview select').prop('disabled', function (i, v) {
                return !v;
            });
            // Enable the Save Changes button
            $('#saveCompanyInfoBtn').prop('disabled', function (i, v) {
                return !v;
            });
        });
        // After form submission
        $('#companyInfoForm').submit(function (event) {
            // Prevent the default form submission
            event.preventDefault();
            // Get the CSRF token
            const csrftoken = document.querySelector('[name=csrfmiddlewaretoken]').value;
            // Create FormData object to send the form data including files
            const formData = new FormData(this);
            // Perform an AJAX request to submit the form data
            $.ajax({
                url: $(this).attr('action'), // Get the form action URL
                method: $(this).attr('method'), // Get the form method (POST)
                headers: {
                    'X-CSRFToken': csrftoken
                },
                data: formData, // Use FormData to send the form data including files
                processData: false, // Prevent jQuery from automatically processing the data
                contentType: false, // Prevent jQuery from automatically setting Content-Type
                enctype: 'multipart/form-data', // Set the enctype to multipart/form-data
                success: function (response) {
                    // Display a success message
                    alert('Company updated successfully.');
                    // Re-disable the input fields after successful submission
                    $('#nav-Overview input').prop('disabled', true);
                    $('#nav-Overview select').prop('disabled', true);
                    $('#saveCompanyInfoBtn').prop('disabled', true);
                   
                },
                error: function (xhr, status, error) {
                    // Handle errors if any
                    alert('Error: ' + error);
                }
            });
        });



    });
    const colorsData = {
        1: 'green',
        2: 'red',
        3: 'yellow',
    };
    var weeksData = [{
            week: 1,
            days: [{
                day: 0,
                value: 2
            }, {
                day: 1,
                value: 1
            }, {
                day: 2,
                value: 1
            }, {
                day: 3,
                value: 1
            }, {
                day: 4,
                value: 1
            }, {
                day: 5,
                value: 1
            }, {
                day: 6,
                value: 2
            }]
        },
        {
            week: 2,
            days: [{
                day: 0,
                value: 2
            }, {
                day: 1,
                value: 1
            }, {
                day: 2,
                value: 1
            }, {
                day: 3,
                value: 1
            }, {
                day: 4,
                value: 1
            }, {
                day: 5,
                value: 1
            }, {
                day: 6,
                value: 2
            }]
        },
        {
            week: 3,
            days: [{
                day: 0,
                value: 2
            }, {
                day: 1,
                value: 1
            }, {
                day: 2,
                value: 1
            }, {
                day: 3,
                value: 1
            }, {
                day: 4,
                value: 1
            }, {
                day: 5,
                value: 1
            }, {
                day: 6,
                value: 2
            }]
        },
        {
            week: 4,
            days: [{
                day: 0,
                value: 2
            }, {
                day: 1,
                value: 1
            }, {
                day: 2,
                value: 1
            }, {
                day: 3,
                value: 1
            }, {
                day: 4,
                value: 1
            }, {
                day: 5,
                value: 1
            }, {
                day: 6,
                value: 2
            }]
        },
        {
            week: 5,
            days: [{
                day: 0,
                value: 1
            }, {
                day: 1,
                value: 1
            }, {
                day: 2,
                value: 1
            }, {
                day: 3,
                value: 1
            }, {
                day: 4,
                value: 1
            }, {
                day: 5,
                value: 1
            }, {
                day: 6,
                value: 1
            }]
        },
    ];
    // Function to generate tables for weekoff
    function generateTables(weeksData) {
        const tableBody = $('#weekTableBody');
        tableBody.empty();
        weeksData.forEach(weekData => {
            const row = $('<tr>');
            weekData.days.forEach(dayData => {
                const cell = $('<td>');
                cell.addClass(`day ${colorsData[dayData.value]}`);
                cell.data('state', dayData.value);
                cell.data('savedState', dayData.value);
                const div = $('<div>').addClass('day-switch');
                cell.append(div);
                cell.on('click', function () {
                    changeState($(this));
                });
                row.append(cell);
            });
            tableBody.append(row);
        });
    }
    // Function to generate tables for weekoff edit
    function generateEditTables(weeksData) {
        const tableBody = $('#weekTableBody2');
        tableBody.empty();
        weeksData.forEach(weekData => {
            const row = $('<tr>');
            weekData.days.forEach(dayData => {
                const cell = $('<td>');
                cell.addClass(`day ${colorsData[dayData.value]}`);
                cell.data('state', dayData.value);
                cell.data('savedState', dayData.value);
                const div = $('<div>').addClass('day-switch');
                cell.append(div);
                cell.on('click', function () {
                    changeState($(this));
                });
                row.append(cell);
            });
            tableBody.append(row);
        });
    }

    function changeState(cell) {
        const currentState = parseInt(cell.data('state'));
        const newState = currentState === 3 ? 1 : currentState + 1;
        cell.data('state', newState);
        cell.removeClass().addClass(`day ${colorsData[newState]}`);
        const rowIndex = cell.closest('tr').index();
        const cellIndex = cell.index();
        weeksData[rowIndex].days[cellIndex].value = newState;
    }
    $(document).ready(function () {
        // DataTable initialization
        $('#allbankMasterTablelist, #allbranchMasterTablelist, #allpayrollMasterTablelist,#allDepartmentMasterTablelist, #allDesignationMasterTablelist, #allholidaymasterMasterTablelist, #allholiday_listMasterTablelist, #allWeekoffMasterTablelist, #allAnnouncementMasterTablelist , #allpolicyMasterTablelist')
            .DataTable({
                responsive: true,
                searching: true,
                paging: true,
                fixedHeader: true
            });
        
        // AJAX for adding a new Payroll list
        $('#addpayroll_listForm').on('submit', function (event) {
            event.preventDefault();
            var company = $('#AddPayrollCompany').val(); // Get the selected company ID
            var basic = $('#Addpayrollbasic').val();
            var hra = $('#Addpayrollhra').val();
            var ca = $('#Addpayrollca').val();
            var sa = $('#Addpayrollsa').val();
            var pt = $('#AAddpayrollpt').val();
            var employer_pf = $('#Addpayrollemployer_pf').val();
            var employer_esic = $('#Addpayrollemployer_esic').val();
            var employee_pf = $('#Addpayrollemployee_pf').val();
            var employee_esic = $('#Addpayrollemployee_esic').val();
           
            $.ajax({
                url: "{% url 'hr:add_payroll_list_details' %}",
                type: "POST",
                data: {
                    'company': company,
                    'basic':basic,
                    'hra':hra,
                    'ca':ca,
                    'sa':sa,
                    'pt':pt,
                    'employer_pf':employer_pf,
                    'employer_esic':employer_esic,
                    'employee_pf':employee_pf,
                    'employee_esic':employee_esic,
                    'csrfmiddlewaretoken': '{{ csrf_token }}'
                },
                success: function (data) {
                    $("#AddPayrollModal .modal-body").html(
                        '<div class="alert alert-success">Payroll Add successfully!</div>'
                        );
                        $("#AddPayrollModal .modal-footer .add-payroll-btn").hide();
                        setTimeout(function(){
                            $("#AddPayrollModal").modal('hide');
                            location.reload();
                        }, 2000);
                },
                error: function (xhr, status, error) {
                    var errorMessage = xhr.responseJSON.error;
                    $("#AddPayrollModal .modal-body").html(
                        '<div class="alert alert-danger">' + errorMessage + '</div>');
                }
            });
        });
        // AJAX for editing a Branch list
        $('.edit-payroll_list').on('click', function () {
            var payroll_list_id = $(this).data('payroll_list-id');
            $.ajax({
                url: '/hr/get_payroll_list_details/' + payroll_list_id + '/',
                type: 'GET',
                success: function (data) {
                    $('#editpayroll_listId').val(data.id);
                    $('#Editpayroll_listpayroll_master').val(data.company_id);
                    $('#Editpayroll_listpayroll_basic').val(data.basic);
                    $('#Editpayroll_hra').val(data.hra);
                    $('#Editpayroll_ca').val(data.ca);
                    $('#Editpayroll_sa').val(data.sa);
                    $('#Editpayroll_pt').val(data.pt);
                    $('#Editpayroll_employer_pf').val(data.employer_pf);
                    $('#Editpayroll_employer_esic').val(data.employer_esic);
                    $('#Editpayroll_employee_pf').val(data.employee_pf);
                    $('#Editpayroll_employee_esic').val(data.employee_esic);
                    $('#Editpayroll_listModal').modal('show');
                },
                error: function () {
                    alert('Failed to fetch Payroll list details.');
                }
            });
        });
        // AJAX for updating a Branch
        $('#updatepayroll_listForm').on('submit', function (event) {
            event.preventDefault();
            var formData = new FormData($(this)[0]);
            var payroll_list_id = $('#editpayroll_listId').val();
            $.ajax({
                type: "POST",
                url: "{% url 'hr:update_payroll_list_details' 0 %}".replace('0', payroll_list_id),
                data: formData,
                processData: false,
                contentType: false,
                success: function (data) {
                    $("#Editpayroll_listModal .modal-body").html(
                        '<div class="alert alert-success">Payroll list updated successfully!</div>'
                        );
                        $("#Editpayroll_listModal .modal-footer .save-payroll-list-changes-btn").hide();
                        
                        $("#Editinterviewround_listModal").modal('hide');
                        location.reload();
                            
                    // {% comment %} window.location.href = '/hr/branch_list_master/'; {% endcomment %}
                },
                error: function (xhr, status, error) {
                    $("#Editpayroll_listModal .modal-body").html(
                        '<div class="alert alert-danger">' + xhr.responseJSON.error +
                        '</div>');
                }
            });
        });

        // Delete Branch 

        $(document).ready(function () {
            // AJAX for deleting a Branch list
            $('.delete-payroll_list').on('click', function () {
                var payroll_list_id = $(this).data('payroll_list-id');
                if (confirm('Are you sure you want to delete this payroll?')) {
                    $.ajax({
                        url: '/hr/delete_payroll_list/' + payroll_list_id + '/',
                        type: 'POST',
                        data: {
                            'csrfmiddlewaretoken': '{{ csrf_token }}'
                        },
                        success: function (data) {
                            $("#AddPayrollModal .modal-body").html(
                                '<div class="alert alert-success">Payroll uploaded successfully!</div>'
                                );
                            alert('Payroll deleted successfully');
                            location
                        .reload(); // Reload the page to update the payroll list
                        },
                        error: function (xhr, status, error) {
                            alert('Failed to delete payroll: ' + xhr.responseJSON
                                .error);
                        }
                    });
                }
            });
        });    
            
            

        // AJAX for adding a new Branch list
        $('#addbranch_listForm').on('submit', function (event) {
            event.preventDefault();
            var company = $('#AddBranchCompany').val(); // Get the selected company ID
            var name = $('#Addbranchname').val();
            var address = $('#Addbranchaddress').val();
            var state = $('#Addbranchstate').val();
            var city = $('#Addbranchcity').val();
            var country = $('#AAddbranchcountry').val();
            var pin_code = $('#Addbranchpin_code').val();
            var email = $('#Addbranchemail').val();
            var contact_no = $('#Addbranchcontact_no').val();
            var start_date = $('#Addbranchstart_date').val();
            var status = $('#Addbranchstatus').val();
            $.ajax({
                url: "{% url 'hr:add_branch_list_details' %}",
                type: "POST",
                data: {
                    'company': company,
                    'name': name,
                    'address': address,
                    'state': state,
                    'city': city,
                    'country': country,
                    'pin_code': pin_code,
                    'email': email,
                    'contact_no': contact_no,
                    'start_date': start_date,
                    'status': status,
                    'csrfmiddlewaretoken': '{{ csrf_token }}'
                },
                success: function (data) {
                    $("#AddBranchModal .modal-body").html(
                        '<div class="alert aler t-success">Add New Branch successfully!</div>'
                        );
                },
                error: function (xhr, status, error) {
                    var errorMessage = xhr.responseJSON.error;
                    $("#AddBranchModal .modal-body").html(
                        '<div class="alert alert-danger">' + errorMessage + '</div>');
                }
            });
        });
        // AJAX for editing a Branch list
        $('.edit-branch_list').on('click', function () {
            var branch_list_id = $(this).data('branch_list-id');
            $.ajax({
                url: '/hr/get_branch_list_details/' + branch_list_id + '/',
                type: 'GET',
                success: function (data) {
                    $('#editbranch_listId').val(data.id);
                    $('#Editbranch_listbranch_master').val(data.company_id);
                    $('#Editbranch_listbranch_name').val(data.name);
                    $('#Editbranch_address').val(data.address);
                    $('#Editbranch_state').val(data.state);
                    $('#Editbranch_city').val(data.city);
                    $('#Editbranch_country').val(data.country);
                    $('#Editbranch_pin_code').val(data.pin_code);
                    $('#Editbranch_email').val(data.email);
                    $('#Editbranch_contact_no').val(data.contact_no);
                    $('#Editbranch_start_date').val(data.start_date);
                    $('#Editbranch_end_date').val(data.end_date);
                    $('#Editbranch_status').val(data.status);
                    $('#Editbranch_listModal').modal('show');
                },
                error: function () {
                    alert('Failed to fetch Branch list details.');
                }
            });
        });
        // AJAX for updating a Branch
        $('#updatebranch_listForm').on('submit', function (event) {
            event.preventDefault();
            var formData = new FormData($(this)[0]);
            var branch_list_id = $('#editbranch_listId').val();
            $.ajax({
                type: "POST",
                url: "{% url 'hr:update_branch_list_details' 0 %}".replace('0', branch_list_id),
                data: formData,
                processData: false,
                contentType: false,
                success: function (data) {
                    
                    $("#Editbranch_listModal .modal-body").html(
                        '<div class="alert alert-success">Branch list updated successfully!</div>'
                        );
                        $("#Editbranch_listModal .modal-footer .editBranchBtn").hide();
                        
                        setTimeout(function(){
                            $("##Editbranch_listModal").modal('hide');
                            location.reload();
                        }, 2000);

                    // {% comment %} window.location.href = '/hr/branch_list_master/'; {% endcomment %}
                },
                error: function (xhr, status, error) {
                    $("#Editbranch_listModal .modal-body").html(
                        '<div class="alert alert-danger">' + xhr.responseJSON.error +
                        '</div>');
                }
            });
        });
        // Delete Branch 
        $(document).ready(function () {
            // AJAX for deleting a Branch list
            $('.delete-branch_list').on('click', function () {
                var branch_list_id = $(this).data('branch_list-id');
                if (confirm('Are you sure you want to delete this branch?')) {
                    $.ajax({
                        url: '/hr/delete_branch_list/' + branch_list_id + '/',
                        type: 'POST',
                        data: {
                            'csrfmiddlewaretoken': '{{ csrf_token }}'
                        },
                        success: function (data) {
                            $("#AddDesignationModal .modal-body").html(
                                '<div class="alert alert-success">Designation uploaded successfully!</div>'
                                );
                            alert('Branch deleted successfully');
                            location
                        .reload(); // Reload the page to update the branch list
                        },
                        error: function (xhr, status, error) {
                            alert('Failed to delete branch: ' + xhr.responseJSON
                                .error);
                        }
                    });
                }
            });
        });

     /* // AJAX for adding a new Bank list
        $('#addbank_listForm').on('submit', function (event) {
            event.preventDefault();
            var company = $('#AddBankCompany').val(); // Get the selected company ID
            var bank_name = $('#AddBank_bank_name').val();
            var ifsc_code = $('#AddBank_ifsc_code').val();
            var branch = $('#AddBank_branch').val();
            var account_no = $('#AddBank_account_no').val();
            var remarks = $('#AddBank_remarks').val();
            var status = $('#AddBank_status').val();
            $.ajax({
                url: "{% url 'hr:add_bank_list_details' %}",
                type: "POST",
                data: {
                    'company': company,
                    'bank_name': bank_name,
                    'ifsc_code': ifsc_code,
                    'branch': branch,
                    'account_no': account_no,
                    'remarks': remarks,
                    'status': status,
                    'csrfmiddlewaretoken': '{{ csrf_token }}'
                },
                success: function (data) {
                    $("#AddBankModal .modal-body").html(
                        '<div class="alert alert-success">Bank uploaded successfully!</div>'
                        );
                },
                error: function (xhr, status, error) {
                    var errorMessage = xhr.responseJSON.error;
                    $("#AddBankModal .modal-body").html('<div class="alert alert-danger">' +
                        errorMessage + '</div>');
                }
            });
        });

        // AJAX for editing a Bank list
        $('.edit-bank_list').on('click', function () {
            var bank_list_id = $(this).data('bank_list-id');
            $.ajax({
                url: '/hr/get_bank_list_details/' + bank_list_id + '/',
                type: 'GET',
                success: function (data) {
                    $('#editbank_listId').val(data.id);
                    $('#Editbank_listbank_master').val(data.company_id);
                    $('#Editbank_listbank_name').val(data.bank_name);
                    $('#Editbank_listifsc_code').val(data.ifsc_code);
                    $('#Editbank_listbranch').val(data.branch);
                    $('#Editbank_listaccount_no').val(data.account_no);
                    $('#Editbank_listremarks').val(data.remarks);
                    $('#Editbank_status').val(data.status);
                    $('#Editbank_listModal').modal('show');
                },
                error: function () {
                    alert('Failed to fetch Bank list details.');
                }
            });
        });

        //Delete Bank Details of Company
        $(document).ready(function () {
            // AJAX for deleting a Bank list
            $('.delete-bank_list').on('click', function () {
                var bank_list_id = $(this).data('bank_list-id');
                if (confirm('Are you sure you want to delete this bank?')) {
                    $.ajax({
                        url: '/hr/delete_bank_list/' + bank_list_id + '/',
                        type: 'POST',
                        data: {
                            'csrfmiddlewaretoken': '{{ csrf_token }}'
                        },
                        success: function (data) {
                            alert('Bank deleted successfully');
                            location
                        .reload(); // Reload the page to update the bank list
                        },
                        error: function (xhr, status, error) {
                            alert('Failed to delete bank: ' + xhr.responseJSON
                                .error);
                        }
                    });
                }
            });
        });

        // AJAX for updating a bank list
        $('#updatebank_listForm').on('submit', function (event) {
            event.preventDefault();
            var formData = new FormData($(this)[0]);
            var bank_list_id = $('#editbank_listId').val();
            $.ajax({
                type: "POST",
                url: "{% url 'hr:update_bank_list_details' 0 %}".replace('0', bank_list_id),
                data: formData,
                processData: false,
                contentType: false,
                success: function (data) {
                    $("#Editbank_listModal .modal-body").html(
                        '<div class="alert alert-success">Bank list updated successfully!</div>'
                        );
                        $("#Editbank_listModal .modal-footer #save_bank_list_changes_btn").hide();
                        setTimeout(function(){
                            $("#Editbank_listModal").modal('hide');
                            location.reload();
                        }, 2000);

                        
                    // {% comment %} window.location.href = '/hr/bank_list_master/'; {% endcomment %}
                },
                error: function (xhr, status, error) {
                    $("#Editbank_listModal .modal-body").html(
                        '<div class="alert alert-danger">' + xhr.responseJSON.error +
                        '</div>');
                }
            });
        });
        */

        // AJAX for adding a new department
        $('#adddepartmentmasterForm').on('submit', function (event) {
            event.preventDefault();
            var newdepartment = $('#newdepartment').val();
            if (newdepartment === "") {
                alert("Department name cannot be blank");
                return;
            }
            $.ajax({
                url: "{% url 'hr:add_department_details' %}",
                type: "POST",
                data: {
                    'name': newdepartment,
                    csrfmiddlewaretoken: '{{ csrf_token }}'
                },
                success: function (data) {
                    $("#AddDepartmentModal .modal-body").html(
                        '<div class="alert alert-success">Department uploaded successfully!</div>'
                        );
                        $("#AddDepartmentModal .modal-footer .addDeptBtn").hide();
                        setTimeout(function(){
                            $("#AddDepartmentModal").modal('hide');
                            location.reload();
                        }, 2000);
                },
                error: function (xhr, status, error) {
                    $("#AddDepartmentModal .modal-body").html(
                        '<div class="alert alert-danger">' + xhr.responseJSON.error +
                        '</div>');
                }
            });
        });
        // AJAX for editing a department
        $('.edit-department').on('click', function () {
            var department_id = $(this).data('department-id');
            $.ajax({
                url: "{% url 'hr:get_department_details' 0 %}".replace('0', department_id),
                type: "GET",
                success: function (data) {
                    $('#updateDepartmentId').val(data.id);
                    $('#EditDepartmentName').val(data.name);
                    $('#DepartmenteditModal').modal('show');
                },
                error: function (xhr, status, error) {
                    alert("Error retrieving department data");
                }
            });
        });
        // AJAX for updating a department
        $('#updateDepartmentForm').on('submit', function (event) {
            event.preventDefault();
            var department_id = $('#updateDepartmentId').val();
            var new_department_name = $('#EditDepartmentName').val();
            $.ajax({
                url: "{% url 'hr:update_department_details' 0 %}".replace('0', department_id),
                type: "POST",
                data: {
                    'name': new_department_name,
                    csrfmiddlewaretoken: '{{ csrf_token }}'
                },
                success: function (data) {
                    $("#DepartmenteditModal .modal-body").html(
                        '<div class="alert alert-success">' + data.success + '</div>');

                        $("#DepartmenteditModal .modal-footer .addDeptBtn").hide();

                        setTimeout(function(){
                            $("#DepartmenteditModal").modal('hide');
                            location.reload();
                        }, 2000);
                },
                error: function (xhr, status, error) {
                    if (xhr.responseJSON.error) {
                        $("#DepartmenteditModal .modal-body").html(
                            '<div class="alert alert-danger">' + xhr.responseJSON
                            .error + '</div>');
                    } else {
                        $('#EditDepartmentName').focus();
                    }
                }
            });
        });
 
        // AJAX for deleting a department
        $('.delete-department').on('click', function () {
            var department_id = $(this).data('department-id');
            if (confirm('Are you sure you want to delete this department?')) {
                $.ajax({
                    url: '/hr/delete_department/' + department_id + '/',
                    type: 'POST',
                    data: {
                        'csrfmiddlewaretoken': '{{ csrf_token }}'
                    },
                    success: function (data) {
                        alert('Department deleted successfully');
                        location.reload(); // Reload the page to update the department list
                    },
                    error: function (xhr, status, error) {
                        alert('Failed to delete department: ' + xhr.responseJSON.error);
                    }
                });
            }
        });
        // AJAX for adding a new designation
        $('#addDesignationForm').on('submit', function (event) {
            event.preventDefault();
            var name = $('#AddDesignationName').val();
            if (name === "") {
                alert("Designation name cannot be blank");
                return;
            }
            var department_name = $('#AddDepartmentName').val();
            $.ajax({
                url: "{% url 'hr:add_designation_details' %}",
                type: "POST",
                data: {
                    'department': department_name,
                    'name': name,
                    csrfmiddlewaretoken: '{{ csrf_token }}'
                },
                success: function (data) {
                    $("#AddDesignationModal .modal-body").html(
                        '<div class="alert alert-success">Designation uploaded successfully!</div>'
                        );
                     $("#AddDesignationModal .modal-footer .addDesignationBtn").hide();
                     setTimeout(function(){
                        $("#AddDesignationModal").modal('hide');
                        location.reload();
                    }, 2000);
                },
                error: function (xhr, status, error) {
                    $("#AddDesignationModal .modal-body").html(
                        '<div class="alert alert-danger">' + xhr.responseJSON.error +
                        '</div>');
                }
            });
        });
        // AJAX for editing a designation
        $('.edit-designation').on('click', function () {
            var designation_id = $(this).data('designation-id');
            $.ajax({
                url: "{% url 'hr:get_designation_details' 0 %}".replace('0', designation_id),
                type: 'GET',
                success: function (data) {
                    $('#editDesignationId').val(data.id);
                    $('#EditDesignationDepartment').val(data.department_id);
                    $('#EditDesignationName').val(data.name);
                    $('#EditDesignationModal').modal('show');
                },
                error: function (xhr, status, error) {
                    alert("Error retrieving designation data");
                }
            });
        });
        // AJAX for updating a designation
        $('#updateDesignationForm').on('submit', function (event) {
            event.preventDefault();
            var formData = new FormData($(this)[0]);
            var designation_id = $('#editDesignationId').val();
            $.ajax({
                type: "POST",
                url: "{% url 'hr:update_designation_details' 0 %}".replace('0', designation_id),
                data: formData,
                processData: false,
                contentType: false,
                success: function (data) {
                    $("#EditDesignationModal .modal-body").html(
                        '<div class="alert alert-success">Designation updated successfully!</div>'
                        );
                        $("#EditDesignationModal .modal-footer .savedesignationBtn").hide();
                        setTimeout(function(){
                            $("#EditDesignationModal").modal('hide');
                            location.reload();
                        }, 2000);


                    // {% comment %} window.location.href = '/hr/designation_master/'; {% endcomment %}
                },
                error: function (xhr, status, error) {
                    if (xhr.responseJSON.error) {
                        $("#EditDesignationModal .modal-body").html(
                            '<div class="alert alert-danger">' + xhr.responseJSON
                            .error + '</div>');
                    } else {
                        $('#EditDesignationName').focus();
                    }
                }
            });
        });

        // AJAX for deleting a designation
        $('.delete-designation').on('click', function () {
            var designation_id = $(this).data('designation-id');
            if (confirm('Are you sure you want to delete this designation?')) {
                $.ajax({
                    url: '/hr/delete_designation/' + designation_id + '/',
                    type: 'POST',
                    data: {
                        'csrfmiddlewaretoken': '{{ csrf_token }}'
                    },
                    success: function (data) {
                        alert('Designation deleted successfully');
                        location.reload(); // Reload the page to update the designation list
                    },
                    error: function (xhr, status, error) {
                        alert('Failed to delete designation: ' + xhr.responseJSON.error);
                    }
                });
            }
        });


        // AJAX for adding a new position
        $('#addpositionmasterForm').on('submit', function (event) {
            event.preventDefault();
            var newposition = $('#newposition').val();
            var newremarks = $('#newremarks').val();
            if (newposition === "") {
                alert("Position name cannot be blank");
                return;
            }
            $.ajax({
                url: "{% url 'hr:add_position_details' %}",
                type: "POST",
                data: {
                    'name': newposition,
                    'remarks': newremarks,
                    csrfmiddlewaretoken: '{{ csrf_token }}'
                },
                success: function (data) {
                    $("#AddPositionModal .modal-body").html(
                        '<div class="alert alert-success">Position uploaded successfully!</div>'
                        );
                        $("#AddPositionModal .modal-footer .addpositionBtn").hide();
                        setTimeout(function(){
                            $("#AddPositionModal").modal('hide');
                            location.reload();
                        }, 2000);

                },
                error: function (xhr, status, error) {
                    $("#AddPositionModal .modal-body").html(
                        '<div class="alert alert-danger">' + xhr.responseJSON.error +
                        '</div>');
                        $("#AddPositionModal .modal-footer .addpositionBtn").hide();
                        setTimeout(function(){
                            $("#AddPositionModal").modal('hide');
                            location.reload();
                        }, 2000);
                }
            });
        });
        // AJAX for editing a position
        $('.edit-position').on('click', function () {
            var position_id = $(this).data('position-id');
            $.ajax({
                url: "{% url 'hr:get_position_details' 0 %}".replace('0', position_id),
                type: "GET",
                success: function (data) {
                    $('#updatePositionId').val(data.id);
                    $('#EditPositionName').val(data.name);
                    $('#EditPositionRemarks').val(data.remarks);
                    $('#PositioneditModal').modal('show');
                },
                error: function (xhr, status, error) {
                    alert("Error retrieving position data");
                }
            });
        });
        // AJAX for updating a position
        $('#updatePositionForm').on('submit', function (event) {
            event.preventDefault();
            var position_id = $('#updatePositionId').val();
            var new_position_name = $('#EditPositionName').val();
            var new_position_remarks = $('#EditPositionRemarks').val();
            $.ajax({
                url: "{% url 'hr:update_position_details' 0 %}".replace('0', position_id),
                type: "POST",
                data: {
                    'name': new_position_name,
                    'remarks': new_position_remarks,
                    csrfmiddlewaretoken: '{{ csrf_token }}'
                },
                success: function (data) {
                    $("#PositioneditModal .modal-body").html(
                        '<div class="alert alert-success">' + data.success + '</div>');
                        $("#PositioneditModal .modal-footer .positionSaveBtn").hide();
                        setTimeout(function(){
                            $("#PositioneditModal").modal('hide');
                            location.reload();
                        }, 2000);
                        
                },
                error: function (xhr, status, error) {
                    if (xhr.responseJSON.error) {
                        $("#PositioneditModal .modal-body").html(
                            '<div class="alert alert-danger">' + xhr.responseJSON
                            .error + '</div>');
                    } else {
                        $('#EditPositionName').focus();
                    }
                    $("#PositioneditModal .modal-footer .positionSaveBtn").hide();
                    setTimeout(function(){
                        $("#PositioneditModal").modal('hide');
                        location.reload();
                    }, 2000);
                }
            });
        });
        // AJAX for deleting a position
        // AJAX for deleting a position
        $('.delete-position').on('click', function () {
            var position_id = $(this).data('position-id');
            if (confirm('Are you sure you want to delete this position?')) {
                $.ajax({
                    url: '/hr/delete_position/' + position_id + '/',
                    type: 'POST',
                    data: {
                        'csrfmiddlewaretoken': '{{ csrf_token }}'
                    },
                    success: function (data) {
                        alert('Position deleted successfully');
                        location.reload(); // Reload the page to update the position list
                    },
                    error: function (xhr, status, error) {
                        alert('Failed to delete position: ' + xhr.responseJSON.error);
                    }
                });
            }
        });

      // AJAX for adding a new weekoff
      $('#addweekoffForm').on('submit', function (event) {
        event.preventDefault();
        var formData = new FormData($(this)[0]);
        $.ajax({
            url: "{% url 'hr:add_weekoff_details' %}",
            type: "POST",
            data: {
                'name': $('#AddWeekoffName').val(),
                'remarks': $('#exampleFormControlTextarea1').val(),
                'data': JSON.stringify(weeksData),
                'csrfmiddlewaretoken': '{{ csrf_token }}'
            },
            success: function (data) {
                $("#AddWeekoffModal .modal-body").html(
                    '<div class="alert alert-success">Weekoff created successfully!</div>'
                    );
                    $("#AddWeekoffModal .modal-footer .add-weekoff-button").hide();
                    setTimeout(function(){
                        $("#AddWeekoffModal").modal('hide');
                        location.reload();
                    }, 2000);
                   
            },
            error: function (xhr, status, error) {
                $("#AddWeekoffModal .modal-body").html(
                    '<div class="alert alert-danger">' + xhr.responseJSON.error +
                    '</div>');
                    $("#AddWeekoffModal .modal-footer .add-weekoff-button").hide();
            }
        });
    });
    generateTables(weeksData);
    // AJAX for editing a weekoff
    $('.edit-weekoff').on('click', function () {
        var weekoff_id = $(this).data('department-id');
        $.ajax({
            url: '/hr/get_weekoff_details/' + weekoff_id + '/',
            type: 'GET',
            success: function (data) {
                $('#editWeekoffName').val(data.name); // Populate name field
                $('#editWeekoffRemarks').val(data.remarks); // Populate remarks field
                weeksData = data.data;
                generateEditTables(data.data);
            },
            error: function () {
                alert('Failed to fetch weekoff details.');
            }
        });
        $('#updateweekoffForm').on('submit', function (event) {
            event.preventDefault();
            var formData = new FormData($(this)[0]);
            console.log(formData)
            $.ajax({
                type: "POST",
                url: "/hr/update_weekoff_details/" + weekoff_id + "/",
                data: {
                    'name': $('#editWeekoffName').val(),
                    'remarks': $('#editWeekoffRemarks').val(),
                    'data': JSON.stringify(weeksData),
                    'csrfmiddlewaretoken': '{{ csrf_token }}'
                },
                success: function (data) {
                    $("#WeekoffeditModal .modal-body").html(
                        '<div class="alert alert-success">Weekoff updated successfully!</div>'
                        );
                        $("#WeekoffeditModal .modal-footer .edit-weekoff-btn").hide();
                        setTimeout(function(){
                            $("#WeekoffeditModal").modal('hide');
                            location.reload();
                        }, 2000);
                },
                error: function (xhr, status, error) {
                    $("#WeekoffeditModal .modal-body").html(
                        '<div class="alert alert-danger">' + xhr
                        .responseJSON.error + '</div>');
                        $("#WeekoffeditModal .modal-footer .edit-weekoff-btn").hide();
                }
            });
        });
    });

    // AJAX for deleting a weekoff
    $('.delete-weekoff').on('click', function () {
        var weekoff_id = $(this).data('weekoff-id');
        if (confirm('Are you sure you want to delete this weekoff?')) {
            $.ajax({
                url: '/hr/delete_weekoff/' + weekoff_id + '/',
                type: 'POST',
                data: {
                    'csrfmiddlewaretoken': '{{ csrf_token }}'
                },
                success: function (data) {
                    alert('Weekoff deleted successfully');
                    location.reload(); // Reload the page to update the weekoff list
                },
                error: function (xhr, status, error) {
                    alert('Failed to delete weekoff: ' + xhr.responseJSON.error);
                }
            });
        }
    });

        // AJAX for adding a new holidaymaster
        $('#addholidaymasterForm').on('submit', function (event) {
            event.preventDefault();
            var name = $('#newholidaymaster').val();
            var year = $('#Addannouncement_year').val();
            var remarks = $('#Addannouncement_remarks').val();
            $.ajax({
                url: "{% url 'hr:add_holidaymaster_details' %}",
                type: "POST",
                data: {
                    'name': name,
                    'year': year,
                    'remarks': remarks,
                    csrfmiddlewaretoken: '{{ csrf_token }}'
                },
                success: function (data) {
                    $("#AddholidaymasterModal .modal-body").html(
                        '<div class="alert alert-success">Holiday master uploaded successfully!</div>'
                        );

                        $("#AddholidaymasterModal .modal-footer .add-holiday-btn").hide();

                        setTimeout(function(){
                            $("#AddholidaymasterModal").modal('hide');
                            location.reload();
                        }, 2000);


                },
                error: function (xhr, status, error) {
                    $("#AddholidaymasterModal .modal-body").html(
                        '<div class="alert alert-danger">' + xhr.responseJSON.error +
                        '</div>');
                }
            });
        });
        // AJAX for editing a holidaymaster
        $('.edit-holidaymaster').on('click', function () {
            var holidaymaster_id = $(this).data('holidaymaster-id');
            $.ajax({
                url: '/hr/get_holidaymaster_details/' + holidaymaster_id + '/',
                type: 'GET',
                success: function (data) {
                    $('#EditholidaymasterId').val(data.id);
                    $('#EditholidaymasterName').val(data.name);
                    $('#EditholidaymasterYear').val(data.year);
                    $('#EditholidaymasterRemarks').val(data.remarks);
                    $('#EditholidaymasterModal').modal('show');
                },
                error: function () {
                    alert('Failed to fetch holidaymaster details.');
                }
            });
        });
        // AJAX for updating a holidaymaster
        $('#updateholidaymasterForm').on('submit', function (event) {
            event.preventDefault();

            var holidaymaster_id = $('#EditholidaymasterId').val();
            var new_holiday_name = $('#EditholidaymasterName').val();
            var new_holiday_year = $('#EditholidaymasterYear').val();
            var new_holiday_remarks = $('#EditholidaymasterRemarks').val();
            $.ajax({
                type: "POST",
                url: "{% url 'hr:update_holidaymaster_details' 0 %}".replace('0',
                    holidaymaster_id),
                data: {
                    'name': new_holiday_name,
                    'year': new_holiday_year,
                    'remarks': new_holiday_remarks,
                    csrfmiddlewaretoken: '{{ csrf_token }}'
                },
                success: function (data) {
                    $("#holidaymastereditModal .modal-body").html(
                        '<div class="alert alert-success">Holiday master updated successfully!</div>'
                        );
                        $("#holidaymastereditModal .modal-footer .edit-holiday-save-btn").hide();
                        setTimeout(function(){
                            $("#holidaymastereditModal").modal('hide');
                            location.reload();
                        }, 2000);

                },
                error: function (xhr, status, error) {
                    if (xhr.responseJSON.error) {
                        $("#holidaymastereditModal .modal-body").html(
                            '<div class="alert alert-danger">' + xhr.responseJSON
                            .error + '</div>');
                    } else {
                        $('#EditholidaymasterName').focus();
                    }
                    $("#holidaymastereditModal .modal-footer .edit-holiday-save-btn").hide();
                }
            });
        });

        $(document).ready(function () {
            // Existing AJAX code for adding and editing holidaymaster...

            // AJAX for deleting a holidaymaster
            $('.delete-holidaymaster').on('click', function () {
                var holidaymaster_id = $(this).data('holidaymaster-id');
                if (confirm('Are you sure you want to delete this holiday master?')) {
                    $.ajax({
                        url: '/hr/delete_holidaymaster/' + holidaymaster_id + '/',
                        type: 'POST',
                        data: {
                            'csrfmiddlewaretoken': '{{ csrf_token }}'
                        },
                        success: function (data) {
                            alert('Holiday master deleted successfully');
                            location
                        .reload(); // Reload the page to update the holiday master list
                        },
                        error: function (xhr, status, error) {
                            alert('Failed to delete holiday master: ' + xhr
                                .responseJSON.error);
                        }
                    });
                }
            });
        });

        // AJAX for adding a new holiday list
        $('#addholiday_listForm').on('submit', function (event) {
            event.preventDefault();
            // Get the values from the form fields
            var holiday_master = $('#Addholiday_listMasterName').val();
            var date = $('#Addholiday_listDate').val();
            var festival_name = $('#Addholiday_listfestival_name').val();
            $.ajax({
                url: "{% url 'hr:add_holiday_list_details' %}",
                type: "POST",
                data: {
                    'holiday_master': holiday_master,
                    'date': date,
                    'festival_name': festival_name,
                    'csrfmiddlewaretoken': '{{ csrf_token }}'
                },
                success: function (data) {
                    $("#Addholiday_listModal .modal-body").html(
                        '<div class="alert alert-success">Holiday list master uploaded successfully!</div>'
                        );
                        $("#Addholiday_listModal .modal-footer .save-holiday-list-btn").hide();

                        setTimeout(function(){
                            $("#Addholiday_listModal").modal('hide');
                            location.reload();
                        }, 2000);

                },
                error: function (xhr, status, error) {
                    $("#Addholiday_listModal .modal-body").html(
                        '<div class="alert alert-danger">' + xhr.responseJSON.error +
                        '</div>');
                        $("#Addholiday_listModal .modal-footer .save-holiday-list-btn").hide();
                }
            });
        });
        // AJAX for editing a holiday list
        $('.edit-holiday_list').on('click', function () {
            var holiday_list_id = $(this).data('holiday_list-id');
            $.ajax({
                url: '/hr/get_holiday_list_details/' + holiday_list_id + '/',
                type: 'GET',
                success: function (data) {
                    $('#editholiday_listId').val(data.id);
                    $('#Editholiday_listholiday_master').val(data.holiday_master_id);
                    $('#Editholiday_listfestival_name').val(data.festival_name);
                    $('#Editholiday_listDate').val(data.date);
                    $('#Editholiday_listModal').modal('show');
                },
                error: function () {
                    alert('Failed to fetch holiday list details.');
                }
            });
        });
        // AJAX for updating a holiday list
        $('#updateholiday_listForm').on('submit', function (event) {
            event.preventDefault();
            var formData = new FormData($(this)[0]);
            var holiday_list_id = $('#editholiday_listId').val();
            $.ajax({
                type: "POST",
                url: "/hr/update_holiday_list_details/" + holiday_list_id + "/",
                data: formData,
                processData: false,
                contentType: false,
                success: function (data) {
                    $("#Editholiday_listModal .modal-body").html(
                        '<div class="alert alert-success">Holiday list updated successfully!</div>'
                        );
                        $("#Editholiday_listModal .modal-footer .save-holiday-list-btn").hide();
                        setTimeout(function(){
                            $("#Editholiday_listModal").modal('hide');
                            location.reload();
                        }, 2000);
                },
                error: function (xhr, status, error) {
                    if (xhr.responseJSON.error) {
                        $("#Editholiday_listModal .modal-body").html(
                            '<div class="alert alert-danger">' + xhr.responseJSON
                            .error + '</div>');
                    } else {
                        $('#Editholiday_listfestival_name').focus();
                    }
                    $("#Editholiday_listModal .modal-footer .save-holiday-list-btn").hide();
                }
            });
        });

        // AJAX for deleting a holiday list
        $('.delete-holiday_list').on('click', function () {
            var holiday_list_id = $(this).data('holiday_list-id');
            if (confirm('Are you sure you want to delete this holiday list?')) {
                $.ajax({
                    url: '/hr/delete_holiday_list/' + holiday_list_id + '/',
                    type: 'POST',
                    data: {
                        'csrfmiddlewaretoken': '{{ csrf_token }}'
                    },
                    success: function (data) {
                        alert('Holiday list deleted successfully');
                        location.reload(); // Reload the page to update the holiday list
                    },
                    error: function (xhr, status, error) {
                        alert('Failed to delete holiday list: ' + xhr.responseJSON.error);
                    }
                });
            }
        });
  
        // AJAX for adding a new Announcement list
        $('#addannouncement_listForm').on('submit', function (event) {
            event.preventDefault();
            var company = $('#Addannouncement_Company').val(); // Get the selected company ID
            var name = $('#Addannouncement_name').val();
            var created_on = $('#Addannouncement_created_on').val();
            var message = $('#Addannouncement_message').val();
            var file = $('#Addannouncement_file').val();
            var status = $('#Addannouncement_status').val();
            $.ajax({
                url: "{% url 'hr:add_announcement_list_details' %}",
                type: "POST",
                data: {
                    'company': company,
                    'name': name,
                    'created_on': created_on,
                    'message': message,
                    'file': file,
                    'status': status,
                    'csrfmiddlewaretoken': '{{ csrf_token }}'
                },
                success: function (data) {
                    $("#AddAnnouncementModal .modal-body").html(
                        '<div class="alert alert-success">Announcement uploaded successfully!</div>'
                        );
                        $("#AddAnnouncementModal .modal-footer .announcementAddBtn").hide();
                        setTimeout(function(){
                            $("#AddAnnouncementModal").modal('hide');
                            location.reload();
                        }, 2000);
                },
                error: function (xhr, status, error) {
                    var errorMessage = xhr.responseJSON.error;
                    $("#AddAnnouncementModal .modal-body").html(
                        '<div class="alert alert-danger">' + errorMessage + '</div>');
                }
            });
        });
        // AJAX for editing a Announcement list
        $('.edit-announcement_list').on('click', function () {
            var announcement_list_id = $(this).data('announcement_list-id');
            $.ajax({
                url: '/hr/get_announcement_list_details/' + announcement_list_id + '/',
                type: 'GET',
                success: function (data) {
                    $('#editannouncement_listId').val(data.id);
                    $('#Editannouncement_listannouncement_master').val(data.company_id);
                    $('#Editannouncement_listannouncement_name').val(data.name);
                    $('#Editannouncement_created_on').val(data.created_on);
                    $('#Editannouncement_message').val(data.message);
                    $('#Editannouncement_file').val(data.file);
                    $('#Editannouncement_status').val(data.status);
                    $('#Editannouncement_listModal').modal('show');
                },
                error: function () {
                    alert('Failed to fetch Announcement list details.');
                }
            });
        });
        // AJAX for updating a Announcement
        $('#updateannouncement_listForm').on('submit', function (event) {
            event.preventDefault();
            var formData = new FormData($(this)[0]);
            var announcement_list_id = $('#editannouncement_listId').val();
            $.ajax({
                type: "POST",
                url: "{% url 'hr:update_announcement_list_details' 0 %}".replace('0',
                    announcement_list_id),
                data: formData,
                processData: false,
                contentType: false,
                success: function (data) {
                    $("#Editannouncement_listModal .modal-body").html(
                        '<div class="alert alert-success">Announcement list updated successfully!</div>'
                        );

                        $("#Editannouncement_listModal .modal-footer .editAnnouncementBtn").hide();
                        setTimeout(function(){
                            $("#Editannouncement_listModal").modal('hide');
                            location.reload();
                        }, 2000);
                    // {% comment %} window.location.href = '/hr/announcement_list_master/'; {% endcomment %}
                },
                error: function (xhr, status, error) {
                    $("#Editannouncement_listModal .modal-body").html(
                        '<div class="alert alert-danger">' + xhr.responseJSON.error +
                        '</div>');
                }
            });
        });

        $('.delete-announcement_list').on('click', function () {
            var announcement_list_id = $(this).data('announcement_list-id');
            if (confirm('Are you sure you want to delete this announcement list?')) {
                $.ajax({
                    url: '/hr/delete_announcement_list/' + announcement_list_id + '/',
                    type: 'POST',
                    data: {
                        'csrfmiddlewaretoken': '{{ csrf_token }}'
                    },
                    success: function (data) {
                        alert('Announcement list deleted successfully');
                        location
                    .reload(); // Reload the page to update the announcement list
                    },
                    error: function (xhr, status, error) {
                        alert('Failed to delete announcement list: ' + xhr.responseJSON
                            .error);
                    }
                });
            }
        });

        // AJAX for adding a new Policy list
        $('#addpolicy_listForm').on('submit', function (event) {
            event.preventDefault();
            var company = $('#Addpolicy_Company').val(); // Get the selected company ID
            var name = $('#Addpolicy_name').val();
            var created_on = $('#Addpolicy_created_on').val();
            var remarks = $('#Addpolicy_remarks').val();
            var file = $('#Addpolicy_file').val();
            var status = $('#Addpolicy_status').val();
            $.ajax({
                url: "{% url 'hr:add_policy_list_details' %}",
                type: "POST",
                data: {
                    'company': company,
                    'name': name,
                    'created_on': created_on,
                    'remarks': remarks,
                    'file': file,
                    'status': status,
                    'csrfmiddlewaretoken': '{{ csrf_token }}'
                },
                success: function (data) {
                    $("#AddPolicyModal .modal-body").html(
                        '<div class="alert alert-success">Policy uploaded successfully!</div>');
                        $("#AddPolicyModal .modal-footer .addpolicylistbtn").hide();
                        setTimeout(function(){
                            $("#AddPolicyModal").modal('hide');
                            location.reload();
                        }, 2000);
                },
                error: function (xhr, status, error) {
                    var errorMessage = xhr.responseJSON.error;
                    $("#AddPolicyModal .modal-body").html(
                        '<div class="alert alert-danger">' + errorMessage + '</div>');
                        $("#AddPolicyModal .modal-footer .addpolicylistbtn").hide();
                }
            });
        });
        // AJAX for editing a Announcement list
        $('.edit-policy_list').on('click', function () {
            var policy_list_id = $(this).data('policy_list-id');
            $.ajax({
                url: '/hr/get_policy_list_details/' + policy_list_id + '/',
                type: 'GET',
                success: function (data) {
                    $('#editpolicy_listId').val(data.id);
                    $('#Editpolicy_listpolicy_master').val(data.company_id);
                    $('#Editpolicy_listpolicy_name').val(data.name);
                    $('#Editpolicy_created_on').val(data.created_on);
                    $('#Editpolicy_remarks').val(data.remarks);
                    $('#Editpolicy_file').val(data.file);
                    $('#Editpolicy_status').val(data.status);
                    $('#Editpolicy_listModal').modal('show');
                },
                error: function () {
                    alert('Failed to fetch Policy list details.');
                }
            });
        });
        // AJAX for updating a Announcement
        $('#updatepolicy_listForm').on('submit', function (event) {
            event.preventDefault();
            var formData = new FormData($(this)[0]);
            var policy_list_id = $('#editpolicy_listId').val();
            $.ajax({
                type: "POST",
                url: "{% url 'hr:update_policy_list_details' 0 %}".replace('0', policy_list_id),
                data: formData,
                processData: false,
                contentType: false,
                success: function (data) {
                    $("#Editpolicy_listModal .modal-body").html(
                        '<div class="alert alert-success">policy list updated successfully!</div>'
                        );
                        $("#Editpolicy_listModal .modal-footer .save-policylist-btn").hide();

                        setTimeout(function(){
                            $("#AddholidaymasterModal").modal('hide');
                            location.reload();
                        }, 2000);
                        
                    // {% comment %} window.location.href = '/hr/policy_list_master/'; {% endcomment %}
                },
                error: function (xhr, status, error) {
                    $("#Editpolicy_listModal .modal-body").html(
                        '<div class="alert alert-danger">' + xhr.responseJSON.error +
                        '</div>');
                        $("#Editpolicy_listModal .modal-footer .save-policylist-btn").hide();
                }
            });
        });
        // AJAX for deleting a policy list
        $('.delete-policy_list').on('click', function () {
            var policy_list_id = $(this).data('policy_list-id');
            if (confirm('Are you sure you want to delete this policy?')) {
                $.ajax({
                    url: '/hr/delete_policy_list/' + policy_list_id + '/',
                    type: 'POST',
                    data: {
                        'csrfmiddlewaretoken': '{{ csrf_token }}'
                    },
                    success: function (data) {
                        alert('Policy deleted successfully');
                        location.reload(); // Reload the page to update the policy list
                    },
                    error: function (xhr, status, error) {
                        alert('Failed to delete policy: ' + xhr.responseJSON.error);
                    }
                });
            }
        });
    });
</script>
{% endblock extrascript %}