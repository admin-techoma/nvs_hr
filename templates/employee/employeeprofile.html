{% extends 'component/base.html' %}

{% load static %}

{% block title %}Employee Profile{% endblock title %}

{% block extracss %}

{% load custom_filters %}

{% endblock extracss %}

{% block maincontent %}

<div class="main-content">
    {% for message in messages %}
    {% if message.tags == 'success' %}
    <div class="alert alert-success" role="alert">
        {{ message }}
    </div>
    {% else %}
    <label for="exampleInputEmail1" class="form-label mb-0 text-left text-danger">{{ message }}</label>
    {% endif %}
    {% endfor %}
    {% if form.errors %}
    <div class="alert alert-danger" role="alert">
        {% for field, errors in form.errors.items %}
        {% for error in errors %}
        {{ error }}
        {% endfor %}
        {% endfor %}
    </div>
    {% endif %}
    <ul class="profile-tabs nav nav-tabs" id="myTab" role="tablist">
        <li class="nav-item" role="presentation">
            <button class="nav-link active" id="Personal-tab" data-bs-toggle="tab" data-bs-target="#Personal-tab-pane" href="#Personal-tab-pane"
                type="button" role="tab" aria-controls="Personal-tab-pane" aria-selected="true">Personal</button>
        </li>
        <li class="nav-item" role="presentation">
            <button class="nav-link" id="BankAccount-tab" data-bs-toggle="tab" data-bs-target="#BankAccount-tab-pane"
                type="button" role="tab" aria-controls="BankAccount-tab-pane" aria-selected="false">Bank
                Account</button>
        </li>
        <li class="nav-item" role="presentation">
            <button class="nav-link" id="Documents-tab" data-bs-toggle="tab" data-bs-target="#Documents-tab-pane"
                type="button" role="tab" aria-controls="Documents-tab-pane" aria-selected="false">Documents</button>
        </li>
        <li class="nav-item" role="presentation">
            <button class="nav-link" id="Work-tab" data-bs-toggle="tab" data-bs-target="#Work-tab-pane" type="button"
                role="tab" aria-controls="Work-tab-pane" aria-selected="false">Work</button>
        </li>
        <li class="nav-item" role="presentation">
            <button class="nav-link" id="Team-tab" data-bs-toggle="tab" data-bs-target="#Team-tab-pane" type="button"
                role="tab" aria-controls="Team-tab-pane" aria-selected="false">Team</button>
        </li>
        {% if department == 'HR' or department == 'Admin' %}
        <li class="nav-item" role="presentation">
            <button class="nav-link" id="payroll-tab" data-bs-toggle="tab" data-bs-target="#payroll-tab-pane"
                type="button" role="tab" aria-controls="payroll-tab-pane" aria-selected="false">Payroll</button>
        </li>
        {% endif %}
        {% if department == 'HR' or department == 'Admin' %}
        <li class="nav-item" role="presentation">
            <button class="nav-link" id="permission-tab" data-bs-toggle="tab" data-bs-target="#permission-tab-pane"
                type="button" role="tab" aria-controls="permission-tab-pane" aria-selected="false">Permission</button>
        </li>
        {% endif %}
        
        <li class="nav-item" role="presentation">
            <button class="nav-link" id="attendance-tab" data-bs-toggle="tab" data-bs-target="#attendance-tab-pane" type="button"
                role="tab" aria-controls="attendance-tab-pane" aria-selected="false">Attendance</button>
        </li>
        <li class="nav-item" role="presentation">
            <button class="nav-link" id="salary-tab" data-bs-toggle="tab" data-bs-target="#salary-tab-pane" type="button"
                role="tab" aria-controls="salary-tab-pane" aria-selected="false">Salary</button>
        </li>
        <li class="nav-item" role="presentation">
            <button class="nav-link" id="other-tab" data-bs-toggle="tab" data-bs-target="#other-tab-pane" type="button"
                role="tab" aria-controls="other-tab-pane" aria-selected="false">Others</button>
        </li>
    </ul>
    <div class="tab-content" id="myTabContent">
        <div class="tab-pane fade show active" id="Personal-tab-pane" role="tabpanel" aria-labelledby="Personal-tab"
            tabindex="0">
            <div class="card">
                <div class="card-body">
                    <form id="personalInfoForm" method="POST"
                        action="{% url 'hr:update_personal_info' emp_data.emp_id %}" enctype="multipart/form-data">
                        {% csrf_token %}
                        <div class="">
                            <div class="row">
                                <div class="col-12 mb-3  border-bottom d-flex justify-content-between">
                                    <h5>Personal Info</h5>
                                    {% if department == 'HR' or department == 'Admin' %}
                                    <div class="d-flex justify-content-end align-items-center mb-2">
                                        <button type="button" id="editPersonalInfoBtn"
                                            class="btn custom-button btn-sm">Edit</button>
                                    </div>
                                    {% else %}
                                    {% endif %}
                                </div>
                                <div class="col-12 col-md-3 mb-3 d-flex flex-column">
                                    <div class="d-flex justify-content-center mb-1">
                                    <figure class="employeeprofilewrapper  justify-content-center align-items-center">
                                        {% comment %} <img src="/media/{{documents.c_psimg.url}}"
                                            class="employeeprofile img-fluid" alt="profile Pic" /> {% endcomment %}
                                        {% if documents and documents.c_psimg %}
                                        <img src="{{documents.c_psimg.url}}" alt="img" class="employeeprofile img-fluid"
                                            alt="profile Pic">
                                        {% else %}
                                        <img src="{% static 'admin/img/avtar.jpg' %}" alt="profile Pic"
                                            class="employeeprofile img-fluid">
                                        {% endif %}
                                    </figure>
                                </div>
                                <div class="mb-3">
                                    <label class="form-label mb-0">Name (As per Aadhar Card)</label>
                                    <input type="text" class="form-control form-control-sm" disabled 
                                     value="{{emp_data.name|default:''}}" name="name">
                                </div>
                                </div> 
                                <div class="col-12 col-md-9  d-flex flex-wrap p-0">
                                    <div class="col-12 col-md-4 mb-3 px-2">
                                        <label class="form-label mb-0">First Name</label>
                                        <input type="text" class="form-control form-control-sm" disabled
                                            value="{{emp_data.first_name|default:''}}"
                                            name="first_name">
                                    </div>
                                    <div class="col-12  col-md-4 mb-3 px-2">
                                        <label class="form-label mb-0">Middle Name</label>
                                        <input type="text" class="form-control form-control-sm" disabled
                                            value="{{emp_data.middle_name|default:''}}"
                                            name="middle_name">
                                    </div>
                                    <div class="col-12  col-md-4 mb-3 px-2">
                                        <label class="form-label mb-0">Last Name</label>
                                        <input type="text" class="form-control form-control-sm" disabled
                                         value="{{emp_data.last_name|default:''}}" name="last_name">
                                    </div>
                                    <div class="col-12  col-md-4 mb-3 px-2">
                                        <label class="form-label mb-0">Date of Birth</label>
                                        <input type="date" class="form-control form-control-sm" disabled 
                                            id="createemployeedateofbirth" name="dob"  required
                                            oninput="validateDOB()" data-min-age="18" value="{{emp_data.dob|date:'Y-m-d'}}"
                                            name="dob">
                                        <div id="dobError" class="text-danger"></div>
                                        <div id="currentAge"></div>
                                    </div> 
                                  <div class="col-12  col-md-4 mb-3 px-2">
                                        <label>Gender</label>
                                        <select class="form-control form-control-sm" name="gender" id="gender" disabled>
                                            {% for i in gender %}
                                            <option value="{{ i.id }}" {% if emp_data.gender.id == i.id %} selected {% endif %}>
                                                {{ i.name }}
                                            </option>
                                            {% endfor %}
                                        </select>
                                    </div>
                                   <div class="col-12 col-md-4 mb-3 px-2">
                                        <label class="form-label mb-0">Marital Status</label>
                                        <select disabled class="form-control form-control-sm" name="married_status"
                                            id="married_status">
                                            <option value="Unmarried" {% if emp_data.married_status == 'Unmarried' %}selected{% endif %}>Unmarried</option>
                                            <option value="Married" {% if emp_data.married_status == 'Married' %}selected{% endif %}>Married</option>
                                        </select>
                                    </div>
                                    <div class="col-12 col-md-4 mb-3 px-2">
                                        <label class="form-label mb-0">Aadhar Card Number</label>
                                        <input type="Text" class="form-control form-control-sm" disabled 
                                            value="{{emp_data.aadhaarcard_no|default:''}}" name="aadhaarcard_no"
                                            pattern="[0-9]{12}"
                                            title="Invalid Aadhar Card Number entered. Please enter a 12-digit decimal number.">
                                    </div>
                                    <div class="col-12  col-md-4 mb-3 px-2">
                                        <label class="form-label mb-0">PAN Card Number</label>
                                        <input type="Text" class="form-control form-control-sm" disabled name="pancard_no"
                                            value="{{emp_data.pancard_no|default:''}}"
                                            pattern="[A-Z]{5}[0-9]{4}[A-Z]{1}"
                                            title="Invalid PAN Number entered. eg.ABCTY1234D"
                                            oninput="this.value = this.value.toUpperCase()">
                                    </div>
                                    <div class="col-12  col-md-4 mb-3 px-2">
                                        <label>Blood Group</label>
                                        <select disabled class="form-control form-control-sm" name="blood_group"
                                            id="blood_group">
                                            <option value="Not Update" {% if emp_data.blood_group == 'Not Update' %} selected {%endif%}>Not Update</option>
                                            <option value="A+" {% if emp_data.blood_group == 'A+' %}selected{% endif %}>A+
                                            </option>
                                            <option value="B+" {% if emp_data.blood_group == 'B+' %}selected{% endif %}>B+
                                            </option>
                                            <option value="AB+" {% if emp_data.blood_group == 'AB+' %}selected{% endif %}>AB+
                                            </option>
                                            <option value="O+" {% if emp_data.blood_group == 'O+' %}selected{% endif %}>O+
                                            </option>
                                            <option value="A-" {% if emp_data.blood_group == 'A-' %}selected{% endif %}>A-
                                            </option>
                                            <option value="B-" {% if emp_data.blood_group == 'B-' %}selected{% endif %}>B-
                                            </option>
                                            <option value="AB-" {% if emp_data.blood_group == 'AB-' %}selected{% endif %}>AB-
                                            </option>
                                            <option value="O-" {% if emp_data.blood_group == 'O-' %}selected{% endif %}>O-
                                            </option>
                                            <!-- Add options for other blood groups as needed -->
                                        </select>
                                    </div>
                                </div>
                            </div>
                            <div class="row w-100">
                                <div class="col-12 mb-3  border-bottom">
                                    <h5>Contact Info</h5>
                                </div>
                                <div class="col-12 col-md-3 mb-3">
                                    <label class="form-label mb-0">Personal Email id</label>
                                    <input type="email" class="form-control form-control-sm" disabled
                                         value="{{emp_data.email}}" name="email">
                                </div>
                                <div class="col-12 col-md-3 mb-3">
                                    <label class="form-label mb-0">Phone Number</label>
                                    <input type="Number" disabled class="form-control form-control-sm "
                                        name="contact_no" autocomplete="off"
                                        pattern="[0-9]{10}" maxlength="10" minlength="10"
                                        value="{{emp_data.contact_no}}">
                                </div>
                                <div class="col-12 col-md-3 mb-3">
                                    <label class="form-label mb-0">Alternative Phone Number</label>
                                    <input type="Number" class="form-control form-control-sm" name="other_contact_no"
                                        value="{{emp_data.other_contact_no}}" disabled>
                                </div>
                            </div>
                            <div class="row w-100">
                                <div class="col-12 col-md-3 mb-3">
                                    <label class="form-label mb-0">Permenent Address </label>
                                    <input id="paddress" disabled type="Text" class="form-control  form-control-sm"
                                        disabled name="address"
                                        value="{{emp_data.c_address}}">
                                </div>
                                <div class="col-12 col-md-3 mb-3">
                                    <label class="form-label mb-0">City</label>
                                    <input id="pcity" disabled type="Text" class="form-control form-control-sm "
                                         id="pcity" name="city"
                                        value="{{emp_data.city}}">
                                </div>
                                <div class="col-12 col-md-3 mb-3">
                                    <label class="form-label mb-0">State</label>
                                    <input id="pstate" disabled type="Text" class="form-control form-control-sm"
                                         id="pstate" name="state"
                                        value="{{emp_data.state}}">
                                </div>
                                <div class="col-12 col-md-3 mb-3">
                                    <label class="form-label mb-0">Country</label>
                                    <input disabled type="Text" class="form-control form-control-sm"
                                         id="pcountry" name="country"
                                        value="{{emp_data.country}}">
                                </div>
                                <div class="col-12 col-md-3 mb-3">
                                    <label class="form-label mb-0">Pincode</label>
                                    <input disabled type="Text" class="form-control form-control-sm"
                                        id="ppincode" name="pin_code"
                                        value="{{emp_data.pin_code}}">
                                </div>
                            </div>
                            <div class="row w-100">
                                <div class="col-12 col-md-3 mb-3">
                                    <div class="form-check">
                                        <input disabled class="form-check-input" type="checkbox" value=""
                                            id="sameasabove" disabled>
                                        <label class="form-check-label" for="flexCheckDefault">
                                            Same as Above
                                        </label>
                                    </div>
                                </div>
                            </div>
                            <!-- new -->
                            <div class="row w-100">
                                <div class="col-12 col-md-3 mb-3">
                                    <label class="form-label mb-0">Correspondence Address </label>
                                    <input disabled type="Text" class="form-control form-control-sm" disabled id="caddress" name="c_address"
                                        value="{{emp_data.address}},{{emp_data.state}},{{emp_data.city}},{{emp_data.country}},{{emp_data.pin_code}}">
                                </div>
                                <div class="col-12 col-md-3 mb-3">
                                    <label class="form-label mb-0">Correspondence City</label>
                                    <input disabled type="Text" class="form-control form-control-sm "
                                         id="ccity" name="c_city"
                                        value="{{emp_data.c_city}}">
                                </div>
                                <div class="col-12 col-md-3 mb-3">
                                    <label class="form-label mb-0">Correspondence State</label>
                                    <input disabled type="Text" class="form-control form-control-sm"
                                        id="cstate" name="c_state"
                                        value="{{emp_data.c_state}}">
                                </div>
                                <div class="col-12 col-md-3 mb-3">
                                    <label class="form-label mb-0">Correspondence Country</label>
                                    <input disabled type="Text" class="form-control form-control-sm"
                                         id="ccountry" name="c_country"
                                        value="{{emp_data.c_country}}">
                                </div>
                                <div class="col-12 col-md-3 mb-3">
                                    <label class="form-label mb-0">Correspondence Pincode</label>
                                    <input disabled type="Text" class="form-control form-control-sm"
                                         id="cpincode" name="c_pin_code"
                                        value="{{emp_data.c_pin_code}}">
                                </div>
                            </div>
                            <div class="row w-100">
                                <div class="col-12 mb-3  border-bottom">
                                    <h5>Emergency Contact Details</h5>
                                </div>
                                <div class="col-12 col-md-3 mb-3">
                                    <label class="form-label mb-0">Name</label>
                                    <input disabled type="Text" class="form-control form-control-sm" disabled
                                        id="emergency_contactname" name="emergency_contactname" value="{{emp_data.emergency_contactname}}" required>
                                </div>
                                <div class="col-12 col-md-3 mb-3">
                                    <label class="form-label mb-0">Mobile No</label>
                                    
                                        <input type="Number" disabled class="form-control form-control-sm "
                                        name="emergency_contactnumber"  autocomplete="off"
                                        pattern="[0-9]{10}" maxlength="10" minlength="10"
                                        value="{{emp_data.emergency_contactnumber}}" required>
                                    </div>
                                <div class="col-12 col-md-3 mb-3">
                                    <label class="form-label mb-0">Relation as </label>
                                    <select disabled class="form-control form-control-sm"  aria-label="Default select example" name="emergency_relationas"
                                    id="emergency_relationas" required>
                                    <option value="Not Update" {% if emp_data.emergency_relationas == 'Not Update' %} selected {%endif%}>Not Update</option>
                                    <option value="Father" {% if emp_data.emergency_relationas == 'Father' %}selected{% endif %}>Father
                                    </option>
                                    <option value="Mother" {% if emp_data.emergency_relationas == 'Mother' %}selected{% endif %}>Mother
                                    </option>
                                    <option value="Spouse" {% if emp_data.emergency_relationas == 'Spouse' %}selected{% endif %}>Spouse
                                    </option>
                                    <option value="Son" {% if emp_data.emergency_relationas == 'Son' %}selected{% endif %}>Son
                                    </option>
                                    <option value="Daughter" {% if emp_data.emergency_relationas == 'Daughter' %}selected{% endif %}>Daughter
                                    </option>
                                    <option value="Other" {% if emp_data.emergency_relationas == 'Other' %}selected{% endif %}>Other
                                    </option>
                                    <!-- Add options for other blood groups as needed -->
                                </select>
                                </div>
                            </div>
                            <div class="row w-100">
                                <div class="col-12 mb-3 border-bottom">
                                    <h5>Social Profile</h5>
                                </div>
                                <div class="col-12 col-md-6">
                                    <ul class="social-list">
                                        <li class="social-item">
                                            <a href="{{emp_data.linkedin_profile}}" class="social-link" target="_blank">
                                                <span class="social-icon bi bi-linkedin fs-4"></span>
                                                <span class="social-text"></span>
                                            </a>
                                            <input disabled type="Text" class="form-control form-control-sm "
                                                name="linkedin_profile" value="{{emp_data.linkedin_profile|default:''}}">
                                        </li>
                                        <li class="social-item">
                                            <a href="{{emp_data.instagram_profile|default:''}}" class="social-link"
                                                target="_blank">
                                                <span class="social-icon bi bi-facebook fs-4"></span>
                                                <span class="social-text"></span>
                                            </a>
                                            <input disabled type="Text" class="form-control form-control-sm "
                                                name="instagram_profile" value="{{emp_data.instagram_profile|default:''}}">
                                        </li>
                                        <li class="social-item">
                                            <a href="{{emp_data.facebook_profile}}" class="social-link" target="_blank">
                                                <span class="social-icon bi bi-instagram fs-4"></span>
                                                <span class="social-text"></span>
                                            </a>
                                            <input disabled type="Text" class="form-control form-control-sm"
                                                name="facebook_profile" value="{{emp_data.facebook_profile|default:''}}">
                                        </li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                        {% if department == 'HR' or department == 'Admin' %}
                        <div class="d-flex justify-content-end align-items-center mb-2">
                            <button type="submit" id="savePersonalInfoBtn" class="btn custom-button btn-sm"
                                disabled>Save
                                Changes</button>
                        </div>
                        {% else %}
                        {% endif %}
                    </form>
                </div>
            </div>
        </div>
        <div class="tab-pane fade" id="BankAccount-tab-pane" role="tabpanel" aria-labelledby="BankAccount-tab"
            tabindex="0">
            <div class="card">
                <div class="card-body">
                    <table class="table">
                        <thead>
                            <tr>
                                <th scope="col">#</th>
                                <th>Account number</th>
                                <th scope="col">Bank Name</th>
                                <th scope="col">IFSC Code</th>
                                <th>Bank Branch</th>
                                {% if department == 'HR' or department == 'Admin' %}
                                <th scope="col">Action</th>
                                {% endif %}
                            </tr>
                        </thead>
                       
                        <tbody>
                       
                            <tr>
                                <td>{{ forloop.counter }}</td>
                                <td>{{ emp_data.account_no|default:'' }}</td>
                                <td>{{ emp_data.bank_name|default:'' }}</td>
                                <td>{{ emp_data.ifsc_code|default:'' }}</td>
                                <td>{{ emp_data.branch|default:'' }}</td>
                                {% if department == 'HR' or department == 'Admin' %}
                                <td>
                                    <button class="btn btn-sm custom-button me-2" data-bs-toggle="modal" data-bs-target="#bankdetailsedit"><span class="bi bi-eye"></span></button>
                                    <button class="btn btn-sm btn-danger"><span class="bi bi-trash"></span></button>
                                </td>
                                {% endif %}
                            </tr>
                           
                        </tbody>
                    </table>
             
                </div>
            </div>
        </div>
           <!-- Modal -->
           <div class="modal fade" id="bankdetailsedit" tabindex="-1" aria-labelledby="bankdetailseditlabel"
           aria-hidden="true">
           <div class="modal-dialog">
               <div class="modal-content">
                   <div class="modal-header">
                       <h1 class="modal-title fs-5" id="bankdetailseditLabel">Bank Details</h1>
                       <button type="button" class="btn-close btn-close-white " data-bs-dismiss="modal"
                           aria-label="Close"></button>

                   </div>
                   <div class="modal-body">
                       
                   <form id="bankInfoForm" method="POST" action="{% url 'hr:update_bank_info' emp_data.emp_id %}"
                       enctype="multipart/form-data">
                       {% csrf_token %}
                       <div class="p-1 p-md-1">                                    
                           <div class="row w-100 ">
                               <div class="d-flex justify-content-end align-items-center mb-2 w-100">
                                   <button type="button" id="editbankInfoBtn"
                                       class="btn custom-button btn-sm">Edit</button>
                               </div>
                               <div class="col-12  mb-3">
                                <Label class="form-label mb-0">Account Holder's Name </Label>
                                <input type="text" class="form-control form-control-sm "
                                   value="{{emp_data.name}}" disabled>
                            </div>
                               <div class="col-12  mb-3">
                                   <label class="form-label mb-0">IFSC Code </label>
                                   <input type="text" class="form-control form-control-sm" 
                                       id="ifsc_code" name="ifsc_code" pattern="[A-Z]{4}0[A-Z0-9]{6}" oninput="this.value = this.value.toUpperCase()"
                                       value="{{emp_data.ifsc_code|default:''}}" disabled>
                               </div>
                               <div class="col-12  mb-3">
                                <label class="form-label mb-0">Bank Name</label>
                                <input type="text" class="form-control form-control-sm" 
                                    id="bank_name" name="bank_name" readonly
                                    value="{{emp_data.bank_name|default:''}}" disabled>
                            </div>
                            <div class="col-12  mb-3">
                                <label class="form-label mb-0">Branch Name </label>
                                <input type="text" class="form-control form-control-sm" readonly
                                     id="branch" name="branch" value="{{emp_data.branch|default:''}}" disabled>
                            </div>
                            <div class="col-12  mb-3">
                                <label class="form-label mb-0">Account Number </label>
                                <input type="text" class="form-control form-control-sm"
                                    id="account_no" name="account_no"
                                    value="{{emp_data.account_no|default:''}}" disabled>
                            </div>
                           </div>     
                       </div>
                   
                   </div>
                 <div class="modal-footer">
                       <button type="button" class="btn btn-secondary btn-sm"
                           data-bs-dismiss="modal">Close</button>
                           {% if department == 'HR' or department == 'Admin' %}
                           <div class="d-flex justify-content-start align-items-center">
                               <button type="submit" id="savebankInfoBtn" class="btn custom-button btn-sm banksaveinfobtn"
                                   disabled>Save
                                   Changes
                               </button>
                           </div>
                           {% endif %}
                   </div> 
               </form>
               </div>
           </div>
       </div>
        <div class="tab-pane fade" id="Work-tab-pane" role="tabpanel" aria-labelledby="Work-tab" tabindex="0">
            <div class="card">
                <div class="card-body">
                    <form id="workInfoForm" method="POST" action="{% url 'hr:update_work_info' emp_data.emp_id %}"
                        enctype="multipart/form-data">
                        {% csrf_token %}
                        <div class="">
                            <div class="row  mb-md-3">
                                <div class="col-12 mb-3  border-bottom d-flex justify-content-between flex-wrap">
                                    <h5>Work</h5>
                                    {% if department == 'HR' or department == 'Admin' %}
                            <div class="d-flex justify-content-end align-items-center  mb-2">
                                <button type="button" id="editWorkInfoBtn"
                                    class="btn custom-button btn-sm">Edit</button>
                            </div>
                            {% endif %}
                                </div>
                                <div class="col-12 col-md-3 mb-3">
                                    <label class="form-label mb-0">Joining Date</label>
                                    <input type="date" class="form-control form-control-sm " disabled 
                                     value="{{emp_data.doj|date:'Y-m-d'}}" name="doj">
                                </div>
                                <div class="col-12 col-md-3 mb-3">
                                    <label class="form-label mb-0">Department </label>
                                    <select class="form-control form-control-sm" name="workdepartment"
                                        id="workdepartment" disabled>
                                        {% for i in department_all %}
                                        <option value="{{ i.id }}" {%if emp_data.department.id == i.id %}selected{% endif %}>
                                            {{ i.name }}
                                        </option>
                                        {% endfor %}
                                    </select>
                                </div>
                                <div class="col-12 col-md-3 mb-3">
                                    <label class="form-label mb-0">Designation</label>
                                    <select disabled id="workdesignation" class="form-control form-control-sm"
                                        name="designation">
                                        <option value="{{emp_data.designation.id}}" selected>
                                            {{emp_data.designation.name}}
                                        </option>
                                    </select>
                                </div>
                                <div class="col-12 col-md-3 mb-3">
                                    <label class="form-label mb-0">Position</label>
                                    <select class="form-control form-control-sm" name="position" id="workposition"
                                        disabled>
                                        {% for i in position_all %}
                                        <option value="{{ i.id }}" {% if emp_data.position.id == i.id %}selected{% endif %}>
                                            {{ i.name }}
                                        </option>
                                        {% endfor %}
                                    </select>


                                </div>
                                <div class="col-12 col-md-3 mb-3">
                                    <label class="form-label mb-0">Work Location</label>

                                    <select class="form-control form-control-sm" name="company_branch"
                                        id="company_branch" disabled>
                                        {% for i in company_branch %}
                                        <option value="{{ i.id }}" {% if emp_data.company_branch.id == i.id %}selected{% endif %}>
                                            {{ i.name }}
                                        </option>
                                        {% endfor %}
                                    </select>
                                </div>
                                <div class="col-12 col-md-3 mb-3">
                                    <label class="form-label mb-0">Official Email</label>
                                    <input type="email" class="form-control form-control-sm " disabled
                                     name="office_email"
                                        value="{{emp_data.office_email|default:''}}">
                                </div>
                                <div class="col-12 col-md-3 mb-3">
                                    <label class="form-label mb-0">Exit date</label>
                                    <input type="date" class="form-control form-control-sm" disabled 
                                     name="doe" value="{{emp_data.doe|date:'Y-m-d'}}">
                                </div>
                                <div class="col-12 col-md-3 mb-3">
                                    <label class="form-label mb-0">UAN Number </label>
                                    <input type="Number" class="form-control form-control-sm"
                                        name="uanno" value="{{emp_data.uanno|default:'' }}" disabled>
                                </div>
                                <div class="col-12 col-md-3 mb-3">
                                    <label class="form-label mb-0">PF Number </label>
                                    <input type="Text" class="form-control form-control-sm"
                                        name="pfno" value="{{emp_data.pfno|default:'' }}" disabled>
                                </div>
                                <div class="col-12 col-md-3 mb-3">
                                    <label class="form-label mb-0">PF Joining Date</label>
                                    <input type="date" class="form-control form-control-sm" 
                                        name="pf_joining_date" value="{{emp_data.pf_joining_date|date:'Y-m-d'}}"
                                        disabled>
                                </div>
                                <div class="col-12 col-md-3 mb-3">
                                    <label class="form-label mb-0">PF Exit Date</label>
                                    <input type="date" class="form-control form-control-sm"
                                        name="pf_exit_date" value="{{emp_data.pf_exit_date|date:'Y-m-d'}}" disabled>
                                </div>
                                <div class="col-12 col-md-3 mb-3">
                                    <label class="form-label mb-0">ESIC Number </label>
                                    <input type="Number" class="form-control form-control-sm"
                                        name="esicno" value="{{emp_data.esicno|default:'' }}" disabled>
                                </div>
                                <div class="col-12 col-md-3 mb-3">
                                    <label class="form-label mb-0">ESIC Joining Date</label>
                                    <input type="date" class="form-control form-control-sm"
                                        name="esic_joining_date" value="{{emp_data.esic_joining_date|date:'Y-m-d' }}"
                                        disabled>
                                </div>
                                <div class="col-12 col-md-3 mb-3">
                                    <label class="form-label mb-0">ESIC Exit Date</label>
                                    <input type="date" class="form-control form-control-sm"
                                        name="esic_exit_date" value="{{emp_data.esic_exit_date|date:'Y-m-d' }}"
                                        disabled>
                                </div>
                            </div>
                        </div>
                        {% if department == 'HR' or department == 'Admin' %}
                        <div class="d-flex justify-content-end align-items-center mb-2">
                            <button type="submit" id="saveWorkInfoBtn" class="btn custom-button btn-sm" disabled>Save
                                Changes</button>
                        </div>
                        {% else %}
                        {% endif %}
                    </form>
                </div>
            </div>
        </div>
        <div class="tab-pane fade" id="Team-tab-pane" role="tabpanel" aria-labelledby="Team-tab" tabindex="0">
            <div class="card">
                <div class="card-body">
                    <form id="teamInfoForm" method="POST" action="{% url 'hr:update_team_info' emp_data.emp_id %}"
                        enctype="multipart/form-data">
                        {% csrf_token %}
                        <div class="">
                            <div class="row mb-md-2">
                                <div class="col-12 mb-3  border-bottom d-flex justify-content-between flex-wrap">
                                    <h5>Team</h5>
                                    {% if department == 'HR' or department == 'Admin' %}
                                    <div class="d-flex justify-content-end align-items-center mb-2">
                                        <button type="button" id="editTeamInfoBtn"
                                            class="btn custom-button btn-sm">Edit</button>
                                    </div>
                                    {% else %}
                                    {% endif %}
                                </div>
                                <div class="mb-1 col-12 col-md-3">
                                    <label class="form-label mb-0" for="reporting_to">Reporting Manager </label>
                                    <select disabled id="reporting_to" class="form-select form-select-sm"
                                        aria-label="Default select example" name="reporting_to">
                                        <option value="{{emp_data.reporting_to}}" selected>
                                            {{emp_data.reporting_to}}
                                        </option>
                                        {% for employee in reporting_managers %}
                                        <option value="{{ employee.reporting_to}}">
                                            {{employee.reporting_to}}</option>
                                        {% endfor %}
                                    </select>
                                </div>
                                <div class="mb-1 col-12 col-md-3 d-flex justify-content-start align-items-end">
                                    {% if department == 'HR' or department == 'Admin' %}
                                    <div class="d-flex justify-content-start align-items-center ">
                                        <button type="submit" id="saveTeamInfoBtn" class="btn custom-button btn-sm"
                                            disabled>Save
                                        </button>
                                    </div>
                                    {% else %}
                                    {% endif %}
                                </div>
                            </div>

                        </div>
                    </form>
                    <div class="mb-3 col-12 col-md-6">
                        <h5 class="mb-3">Employees Reporting to {{ emp_data.reporting_to }} </h5>
                        <h6>List of Team Members</h6>
                        <table class="table">
                            <thead>
                                <tr>
                                    <th>Employee ID</th>
                                    <th>Name</th>
                                    <th>Department</th>
                                    <th>Designation</th>
                                    <!-- Add more columns as needed -->
                                </tr>
                            </thead>
                            <tbody>
                                {% for employee in employees_reporting_to_selected_manager %}
                                <tr>
                                    <td>{{ employee.emp_id }}</td>
                                    <td>{{ employee.name }}</td>
                                    <td>{{ employee.department }}</td>
                                    <td>{{ employee.designation }}</td>
                                    <!-- Add more columns as needed -->
                                </tr>
                                {% endfor %}
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>
        <div class="tab-pane fade" id="Documents-tab-pane" role="tabpanel" aria-labelledby="Documents-tab" tabindex="0">
            <div class="card">
                <div class="card-body">
                    <div class="mt-2 border-bottom pb-2 mb-2">
                        <h5>Uploaded Documents of <strong>{{emp_data.name}}</strong></h5>
                    </div>
                    <div class="p-1 p-md-1">
                        <div class="w-100 mb-md-3">
                            {% for onboarding_document in onboarding_documents %}
                            <div class="row">
                                <div class="col-12 col-md-6 mb-2 d-flex justify-content-between">
                                    <div class="d-flex align-items-center">
                                        <h6 class="mb-0">Photo</h6>
                                    </div>
                                    <div class="">
                                        {% if onboarding_document.c_psimg %}
                                        <a href="{{ onboarding_document.c_psimg.url }}" target="_blank"
                                            class="btn btn-sm custom-button"><i class="bi bi-eye btn-sm"></i></a>
                                            {% if department == 'HR' or department == 'Admin' %}
                                        <button type="button" class="btn btn-sm btn-success me-2" data-toggle="modal"
                                            data-target="#updateimg" id="updatenewimg">
                                            <i class="bi bi-pencil-square"></i>
                                        </button>
                                        {% else %}
                                        {% endif %}
                                        {% else %}
                                        {% if department == 'HR' or department == 'Admin' %}
                                        <button type="button" class="btn btn-danger btn-sm me-2" data-toggle="modal"
                                            data-target="#updateimg" id="updatenewimg">
                                            <i class="bi bi-upload"></i>
                                        </button>
                                        {% else %}
                                            <div class="badge bg-danger">Not Available</div>
                                            {% endif %}
                                            {% endif %}
                                    </div>
                                </div>
                                <div class="col-12 col-md-6 mb-2 d-flex justify-content-between">
                                    <div class="d-flex align-items-center">
                                        <h6 class="mb-0">Resume</h6>
                                    </div>
                                    <div class="">
                                        <div class="">
                                            {% if onboarding_document.candidate_id.resume %}
                                            <a href="{{ onboarding_document.candidate_id.resume.url}}" target="_blank"
                                                class="btn btn-sm custom-button"><i class="bi bi-eye btn-sm"></i></a>
                                            {% if department == 'HR' or department == 'Admin' %}
                                            <button type="button" class="btn btn-sm btn-success me-2"
                                                data-toggle="modal" data-target="#updateresume" id="updatenewresume">
                                                <i class="bi bi-pencil-square"></i>
                                            </button>
                                            {% else %}
                                            {% endif %}
                                            {% else %}
                                            {% if department == 'HR' or department == 'Admin' %}
                                            <button type="button" class="btn btn-danger btn-sm me-2" data-toggle="modal"
                                                data-target="#updateresume" id="updatenewresume">
                                                <i class="bi bi-upload"></i>
                                            </button>
                                            {% else %}
                                            <div class="badge bg-danger">Not Available</div>
                                            {% endif %}
                                            {% endif %}
                                        </div>
                                    </div>
                                </div>
                                <div class="col-12 col-md-6 mb-2 d-flex justify-content-between">
                                    <div class="d-flex align-items-center">
                                        <h6 class="mb-0">Aadhar Card</h6>
                                    </div>
                                    <div>
                                        {% if onboarding_document.c_adhar %}
                                        <a href="{{ onboarding_document.c_adhar.url }}" target="_blank"
                                            class="btn btn-sm custom-button"><i class="bi bi-eye btn-sm"></i></a>
                                        {% if department == 'HR' or department == 'Admin' %}
                                        <button type="button" class="btn btn-sm btn-success me-2" data-toggle="modal"
                                            data-target="#updateaadhaar" id="updatenewaadhaar">
                                            <i class="bi bi-pencil-square"></i>
                                        </button>
                                        {% else %}
                                        {% endif %}
                                        {% else %}
                                        {% if department == 'HR' or department == 'Admin' %}
                                        <button type="button" class="btn btn-danger btn-sm me-2" data-toggle="modal"
                                            data-target="#updateaadhaar" id="updatenewaadhaar">
                                            <i class="bi bi-upload"></i>
                                        </button>
                                        {% else %}
                                        <div class="badge bg-danger">Not Available</div>
                                        {% endif %}
                                        {% endif %}
                                    </div>
                                </div>
                                <div class="col-12 col-md-6 mb-2 d-flex justify-content-between">
                                    <div class="d-flex align-items-center">
                                        <h6 class="mb-0">Pan Card</h6>
                                    </div>
                                    <div>
                                        {% if onboarding_document.c_pan %}
                                        <a href="{{ onboarding_document.c_pan.url }}" target="_blank"
                                            class="btn btn-sm  custom-button"><i class="bi bi-eye btn-sm"></i></a>
                                        {% if department == 'HR' or department == 'Admin' %}
                                        <button type="button" class="btn btn-sm btn-success me-2" data-toggle="modal"
                                            data-target="#updatepan" id="updatenewpan">
                                            <i class="bi bi-pencil-square"></i>
                                        </button>
                                        {% else %}
                                        {% endif %}
                                        {% else %}
                                        {% if department == 'HR' or department == 'Admin' %}
                                        <button type="button" class="btn btn-danger btn-sm me-2" data-toggle="modal"
                                            data-target="#updatepan" id="updatenewpan">
                                            <i class="bi bi-upload"></i>
                                        </button>
                                        {% else %}
                                        <div class="badge bg-danger">Not Available</div>
                                        {% endif %}
                                        {% endif %}
                                    </div>
                                </div>
                                <div class="col-12 col-md-6 mb-2 d-flex justify-content-between">
                                    <div class="d-flex align-items-center">
                                        <h6 class="mb-0">Cancel Cheque</h6>
                                    </div>
                                    <div>
                                        {% if onboarding_document.c_bankDetails %}
                                        <a href="{{ onboarding_document.c_bankDetails.url }}" target="_blank"
                                            class="btn btn-sm custom-button"><i class="bi bi-eye btn-sm"></i></a>
                                        {% if department == 'HR' or department == 'Admin' %}
                                        <button type="button" class="btn btn-sm btn-success me-2" data-toggle="modal"
                                            data-target="#updatebankdetails" id="updatenewbankdetails">
                                            <i class="bi bi-pencil-square"></i>
                                        </button>
                                        {% else %}
                                        {% endif %}
                                        {% else %}
                                        {% if department == 'HR' or department == 'Admin' %}
                                        <button type="button" class="btn btn-danger btn-sm me-2" data-toggle="modal"
                                            data-target="#updatebankdetails" id="updatenewbankdetails">
                                            <i class="bi bi-upload"></i>
                                        </button>
                                        {% else %}
                                        <div class="badge bg-danger">Not Available</div>
                                        {% endif %}
                                        {% endif %}
                                    </div>
                                </div>
                                <div class="col-12 col-md-6 mb-2 d-flex justify-content-between">
                                    <div class="d-flex align-items-center">
                                        <h6 class="mb-0">Last 3 Month Bank statement</h6>
                                    </div>
                                    <div>
                                        {% if onboarding_document.c_bankStatement %}
                                        <a href="{{ onboarding_document.c_bankStatement.url }}" target="_blank"
                                            class="btn btn-sm custom-button"><i class="bi bi-eye btn-sm"></i></a>
                                        {% if department == 'HR' or department == 'Admin' %}
                                        <button type="button" class="btn btn-sm btn-success me-2" data-toggle="modal"
                                            data-target="#updatebankstatement" id="updatenewbankstatement">
                                            <i class="bi bi-pencil-square"></i>
                                        </button>
                                        {% else %}
                                        {% endif %}
                                        {% else %}
                                        {% if department == 'HR' or department == 'Admin' %}
                                        <button type="button" class="btn btn-danger btn-sm me-2" data-toggle="modal"
                                            data-target="#updatebankstatement" id="updatenewbankstatement">
                                            <i class="bi bi-upload"></i>
                                        </button>
                                        {% else %}
                                        <div class="badge bg-danger">Not Available</div>
                                        {% endif %}
                                        {% endif %}
                                    </div>
                                </div>
                                <div class="col-12 col-md-6 mb-2 d-flex justify-content-between">
                                    <div class="d-flex align-items-center">
                                        <h6 class="mb-0">Last 3 Month Salary Slip</h6>
                                    </div>
                                    <div>
                                        {% if onboarding_document.c_salarySlips %}
                                        {% if onboarding_document.c_salarySlips != 'Not Required' %}
                                        <a href="{{ onboarding_document.c_salarySlips.url }}" target="_blank"
                                            class="btn btn-sm custom-button"><i class="bi bi-eye btn-sm"></i></a>
                                        {% else %}
                                        <p>This document is marked as "Not Required".</p>
                                        {% endif %}
                                        {% if department == 'HR' or department == 'Admin' %}
                                        <button type="button" class="btn btn-sm btn-success me-2" data-toggle="modal"
                                            data-target="#updatesalaryslips" id="updatenewsalaryslips">
                                            <i class="bi bi-pencil-square"></i>
                                        </button>
                                        {% else %}
                                        {% endif %}
                                        {% else %}
                                        {% if department == 'HR' or department == 'Admin' %}
                                        <button type="button" class="btn btn-danger btn-sm me-2" data-toggle="modal"
                                            data-target="#updatesalaryslips" id="updatenewsalaryslips">
                                            <i class="bi bi-upload"></i>
                                        </button>

                                        {% else %}
                                        <div class="badge bg-danger">Not Available</div>

                                        {% endif %}
                                        {% endif %}
                                    </div>
                                </div>
                                <div class="col-12 col-md-6 mb-2 d-flex justify-content-between">
                                    <div class="d-flex align-items-center">
                                        <h6 class="mb-0">Experience Letter</h6>
                                    </div>
                                    <div>
                                        {% if onboarding_document.c_expLetter %}
                                        <a href="{{ onboarding_document.c_expLetter.url }}" target="_blank"
                                            class="btn btn-sm custom-button"><i class="bi bi-eye btn-sm"></i></a>
                                        {% if department == 'HR' or department == 'Admin' %}
                                        <button type="button" class="btn btn-sm btn-success me-2" data-toggle="modal"
                                            data-target="#updateexpletter" id="updatenewexpletter">
                                            <i class="bi bi-pencil-square"></i>
                                        </button>
                                        {% else %}
                                        {% endif %}
                                        {% else %}
                                        {% if department == 'HR' or department == 'Admin' %}
                                        <button type="button" class="btn btn-danger btn-sm me-2" data-toggle="modal"
                                            data-target="#updateexpletter" id="updatenewexpletter">
                                            <i class="bi bi-upload"></i>
                                        </button>
                                        {% else %}
                                        <div class="badge bg-danger">Not Available</div>
                                        {% endif %}
                                        {% endif %}
                                    </div>
                                </div>
                                <div class="col-12 col-md-6 mb-2 d-flex justify-content-between">
                                    <div class="d-flex align-items-center">
                                        <h6 class="mb-0">Previous Company Joining Letter</h6>
                                    </div>
                                    <div>
                                        {% if onboarding_document.c_previousJoiningLetter %}
                                        <a href="{{ onboarding_document.c_previousJoiningLetter.url }}" target="_blank"
                                            class="btn btn-sm custom-button"><i class="bi bi-eye btn-sm"></i></a>
                                        {% if department == 'HR' or department == 'Admin' %}
                                        <button type="button" class="btn btn-sm btn-success me-2" data-toggle="modal"
                                            data-target="#updatepreviousjoiningletter"
                                            id="updatenewpreviousjoiningletter">
                                            <i class="bi bi-pencil-square"></i>
                                        </button>
                                        {% else %}
                                        {% endif %}
                                        {% else %}
                                        {% if department == 'HR' or department == 'Admin' %}
                                        <button type="button" class="btn btn-danger btn-sm me-2" data-toggle="modal"
                                            data-target="#updatepreviousjoiningletter"
                                            id="updatenewpreviousjoiningletter">
                                            <i class="bi bi-upload"></i>
                                        </button>
                                        {% else %}
                                        <div class="badge bg-danger">Not Available</div>
                                        {% endif %}
                                        {% endif %}
                                    </div>
                                </div>
                                <div class="col-12 col-md-6 mb-2 d-flex justify-content-between">
                                    <div class="d-flex align-items-center">
                                        <h6 class="mb-0">Bachelor Degree</h6>
                                    </div>
                                    <div>
                                        {% if onboarding_document.c_degree %}
                                        <a href="{{ onboarding_document.c_degree.url }}" target="_blank"
                                            class="btn btn-sm custom-button"><i class="bi bi-eye btn-sm"></i></a>
                                        {% if department == 'HR' or department == 'Admin' %}
                                        <button type="button" class="btn btn-sm btn-success me-2" data-toggle="modal"
                                            data-target="#updatedegree" id="updatenewdegree">
                                            <i class="bi bi-pencil-square"></i>
                                        </button>
                                        {% else %}
                                        {% endif %}
                                        {% else %}
                                        {% if department == 'HR' or department == 'Admin' %}
                                        <button type="button" class="btn btn-danger btn-sm me-2" data-toggle="modal"
                                            data-target="#updatedegree" id="updatenewdegree">
                                            <i class="bi bi-upload"></i>
                                        </button>
                                        {% else %}
                                        <div class="badge bg-danger">Not Available</div>
                                        {% endif %}
                                        {% endif %}
                                    </div>
                                </div>
                                <div class="col-12 col-md-6 mb-2 d-flex justify-content-between">
                                    <div class="d-flex align-items-center">
                                        <h6 class="mb-0">Master Degree</h6>
                                    </div>
                                    <div>
                                        {% if onboarding_document.c_masters %}
                                        <a href="{{ onboarding_document.c_masters.url }}" target="_blank"
                                            class="btn btn-sm custom-button"><i class="bi bi-eye btn-sm"></i></a>
                                        {% if department == 'HR' or department == 'Admin' %}
                                        <button type="button" class="btn btn-sm btn-success me-2" data-toggle="modal"
                                            data-target="#updatemasters" id="updatenewmasters">
                                            <i class="bi bi-pencil-square"></i>
                                        </button>
                                        {% else %}
                                        {% endif %}
                                        {% else %}
                                        {% if department == 'HR' or department == 'Admin' %}
                                        <button type="button" class="btn btn-danger btn-sm me-2" data-toggle="modal"
                                            data-target="#updatemasters" id="updatenewmasters">
                                            <i class="bi bi-upload"></i>
                                        </button>
                                        {% else %}
                                        <div class="badge bg-danger">Not Available</div>
                                        {% endif %}
                                        {% endif %}
                                    </div>
                                </div>
                                <div class="col-12 col-md-6 mb-2 d-flex justify-content-between">
                                    <div class="d-flex align-items-center">
                                        <h6 class="mb-0">HSC Marksheet</h6>
                                    </div>
                                    <div>
                                        {% if onboarding_document.c_HSC %}
                                        <a href="{{ onboarding_document.c_HSC.url }}" target="_blank"
                                            class="btn btn-sm custom-button"><i class="bi bi-eye btn-sm"></i></a>
                                        {% if department == 'HR' or department == 'Admin' %}
                                        <button type="button" class="btn btn-sm btn-success me-2" data-toggle="modal"
                                            data-target="#updatehsc" id="updatenewhsc">
                                            <i class="bi bi-pencil-square"></i>
                                        </button>
                                        {% else %}
                                        {% endif %}
                                        {% else %}
                                        {% if department == 'HR' or department == 'Admin' %}
                                        <button type="button" class="btn btn-danger btn-sm me-2" data-toggle="modal"
                                            data-target="#updatehsc" id="updatenewhsc">
                                            <i class="bi bi-upload"></i>
                                        </button>
                                        {% else %}
                                        <div class="badge bg-danger">Not Available</div>
                                        {% endif %}
                                        {% endif %}
                                    </div>
                                </div>
                                <div class="col-12 col-md-6 mb-2 d-flex justify-content-between">
                                    <div class="d-flex align-items-center">
                                        <h6 class="mb-0">SSC Marksheet</h6>
                                    </div>
                                    <div>
                                        {% if onboarding_document.c_SSC %}
                                        <a href="{{ onboarding_document.c_SSC.url }}" target="_blank"
                                            class="btn btn-sm custom-button"><i class="bi bi-eye btn-sm"></i></a>
                                        {% if department == 'HR' or department == 'Admin' %}
                                        <button type="button" class="btn btn-sm btn-success me-2" data-toggle="modal"
                                            data-target="#updatessc" id="updatenewssc">
                                            <i class="bi bi-pencil-square"></i>
                                        </button>
                                        {% else %}
                                        {% endif %}
                                        {% else %}
                                        {% if department == 'HR' or department == 'Admin' %}
                                        <button type="button" class=" btn btn-danger btn-sm me-2" data-toggle="modal"
                                            data-target="#updatessc" id="updatenewssc">
                                            <i class="bi bi-upload"></i>
                                        </button>
                                        {% else %}
                                        <div class="badge bg-danger">Not Available</div>
                                        {% endif %}
                                        {% endif %}
                                    </div>
                                </div>
                                <div class="col-12 col-md-6 mb-2 d-flex justify-content-between">
                                    <div class="d-flex align-items-center">
                                        <h6 class="mb-0">Other Documents</h6>
                                    </div>
                                    <div>
                                        {% if onboarding_document.c_otherCertificate %}
                                        <a href="{{ onboarding_document.c_otherCertificate.url }}" target="_blank"
                                            class="btn btn-sm custom-button"><i class="bi bi-eye btn-sm"></i></a>
                                        {% if department == 'HR' or department == 'Admin' %}
                                        <button type="button" class="btn btn-sm btn-success me-2" data-toggle="modal"
                                            data-target="#updateothercertificate" id="updatenewothercertificate">
                                            <i class="bi bi-pencil-square"></i>
                                        </button>
                                        {% else %}
                                        {% endif %}
                                        {% else %}
                                        {% if department == 'HR' or department == 'Admin' %}
                                        <button type="button" class=" btn btn-danger btn-sm me-2" data-toggle="modal"
                                            data-target="#updateothercertificate" id="updatenewothercertificate">
                                            <i class="bi bi-upload"></i>
                                        </button>
                                        {% else %}
                                        <div class="badge bg-danger">Not Available</div>
                                        {% endif %}
                                        {% endif %}
                                    </div>
                                </div>
                                {% endfor %}
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="tab-pane fade" id="payroll-tab-pane" role="tabpanel" aria-labelledby="payroll-tab" tabindex="0">
            <div class="card">
                <div class="card-body">
                    <form id="payrollInfoForm" method="POST" action="{% url 'hr:update_payroll_info' emp_data.emp_id %}"
                        enctype="multipart/form-data">
                        {% csrf_token %}
                        <div class="p-1 p-md-1">
                            <div class="row p-2">
                                <div class="col-12 col-md-4 d-flex align-items-center mb-2">
                                    <label class="form-label mb-0  w-50 mb-0">Payroll id</label>
                                    <input type="text" class="form-control form-control-sm border-1 " disabled
                                        value="{{ payroll_data.payroll_id }}" />
                                </div>
                                <div class="col-12 col-md-4 d-flex  align-items-center mb-2">
                                    <label class="form-label mb-0 w-50 mb-0"> Emp id</label>
                                    <input type="text" class="form-control form-control-sm border-1 " disabled
                                         value="{{emp_data.emp_id}}" />
                                </div>
                                <div class="col-12 col-md-4 d-flex  align-items-center mb-2">
                                    <label class="form-label mb-0 w-50 mb-0">Name</label>
                                    <input type="text" class="form-control form-control-sm border-1 " disabled
                                         name="name" value="{{emp_data.name}}" />
                                </div>
                                <div class="col-12 col-md-4 d-flex  align-items-center mb-2">
                                    <label class="form-label mb-0 w-50 mb-0"> Email</label>
                                    <input type="email" class="form-control form-control-sm border-1 " disabled
                                     value="{{emp_data.email}}" />
                                </div>

                                <div class="col-12 col-md-4 d-flex align-items-center mb-2">
                                    <label class="form-label mb-0 w-50 mb-0">Department</label>
                                    <input type="text" class="form-control form-control-sm " disabled 
                                     value="{{emp_data.department}}" />
                                </div>
                                <div class="col-12 col-md-4 d-flex align-items-center mb-2">
                                    <label class="form-label mb-0 w-50 mb-0">Designation</label>
                                    <input type="text" class="form-control form-control-sm  " disabled
                                        value="{{emp_data.designation}}" />
                                </div>
                                <div class="col-12 col-md-4 d-flex align-items-center mb-2">
                                    <label class="form-label mb-0 w-50 mb-0">Branch location</label>
                                    <input type="text" class="form-control form-control-sm " disabled
                                         value="{{emp_data.company_branch|default:''}}" />
                                </div>
                                <div class="col-12 col-md-4 d-flex align-items-center mb-2">
                                    <label class="form-label mb-0 w-50 mb-0">Joining Date </label>
                                    <input type="date" class="form-control form-control-sm " name="doj" disabled
                                        value="{{emp_data.doj|date:'Y-m-d'}}" />
                                </div>
                                <div class="col-12 col-md-4 d-flex align-items-center">
                                    <label class="form-label mb-0 w-50 mb-0">Pancard</label>
                                    <input type="text" class="form-control form-control-sm" name="pancard_number"
                                        disabled value="{{emp_data.pancard_no}}" />
                                </div>
                                <div class="col-12 col-md-4 d-flex  align-items-center mb-2">
                                    <label class="form-label mb-0 w-50"> Office Email</label>
                                    <input type="email" class="form-control form-control-sm border-1 "
                                         id="office_email" name="office_email"
                                        value="{{emp_data.office_email|default:'' }}" disabled required />
                                </div>
                                <div class="col-12 col-md-4 d-flex align-items-center">
                                    <label class="form-label mb-0 w-50 mb-0">Applicable from</label>
                                    <input type="date" class="form-control form-control-sm" id="applicable_from"
                                        name="applicable_from" value="{{payroll_data.applicable_from|date:'Y-m-d'}}"
                                        disabled />
                                </div>
                            </div>
                            <div class="row p-2 d-flex">
                                <div class="col-12">
                                    {% if department == 'HR' or department == 'Admin' %}
                                    <div class="d-flex justify-content-end align-items-center  mb-2">
                                        <button type="button" id="editpayrollInfoBtn"
                                            class="btn custom-button btn-sm">Edit</button>
                                    </div>
                                    {% else %}
                                    {% endif %}
                                </div>
                                <div class="col-12 col-md-6 overflow-hidden">
                                    <div class="table-responsive salpayrolltable-wrapper">
                                        <table id="salparolltab1" class="table  table-sm">
                                            <thead class="border-bottom-0">
                                                <tr>
                                                    <th scope="col" class="px-3">Income Head</th>
                                                    <th scope="col" class="text-end">Monthly Amount </th>
                                                </tr>
                                            </thead>
                                            <tbody class="">
                                                <tr>
                                                    <td scope="col">
                                                        <div class="">
                                                            <label class="form-label mb-0 px-3"> CTC</label>
                                                        </div>
                                                    </td>
                                                    <td scope="col">
                                                        <div class="">
                                                            <input type="number"
                                                                class="form-control form-control-sm border-0 text-primary text-end"
                                                                id="ctcInput" name="ctc"
                                                                value="{{payroll_data.ctc }}"
                                                                oninput="calculateSalary()" disabled />
                                                        </div>
                                                    </td>
                                                </tr>
                                                <tr>
                                                    <td scope="col">
                                                        <div class="">
                                                            <label class="form-label mb-0 px-3">Basic</label>
                                                        </div>
                                                    </td>
                                                    <td scope="col">
                                                        <div class="">
                                                            <input type="number"
                                                                class="form-control form-control-sm border-0 text-end "
                                                                id="basicAmount"  name="basic" disabled
                                                                readonly />
                                                        </div>
                                                    </td>
                                                </tr>
                                                <tr>
                                                    <td scope="col">
                                                        <div class="">
                                                            <label class="form-label mb-0 px-3">HRA</label>
                                                        </div>
                                                    </td>
                                                    <td scope="col">
                                                        <div class="">
                                                            <input type="number"
                                                                class="form-control form-control-sm border-0 text-end"
                                                                id="hraAmount" name="hra" disabled
                                                                readonly />
                                                        </div>
                                                    </td>
                                                </tr>
                                                <tr>
                                                    <td scope="col">
                                                        <div class="">
                                                            <label class="form-label mb-0 px-3">Conviction
                                                                Allowance</label>
                                                        </div>
                                                    </td>
                                                    <td scope="col">
                                                        <div class="">
                                                            <input type="number"
                                                                class="form-control form-control-sm border-0 text-end"
                                                                id="ca" name="ca" disabled readonly>
                                                        </div>
                                                    </td>
                                                </tr>
                                                <tr>
                                                    <td scope="col">
                                                        <div class="">
                                                            <label class="form-label mb-0 px-3">Special
                                                                Allowance</label>
                                                        </div>
                                                    </td>
                                                    <td scope="col">
                                                        <div class="">
                                                            <input type="number"
                                                                class="form-control form-control-sm border-0 text-end"
                                                                id="sa" name="sa" disabled readonly />
                                                        </div>
                                                    </td>
                                                </tr>
                                                <tr>
                                                    <td>
                                                        <div class="">
                                                            <label class="form-label mb-0 px-3">Gross Amount</label>
                                                        </div>
                                                    </td>
                                                    <td>
                                                        <div class="">
                                                            <input type="number"
                                                                class="form-control form-control-sm border-0 readonly text-danger text-end"
                                                                id="grossAmount" name="gross_salary"
                                                                disabled readonly />
                                                        </div>
                                                    </td>
                                                </tr>
                                            </tbody>
                                        </table>
                                    </div>
                                </div>
                                <div class="col-12 col-md-6 overflow-hidden">
                                    <div class="table-responsive salpayrolltable-wrapper">
                                        <table id="salparolltab2" class="table table-sm">
                                            <thead class="border-bottom-0">
                                                <tr>
                                                    <th scope="col" class="px-3">Deduction Head</th>
                                                    <th scope="col" class="text-end">Employer's Contributions</th>
                                                </tr>
                                            </thead>
                                            <tbody class="">
                                                <tr>
                                                    <td scope="col">
                                                        <div class="">
                                                            <label class="form-label mb-0 px-3">Employer PF</label>
                                                        </div>
                                                    </td>

                                                    <td scope="col">
                                                        <div class="">
                                                            <input type="number"
                                                                class="form-control form-control-sm border-0 text-end"
                                                                id="employerPF" name="employer_pf"
                                                                disabled readonly />
                                                        </div>
                                                    </td>
                                                </tr>
                                                <tr>
                                                    <td scope="col">
                                                        <div class="">
                                                            <label class="form-label mb-0 px-3">Employer ESIC</label>
                                                        </div>
                                                    </td>
                                                    <td scope="col">
                                                        <div class="">
                                                            <input type="number"
                                                                class="form-control form-control-sm border-0 text-end"
                                                                id="employerESIC" name="employer_esic"
                                                                disabled readonly />
                                                        </div>
                                                    </td>
                                                </tr>
                                                <tr>
                                                    <td scope="col">
                                                        <div class="">
                                                            <label class="form-label mb-0 px-3">P.T</label>
                                                        </div>
                                                    </td>
                                                    <td scope="col">
                                                        <div class="">
                                                            <input type="number"
                                                                class="form-control form-control-sm border-0 text-end"
                                                                id="professionalTax" name="pt" disabled
                                                                readonly />
                                                        </div>
                                                    </td>
                                                </tr>
                                                <tr>
                                                    <td scope="col">
                                                        <div class="">
                                                            <label class="form-label mb-0 px-3">Employee PF</label>
                                                        </div>
                                                        </th>
                                                    <td scope="col">
                                                        <div class="">
                                                            <input type="number"
                                                                class="form-control form-control-sm border-0 text-end"
                                                                id="employeePF" name="employee_pf"
                                                                disabled readonly />
                                                        </div>
                                                    </td>
                                                </tr>
                                                <tr>
                                                    <td scope="col">
                                                        <div class="">
                                                            <label class="form-label mb-0 px-3">Employee ESIC</label>
                                                        </div>
                                                        </th>
                                                    <td scope="col">
                                                        <div class="">
                                                            <input type="number"
                                                                class="form-control form-control-sm border-0 text-end"
                                                                id="employeeESIC" name="employee_esic"
                                                                disabled readonly />
                                                        </div>
                                                    </td>
                                                </tr>
                                            </tbody>
                                        </table>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="row  ">
                            <div class="col-12 col-md-3 d-flex justify-content-center align-items-center p-2">
                                <label for="newCTC" class="form-label mb-0 text-nowrap me-2 mb-0">Monthly CTC:</label>
                                <input type="number" class="form-control form-control-sm" id="newCTC" name="monthly_ctc" disabled />
                            </div>
                            <div class="col-12 col-md-3 d-flex justify-content-center align-items-center p-2">
                                <label for="newCTC" class="form-label mb-0 text-nowrap me-2 mb-0">Yearly CTC:</label>
                                <input type="text" class="form-control form-control-sm" id="yearlyCTC" name="yearlyctc" disabled />
                            </div>
                            <div class="col-12 col-md-3 d-flex  justify-content-center align-items-center p-2 mb-2">
                                <label for="" class="form-label mb-0  text-nowrap me-2 mb-0">Total
                                    Deduction</label>
                                <input type="number" class="form-control form-control-sm" id="totaldeduction" name="total_deduction" disabled>
                            </div>
                            <div class="col-12 col-md-3 d-flex justify-content-center align-items-center p-2 mb-2">
                                <label for="netPay" class="form-label mb-0 text-nowrap me-2 mb-0">Net Pay:</label>
                                <input type="number" class="form-control form-control-sm" id="netPay"
                                    name="net_salary" disabled />
                            </div>
                            <div class="col-12 col-md-3 d-flex  justify-content-center align-items-center p-2 mb-2">
                                <label for="" class="form-label mb-0 text-nowrap me-2 mb-0">Payment Mode</label>
                                <select class="form-select" id="paymentmode" name="paymentmode" disabled>
                                    <option value="{{payroll_data.paymentmode }}" selected>
                                        {{payroll_data.paymentmode }}
                                    </option>
                                    <option value="Bank Transfer"> Bank Transfer </option>
                                    <option value="Cheque"> Cheque </option>
                                    <option value="Cash"> Cash </option>
                                </select>
                            </div>
                        </div>

                        {% if department == 'HR' or department == 'Admin' %}
                        <div class="d-flex justify-content-end align-items-center mb-2">
                            <button type="submit" id="savepayrollInfoBtn" class="btn custom-button btn-sm load-button" disabled>Save
                                Changes</button>
                                <div id="loader1" class="lds-ring loader" style="display: none;">
                                <div></div><div></div> <div></div> <div></div>
                                </div>
                        </div> 
                        {% else %}
                        {% endif %}
                    </form>
                </div>
            </div>

        </div>
        <div class="tab-pane fade" id="permission-tab-pane" role="tabpanel" aria-labelledby="permission-tab"
            tabindex="0">
            <div class="card">
                <div class="card-body">
                    <form id="permissionInfoForm" method="POST"
                        action="{% url 'hr:update_permission_info' emp_data.emp_id %}" enctype="multipart/form-data">
                        {% csrf_token %}
                        <div class="">
                            <div class="row">
                                <div class="col-12 mb-3  border-bottom d-flex justify-content-between flex-wrap" >
                                    <h5>Permission Details</h5>
                                    {% if department == 'HR' or department == 'Admin' %}
                                    <div class="d-flex justify-content-end align-items-center mb-2">
                                        <button type="button" id="editpermissionInfoBtn"
                                            class="btn custom-button btn-sm">Edit</button>
                                    </div>
                                    {% else %}
                                    {% endif %}
                                </div>
                                <div class="col-12 col-md-6 mb-3">
                                    
                                    <div class="col-12 mb-2">
                                        <input type="checkbox" class="form-check-input" id="reporting_take"
                                            name="reporting_take" {% if emp_data.reporting_take %}checked{% endif %} disabled>
                                        <label for="reporting_take">Can take Reporting of Employee</label>
                                    </div>
                                </div>

                            </div>
                            {% if department == 'HR' or department == 'Admin' %}
                            <div class="d-flex justify-content-start align-items-center mb-3">
                                <button type="submit" id="savepermissionInfoBtn" class="btn custom-button btn-sm"
                                    disabled>Save Changes
                                </button>
                            </div>
                            {% else %}
                            {% endif %}
                        </div>
                    </form>
                </div>
            </div>
        </div>
        <div class="tab-pane fade" id="other-tab-pane" role="tabpanel" aria-labelledby="other-tab" tabindex="0">
            <div class="card">
                <div class="card-body">
                    <div class="p-1 p-md-1">
                        <div class="row w-100 mb-md-3">
                            <div class="col-12 mb-3  border-bottom">
                                <h5>Other</h5>
                            </div>
                            <div class="col-12 col-md-3 mb-3">
                                {% comment %} {% if request.session.department != 'HR' and not
                                request.user.is_superuser %} {% endcomment %}
                                {% if resign_applied %}
                                {# If resignation is already applied, display a label #}
                                <label class="text-danger">Resignation already applied </label>
                                {% else %}
                                {# If resignation is not applied, display the button #}
                                <button type="button" class="btn btn-danger btn-sm" data-bs-toggle="modal"
                                    data-bs-target="#ResignationModal" id="applyforresign">
                                    Apply for Resignation
                                </button>
                                {% endif %}
                            </div>
                            <div class="row w-100 mb-md-3">
                                <div class="tablewrapper bg-primarylight w-100">
                                    <h5>Resign Status</h5>
                                    <div class="table-responsive w-100">
                                        <table class="table DataTable w-100 " id="resignDataTable">
                                            <thead>
                                                <tr>
                                                    <th scope="col">Employee ID</th>
                                                    <th scope="col">Resign Date</th>
                                                    <th scope="col">Last Date</th>
                                                    <th scope="col">Resign Reason</th>
                                                    <th scope="col">Status</th>
                                                    <th scope="col">Action</th>
                                                </tr>
                                            </thead>
                                            <tbody>
                                                {% for resign_data in resign_data %}
                                                <tr>
                                                    <td>{{ resign_data.employee.emp_id}}</td>
                                                    <td>{{ resign_data.resign_date |date:'d-m-Y'}}</td>
                                                    <td>{{ resign_data.last_date |date:'d-m-Y' }}</td>
                                                    <td>{{ resign_data.resign_reason }}</td>
                                                    <td>{{ resign_data.get_resign_status_display }}</td>
                                                    <td> {% if resign_data.resign_status == 2 %}
                                                        <button class="btn btn-sm btn-danger me-2 delete-resign_list"
                                                        data-resign_list-id="{{ resign_data.id }}">
                                                        <i class="bi bi-trash"></i>
                                                    </button>
                                                        {% else %}
                                                        No action Needed.
                                                        {% endif %}
                                                    </td>
                                                </tr>
                                                {% endfor %}
                                            </tbody>
                                        </table>
                                    </div>
                                </div>
                            </div>
                            <div class="col-12 col-md-6"></div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <div class="tab-pane fade" id="attendance-tab-pane" role="tabpanel" aria-labelledby="other-tab" tabindex="0">
            <div class="d-flex justify-content-between align-items-center flex-wrap w-100">
                <div class="d-flex col-12 col-md-12 border-bottom mt-2 mb-2 ">
                    <p class="me-3 mb-2">attendance Of <span class="fw-bolder"> {{ emp_data }} </span></p>
                </div>
                <div class="w-100 ">
                    <div class="col-12 col-md-12 overflow-hidden">
                        <!-- calender start-->
                   
                    </div>
                    <div class="col-12 col-md-5 d-flex justify-content-center align-items-center">
                        <div class=" w-100 d-flex flex-wrap align-items-center justify-content-center">
                        </div>
                    </div>
                    <div class="col-12 mt-2">
                        <div class="card ">
                            <div class="card-body">
                            <div class="tablewrapper W-100">
                                <h5 class="mt-3">Daily Attendance</h5>
                                <div class="table-responsive">
                                    <table class="table dataTable" id="DailyAttendanceDataTable">
                                        <thead>
                                            <tr>
                                                <th scope="col">#</th>
                                                <th scope="col">Date</th>
                                                <th scope="col">ClockIn Time</th>
                                                <th scope="col">ClockOut Time</th>
                                                <th scope="col">Full day</th>
                                                <th scope="col">Half day</th>
                                                <th scope="col">Absent</th>
                                                <th scope="col">On leave</th>
                                                {% if department == 'HR' or department == 'Admin' %}
                                                <th scope="col">Action</th>
                                                {% endif %}
                                            </tr>
                                        </thead>
                                        <tbody>
                                            {% for attendance in attendances %}
                                            <tr>
                                                <td>{{ forloop.counter }}</td>
                                                <td>{{ attendance.date|date:'d-m-Y' }}</td>
                                                <td>{{ attendance.clock_in }}</td>
                                                <td>{{ attendance.clock_out }}</td>
                                                <td>
                                                    {% if attendance.is_full_day %}
                                                    <i class="bi bi-check-circle-fill text-success"></i>
                                                    {% else %}
                                                    <i class="bi bi-x-circle-fill text-danger"></i>
                                                    {% endif %}
                                                </td>
                                                <td>
                                                    {% if attendance.is_half_day %}
                                                    <i class="bi bi-check-circle-fill text-success"></i>
                                                    {% else %}
                                                    <i class="bi bi-x-circle-fill text-danger"></i>
                                                    {% endif %}
                                                </td>
                                                <td>
                                                    {% if attendance.is_absent %}
                                                    <i class="bi bi-check-circle-fill text-success"></i>
                                                    {% else %}
                                                    <i class="bi bi-x-circle-fill text-danger"></i>
                                                    {% endif %}
                                                </td>
                                                <td>
                                                    {% if attendance.is_on_leave %}
                                                    <i class="bi bi-check-circle-fill text-success"></i>
                                                    {% else %}
                                                    <i class="bi bi-x-circle-fill text-danger"></i>
                                                    {% endif %}
                                                </td>
                                                {% if department == 'HR' or department == 'Admin' %}
                                                <td>
                                                    <button type="button" class="btn btn-sm btn-success me-2 edit-attendance-btn" data-bs-toggle="modal"
                                                    data-bs-target="#attendancemodal" data-employee-id="{{ attendance.employee.emp_id }}" data-date="{{ attendance.date }}">
                                                    <i class="bi bi-pencil-square"></i>
                                                </button>
                                                </td>
                                                {% endif %}
                                            </tr>
                                            {% endfor %}
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="col-12">
                    <div class=" card mt-2 p-2">
                        <div class="card-body">
                    <div class="tablewrapper ">
                        <h5 class="mt-3">Leave Status</h5>
                        <div class="table-responsive">
                            <table class=" overflow-auto" id="leaveDataTable">
                                <thead>
                                    <tr>
                                        <th scope="col">#</th>
                                        <th scope="col">From date</th>
                                        <th scope="col">To date</th>
                                        <th scope="col">Total leave days</th>
                                        <th scope="col">Status</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    {% for leave in leavedata %}
                                    <tr>
                                        <td>{{forloop.counter }}</td>
                                        <td>{{leave.leave_from_date|date:'d-m-Y'}}</td>
                                        <td>{{leave.leave_to_date|date:'d-m-Y'}}</td>
                                        <td>{{ leave|calculate_paid_leave_days }} Days</td>
                                        <td>{% if leave.leave_status == 1 %}
                                            Approved
                                            {% elif leave.leave_status == 2 %}
                                            Pending
                                            {% elif leave.leave_status == 3 %}
                                            Rejected
                                            {% comment %} {% else %} {% endcomment %}
                                            {% endif %}
                                        </td>
                                    </tr>
                                    {% endfor %}
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>
        </div>
            <div class="col-12 mt-2">
                <div class="card ">
                    <div class="card-body">
                    <div class="tablewrapper W-100">
                        <h5 class="mt-3">Regularization</h5>
                        <div class="table-responsive">
                            <table class="dataTable" id="RegularizationDataTable">
                                <thead>
                                    <tr>
                                        <th scope="col" class="sorting sorting_asc" tabindex="0"
                                        aria-controls="RegularizationDataTable" rowspan="1" colspan="1"
                                        aria-sort="ascending" aria-label="#: activate to sort column descending"
                                        style="width: 0px;">#</th>
                                   
                                        <th scope="col" class="sorting" tabindex="0" aria-controls="RegularizationDataTable"
                                        rowspan="1" colspan="1"
                                        aria-label="Employee Name: activate to sort column ascending" style="width: 0px;">
                                        Date</th>
                                    <th scope="col" class="sorting" tabindex="0" aria-controls="RegularizationDataTable"
                                        rowspan="1" colspan="1" aria-label="ClockIn Time: activate to sort column ascending"
                                        style="width: 0px;">ClockIn Time</th>
                                    <th scope="col" class="sorting" tabindex="0" aria-controls="RegularizationDataTable"
                                        rowspan="1" colspan="1" aria-label="ClockOut Time: activate to sort column ascending"
                                        style="width: 0px;">ClockOut Time</th>
                                    <th scope="col" class="sorting" tabindex="0" aria-controls="RegularizationDataTable"
                                        rowspan="1" colspan="1" aria-label=": activate to sort column ascending"
                                        style="width: 0px;" >Remarks</th>
                                    <th scope="col" class="sorting" tabindex="0" aria-controls="RegularizationDataTable"
                                        rowspan="1" colspan="1" aria-label=": activate to sort column ascending"
                                        style="width: 0px;">Status</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    {% for regularization in employee_regularization %}
                                    <tr>
                                        <td>{{ forloop.counter }}</td>
                                            <td>{{ regularization.date|date:'d-m-Y' }}</td>
                                            <td>{{ regularization.requested_clock_in }}</td>
                                            <td>{{ regularization.requested_clock_out }}</td>
                                            <td>
                                                <textarea class="form-control form-control-sm" name="remarks" rows="1" disabled >{{ regularization.remarks|default:''}}</textarea>
                                            </td>
                                            <td>
                                            {% if regularization.regularization_approved %}
                                                success
                                            {% else %}
                                                pending
                                            {% endif %}
                                               
                                            </td>
                                    </tr>
                                    {% endfor %}
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>
        </div>
     </div>
    </div>
            </div>
        </div>
        <div class="tab-pane fade" id="salary-tab-pane" role="tabpanel" aria-labelledby="salary-tab" tabindex="0">
                <div class="card">
                    <div class="card-body">
                        <div class="d-flex justify-content-start align-items-center w-100 p-4 salarysliptable">
                            <div class="table-responsive w-100">
                                <div>
                                    <h5 class="me-3 mb-0">All Monthly Salary Slips</h5>
                                </div>
                                <div class="mb-3 col-6 col-md-3">
                                    <label class="form-label mb-0" for="selectedMonth">Select Month:</label>
                                    <select class="form-select form-select-sm" id="selectedMonth" name="selectedMonth">
                                        {% for salary in all_monthly_salaries %}
                                        <option value="{{ salary.id }}">{{ salary.month }} {{ salary.year }}</option>
                                        {% endfor %}
                                    </select>
                                    <button class="btn custom-button m-2"
                                        onclick="downloadSelectedSalarySlip()">Download</button>
                                    <button class="btn custom-button m-2" onclick="sentMailSelectedSalarySlip()">Send as
                                        Mail</button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
        </div>
    </div>  
</div>

<!-- Modal -->
<div class="modal fade" id="popupfordelete" tabindex="-1" aria-labelledby="popupfordeleteModalLabel"
    data-bs-backdrop="static" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h1 class="modal-title fs-5" id="popupfordeleteModalLabel">Delete Resign</h1>
                <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal"
                    aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <h6>Are you sure you want to cancel Your Resign?</h6>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                <button type="submit" class="btn custom-button btn-sm" id="confirmDelete">Confirm</button>
                {% comment %} <input type="text" id="confirmDeletehidden" value="{{emp_id}}" /> {% endcomment %}
            </div>
        </div>
    </div>
</div>
<!-- Modal Document upload -->
<!-- resignation modal  -->
<div class="modal fade" id="ResignationModal" tabindex="-1" aria-labelledby="ResignationModalLabel" aria-hidden="true">
    <div class="modal-dialog  modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <h1 class="modal-title fs-5" id="ResignationModal">Resignation</h1>
                <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal"
                    aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <form method="post" action="{% url 'employee:apply_resign' employee_id=emp_data.emp_id %}">
                    {% csrf_token %}

                    <div class="row">
                        <div class="col-12 col-md-6">
                            <div class="mb-3">
                                <label for="exampleInputEmail1"
                                    class="form-label mb-0 form-control-sm mb-0 ps-0">Employee
                                    Name </label>
                                <input type="text" class="form-control form-control-sm" disabled
                                    value="{{emp_data.name}}" >
                            </div>
                        </div>
                        <div class="col-12 col-md-6">
                            <div class="mb-3">
                                <label for="exampleInputEmail1"
                                    class="form-label mb-0 form-control-sm mb-0 ps-0">Department</label>
                                <input type="text" class="form-control form-control-sm" disabled
                                    value="{{emp_data.department}}">
                            </div>
                        </div>
                        <div class="col-12 col-md-6">
                            <div class="mb-3">
                                <label for="exampleInputEmail1"
                                    class="form-label mb-0 form-control-sm mb-0 ps-0">Designation</label>
                                <input type="text" class="form-control form-control-sm" disabled
                                    value="{{emp_data.designation}}" >

                            </div>
                        </div>
                        <div class="col-12 col-md-6">
                            <div class="mb-3">
                                <label for="exampleInputEmail1" class="form-label mb-0 form-control-sm mb-0 ps-0">Date
                                    of
                                    Resign</label>
                                <input type="date" class="form-control form-control-sm" id="resign_date"
                                    name="resign_date" required >
                            </div>
                        </div>
                        <script>
                            document.addEventListener('DOMContentLoaded', function() {
                                var today = new Date().toISOString().split('T')[0];
                                document.getElementById('resign_date').value = today;
                            });
                        </script>
                        <div class="col-12 col-md-6">
                            <div class="mb-3">
                                <label for="exampleInputEmail1"
                                    class="form-label mb-0 form-control-sm mb-0 ps-0">Reason</label>
                                <textarea class="form-control" id="resign_reason" name="resign_reason"
                                    rows="2"></textarea>

                            </div>
                        </div>
                    </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary btn-sm" data-bs-dismiss="modal">Close</button>
                <button type="submit" id="submitLeave" class="btn custom-button btn-sm">Submit</button>
            </div>
            </form>
        </div>
    </div>
</div>
<!-- Modal for uploading a new image -->
<div class="modal fade" id="updateimg" tabindex="-1" role="dialog" aria-labelledby="uploadResumeModalLabel"
    aria-hidden="true">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            {% for onboarding_document in onboarding_documents %}
            <!-- Your HTML code for each onboarding document -->
            <form id="updatepsimg" action="{% url 'hr:updateimg' onboarding_document.pk %}" method="post"
                enctype="multipart/form-data">
                <!-- Your form fields -->

                {% csrf_token %}
                <div class="modal-header">
                    <h5 class="modal-title" id="uploadPsimgModalLabel">Upload Photo</h5>
                    <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal"
                        aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <div class="form-group">
                        <label for="">Choose File</label>
                        <input type="file" name="c_psimg" class="form-control-file form-control-sm">
                        <input type="hidden" id="candidateId" value="{{ onboarding_document.pk }}">
                        <input type="hidden" id="newResumeId" value="{{resume.candidate_id}}" />
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary close btn-sm" data-dismiss="modal">Close</button>
                    <button type="submit" class="btn custom-button btn-sm">Upload</button>
                </div>
            </form>
            {% endfor %}
        </div>
    </div>
</div>
<!-- Modal for uploading a new aadhar -->
<div class="modal fade" id="updateaadhaar" tabindex="-1" role="dialog" aria-labelledby="uploadResumeModalLabel"
    aria-hidden="true">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            {% for onboarding_document in onboarding_documents %}
            <!-- Your HTML code for each onboarding document -->
            <form id="updatepsaadhaar" action="{% url 'hr:updateaadhar' onboarding_document.pk %}" method="post"
                enctype="multipart/form-data">
                <!-- Your form fields -->
                {% csrf_token %}
                <div class="modal-header">
                    <h5 class="modal-title" id="uploadPsimgModalLabel">Upload Aadhaar</h5>
                    <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal"
                        aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <div class="form-group">
                        <label for="">Choose File</label>
                        <input type="file" name="c_adhar" class="form-control-file form-control-sm">
                        <input type="hidden" id="candidateId" value="{{ onboarding_document.pk }}">
                        <input type="hidden" id="newResumeId" value="{{resume.candidate_id}}" />
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary close btn-sm" data-dismiss="modal">Close</button>
                    <button type="submit" class="btn custom-button btn-sm">Upload</button>
                </div>
            </form>
            {% endfor %}
        </div>
    </div>
</div>
<!-- Modal for uploading a new PAN -->
<div class="modal fade" id="updatepan" tabindex="-1" role="dialog" aria-labelledby="uploadResumeModalLabel"
    aria-hidden="true">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            {% for onboarding_document in onboarding_documents %}
            <!-- Your HTML code for each onboarding document -->
            <form id="updatepspan" action="{% url 'hr:updatepan' onboarding_document.pk %}" method="post"
                enctype="multipart/form-data">
                <!-- Your form fields -->
                {% csrf_token %}
                <div class="modal-header">
                    <h5 class="modal-title" id="uploadPspanModalLabel">Upload Pan Card</h5>
                    <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal"
                        aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <div class="form-group">
                        <label for="">Choose File</label>
                        <input type="file" name="c_pan" class="form-control-file form-control-sm">
                        <input type="hidden" id="candidateId" value="{{ onboarding_document.pk }}">
                        <input type="hidden" id="newpanId" value="{{resume.candidate_id}}" />
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary close btn-sm" data-dismiss="modal">Close</button>
                    <button type="submit" class="btn custom-button btn-sm">Upload</button>
                </div>
            </form>
            {% endfor %}
        </div>
    </div>
</div>
<!-- Modal for uploading a new bank details -->
<div class="modal fade" id="updatebankdetails" tabindex="-1" role="dialog" aria-labelledby="uploadResumeModalLabel"
    aria-hidden="true">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            {% for onboarding_document in onboarding_documents %}
            <!-- Your HTML code for each onboarding document -->
            <form id="updatepsbankdetails" action="{% url 'hr:updatebankdetails' onboarding_document.pk %}"
                method="post" enctype="multipart/form-data">
                <!-- Your form fields -->
                {% csrf_token %}
                <div class="modal-header">
                    <h5 class="modal-title" id="uploadPsimgModalLabel">Upload Cancel Chaque</h5>
                    <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal"
                        aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <div class="form-group">
                        <label for="">Choose File</label>
                        <input type="file" name="c_bankDetails" class="form-control-file form-control-sm">
                        <input type="hidden" id="candidateId" value="{{ onboarding_document.pk }}">
                        <input type="hidden" id="newResumeId" value="{{resume.candidate_id}}" />
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary close btn-sm" data-dismiss="modal">Close</button>
                    <button type="submit" class="btn custom-button btn-sm">Upload</button>
                </div>
            </form>
            {% endfor %}
        </div>
    </div>
</div>
<!-- Modal for uploading a new bank statement  -->
<div class="modal fade" id="updatebankstatement" tabindex="-1" role="dialog" aria-labelledby="uploadResumeModalLabel"
    aria-hidden="true">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            {% for onboarding_document in onboarding_documents %}
            <!-- Your HTML code for each onboarding document -->
            <form id="updatepsbankstatement" action="{% url 'hr:updatebankstatement' onboarding_document.pk %}"
                method="post" enctype="multipart/form-data">
                <!-- Your form fields -->
                {% csrf_token %}
                <div class="modal-header">
                    <h5 class="modal-title" id="uploadPsimgModalLabel">Upload Bank Statement</h5>
                    <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal"
                        aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <div class="form-group">
                        <label for="">Choose File</label>
                        <input type="file" name="c_bankStatement" class="form-control-file form-control-sm" />
                        <input type="hidden" id="candidateId" value="{{ onboarding_document.pk }}">
                        <input type="hidden" id="newResumeId" value="{{resume.candidate_id}}" />
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary close btn-sm" data-dismiss="modal">Close</button>
                    <button type="submit" class="btn custom-button btn-sm">Upload</button>
                </div>
            </form>
            {% endfor %}
        </div>
    </div>
</div>
<!-- Modal for uploading a new Salary Slips  -->
<div class="modal fade" id="updatesalaryslips" tabindex="-1" role="dialog" aria-labelledby="uploadResumeModalLabel"
    aria-hidden="true">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            {% for onboarding_document in onboarding_documents %}
            <!-- Your HTML code for each onboarding document -->
            <form id="updatepssalaryslips" action="{% url 'hr:updatesalaryslips' onboarding_document.pk %}"
                method="post" enctype="multipart/form-data">
                <!-- Your form fields -->
                {% csrf_token %}
                <div class="modal-header">
                    <h5 class="modal-title" id="uploadPsimgModalLabel">Upload Salary Slip</h5>
                    <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal"
                        aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <div class="form-group">
                        <label for="">Choose File</label>
                        <input type="file" name="c_salarySlips" class="form-control-file form-control-sm">
                        <input type="hidden" id="candidateId" value="{{ onboarding_document.pk }}">
                        <input type="hidden" id="newResumeId" value="{{resume.candidate_id}}" />
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary close btn-sm" data-dismiss="modal">Close</button>
                    <button type="submit" class="btn custom-button btn-sm">Upload</button>
                </div>
            </form>
            {% endfor %}
        </div>
    </div>
</div>
<!-- Modal for uploading a new Exp Letter -->
<div class="modal fade" id="updateexpletter" tabindex="-1" role="dialog" aria-labelledby="uploadResumeModalLabel"
    aria-hidden="true">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            {% for onboarding_document in onboarding_documents %}
            <!-- Your HTML code for each onboarding document -->
            <form id="updatepsexpletter" action="{% url 'hr:updateexpletter' onboarding_document.pk %}" method="post"
                enctype="multipart/form-data">
                <!-- Your form fields -->
                {% csrf_token %}
                <div class="modal-header">
                    <h5 class="modal-title" id="uploadPsimgModalLabel">Upload Experience Letter</h5>
                    <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal"
                        aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <div class="form-group">
                        <label for="">Choose File</label>
                        <input type="file" name="c_expLetter" class="form-control-file form-control-sm">
                        <input type="hidden" id="candidateId" value="{{ onboarding_document.pk }}">
                        <input type="hidden" id="newResumeId" value="{{resume.candidate_id}}" />
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary close btn-sm" data-dismiss="modal">Close</button>
                    <button type="submit" class="btn custom-button btn-sm">Upload</button>
                </div>
            </form>
            {% endfor %}
        </div>
    </div>
</div>
<!-- Modal for uploading a new Previous Joining Letter -->
<div class="modal fade" id="updatepreviousjoiningletter" tabindex="-1" role="dialog"
    aria-labelledby="uploadResumeModalLabel" aria-hidden="true">
    <div class="modal-dialog" role="document">
        <div class="modal-content">

            {% for onboarding_document in onboarding_documents %}
            <!-- Your HTML code for each onboarding document -->
            <form id="updatepspreviousjoiningletter"
                action="{% url 'hr:updatepreviousjoiningletter' onboarding_document.pk %}" method="post"
                enctype="multipart/form-data">
                <!-- Your form fields -->

                {% csrf_token %}

                <div class="modal-header">
                    <h5 class="modal-title" id="uploadPsimgModalLabel">Upload Previous Joining Letter</h5>
                    <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal"
                        aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <div class="form-group">
                        <label for="">Choose File</label>
                        <input type="file" name="c_previousJoiningLetter"
                            class="form-control-file form-control-sm">
                        <input type="hidden" id="candidateId" value="{{ onboarding_document.pk }}">
                        <input type="hidden" id="newResumeId" value="{{resume.candidate_id}}" />
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary close btn-sm" data-dismiss="modal">Close</button>
                    <button type="submit" class="btn custom-button btn-sm">Upload</button>
                </div>
            </form>
            {% endfor %}
        </div>
    </div>
</div>
<!-- Modal for uploading a new Degree -->
<div class="modal fade" id="updatedegree" tabindex="-1" role="dialog" aria-labelledby="uploadResumeModalLabel"
    aria-hidden="true">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            {% for onboarding_document in onboarding_documents %}
            <!-- Your HTML code for each onboarding document -->
            <form id="updatepsdegree" action="{% url 'hr:updatec_degree' onboarding_document.pk %}" method="post"
                enctype="multipart/form-data">
                <!-- Your form fields -->
                {% csrf_token %}
                <div class="modal-header">
                    <h5 class="modal-title" id="uploadPsimgModalLabel">Upload Bachelor Degree </h5>
                    <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal"
                        aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <div class="form-group">
                        <label for="">Choose File</label>
                        <input type="file" name="c_degree" class="form-control-file form-control-sm">
                        <input type="hidden" id="candidateId" value="{{ onboarding_document.pk }}">
                        <input type="hidden" id="newResumeId" value="{{resume.candidate_id}}" />
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary close btn-sm" data-dismiss="modal">Close</button>
                    <button type="submit" class="btn custom-button btn-sm">Upload</button>
                </div>
            </form>
            {% endfor %}
        </div>
    </div>
</div>
<!-- Modal for uploading a Master -->
<div class="modal fade" id="updatemasters" tabindex="-1" role="dialog" aria-labelledby="uploadResumeModalLabel"
    aria-hidden="true">
    <div class="modal-dialog" role="document">
        <div class="modal-content">

            {% for onboarding_document in onboarding_documents %}
            <!-- Your HTML code for each onboarding document -->
            <form id="updatepsmasters" action="{% url 'hr:updatemasters' onboarding_document.pk %}" method="post"
                enctype="multipart/form-data">
                <!-- Your form fields -->
                {% csrf_token %}
                <div class="modal-header">
                    <h5 class="modal-title" id="uploadPsimgModalLabel">Upload Master Degree</h5>
                    <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal"
                        aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <div class="form-group">
                        <label for="">Choose File</label>
                        <input type="file" name="c_masters" class="form-control-file form-control-sm">
                        <input type="hidden" id="candidateId" value="{{ onboarding_document.pk }}">
                        <input type="hidden" id="newResumeId" value="{{resume.candidate_id}}" />
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary close btn-sm" data-dismiss="modal">Close</button>
                    <button type="submit" class="btn custom-button btn-sm">Upload</button>
                </div>
            </form>
            {% endfor %}
        </div>
    </div>
</div>
<!-- Modal for uploading a HSC -->
<div class="modal fade" id="updatehsc" tabindex="-1" role="dialog" aria-labelledby="uploadResumeModalLabel"
    aria-hidden="true">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            {% for onboarding_document in onboarding_documents %}
            <!-- Your HTML code for each onboarding document -->
            <form id="updatepshsc" action="{% url 'hr:updatehsc' onboarding_document.pk %}" method="post"
                enctype="multipart/form-data">
                <!-- Your form fields -->
                {% csrf_token %}
                <div class="modal-header">
                    <h5 class="modal-title" id="uploadPsimgModalLabel">Upload HSC Marksheet</h5>
                    <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal"
                        aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <div class="form-group">
                        <label for="">Choose File</label>
                        <input type="file" name="c_HSC" class="form-control-file form-control-sm">
                        <input type="hidden" id="candidateId" value="{{ onboarding_document.pk }}">
                        <input type="hidden" id="newResumeId" value="{{resume.candidate_id}}" />
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary close btn-sm" data-dismiss="modal">Close</button>
                    <button type="submit" class="btn custom-button btn-sm">Upload</button>
                </div>
            </form>
            {% endfor %}
        </div>
    </div>
</div>
<!-- Modal for uploading a ssc -->
<div class="modal fade" id="updatessc" tabindex="-1" role="dialog" aria-labelledby="uploadResumeModalLabel"
    aria-hidden="true">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            {% for onboarding_document in onboarding_documents %}
            <!-- Your HTML code for each onboarding document -->
            <form id="updatepsssc" action="{% url 'hr:updatessc' onboarding_document.pk %}" method="post"
                enctype="multipart/form-data">
                <!-- Your form fields -->
                {% csrf_token %}
                <div class="modal-header">
                    <h5 class="modal-title" id="uploadPsimgModalLabel">Upload SSC Marksheet</h5>
                    <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal"
                        aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <div class="form-group">
                        <label for="">Choose File</label>
                        <input type="file" name="c_SSC" class="form-control-file form-control-sm">
                        <input type="hidden" id="candidateId" value="{{ onboarding_document.pk }}">
                        <input type="hidden" id="newResumeId" value="{{resume.candidate_id}}" />
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary close btn-sm" data-dismiss="modal">Close</button>
                    <button type="submit" class="btn custom-button btn-sm">Upload</button>
                </div>
            </form>
            {% endfor %}
        </div>
    </div>
</div>
<!-- Modal for uploading a othercertificate -->
<div class="modal fade" id="updateothercertificate" tabindex="-1" role="dialog" aria-labelledby="uploadResumeModalLabel"
    aria-hidden="true">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            {% for onboarding_document in onboarding_documents %}
            <!-- Your HTML code for each onboarding document -->
            <form id="updatepsothercertificate" action="{% url 'hr:updateothercertificate' onboarding_document.pk %}"
                method="post" enctype="multipart/form-data">
                <!-- Your form fields -->
                {% csrf_token %}
                <div class="modal-header">
                    <h5 class="modal-title" id="uploadPsimgModalLabel">Upload Other Certificates</h5>
                    <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal"
                        aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <div class="form-group">
                        <label for="">Choose File</label>
                        <input type="file" name="c_otherCertificate" class="form-control-file form-control-sm">
                        <input type="hidden" id="candidateId" value="{{ onboarding_document.pk }}">
                        <input type="hidden" id="newResumeId" value="{{resume.candidate_id}}" />
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary close btn-sm" data-dismiss="modal">Close</button>
                    <button type="submit" class="btn custom-button btn-sm">Upload</button>
                </div>
            </form>
            {% endfor %}
        </div>
    </div>
</div>
<!-- Modal for uploading a resume -->
<div class="modal fade" id="updateresume" tabindex="-1" role="dialog" aria-labelledby="uploadResumeModalLabel"
    aria-hidden="true">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            {% for onboarding_document in onboarding_documents %}
            <!-- Your HTML code for each onboarding document -->
            <form id="updatepsresume" action="{% url 'hr:updateresume' onboarding_document.pk %}" method="post"
                enctype="multipart/form-data">
                <!-- Your form fields -->
                {% csrf_token %}
                <div class="modal-header">
                    <h5 class="modal-title" id="uploadPsimgModalLabel">Upload Resume</h5>
                    <button type="button" class="btn-close btn-close-white " data-bs-dismiss="modal"
                        aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <div class="form-group">
                        <label for="">Choose File</label>
                        <input type="file" name="resume" class="form-control-file form-control-sm">
                        <input type="hidden" id="candidateId" value="{{ onboarding_document.pk }}">
                        <input type="hidden" id="newResumeId" value="{{resume.candidate_id}}" />
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary close btn-sm" data-dismiss="modal">Close</button>
                    <button type="submit" class="btn custom-button btn-sm">Upload</button>
                </div>
            </form>
            {% endfor %}
        </div>
    </div>
</div>
<!-- Modal for Success Message -->
<div class="modal fade" id="successModal" tabindex="-1" aria-labelledby="successModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            
            <div class="modal-header">
                <h5 class="modal-title" id="successModalLabel">Success!</h5>
                <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal"
                    aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <!-- Success message content goes here -->
                <p> Documents Update Successfully.</p>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary btn-sm" data-bs-dismiss="modal">Close</button>
            </div>
        </form>
       
        </div>
    </div>
</div>
<!-- Modal 1 -->
<!-- Edit Attendance Modal -->
<div class="modal fade" id="attendancemodal" tabindex="-1" aria-labelledby="attendancemodalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="attendancemodalLabel">Edit Attendance</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <input type="hidden" id="employee_id_hidden">
                <input type="hidden" id="currenthiddendate">
                <div class="mb-3">
                    <label for="Punch_In" class="form-label">Punch In:</label>
                    <input type="time" class="form-control" id="Punch_In" value="{{clock_in}}">
                </div>
                <div class="mb-3">
                    <label for="Punch_Out" class="form-label">Punch Out:</label>
                    <input type="time" class="form-control" id="Punch_Out" value="={{clock_out}}">
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                <button type="button" id="saveAttendance" class="btn btn-primary">Save changes</button>
            </div>
        </div>
    </div>
</div>

<!-- Error Modal -->
<div id="messageModal" class="modal fade" tabindex="-1" role="dialog" aria-labelledby="messageModalLabel" aria-hidden="true">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="messageModalLabel">Error</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <p id="errorMessage"></p>
            </div>
        </div>
    </div>
</div>

<!-- Error Modal -->
<div id="messageModal" class="modal fade" tabindex="-1" role="dialog" aria-labelledby="messageModalLabel" aria-hidden="true">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="messageModalLabel">Error</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <p id="errorMessage"></p>
            </div>
        </div>
    </div>
</div>
<!-- popup  for confirmation -->
<!-- Modal -->
<div class="modal fade" id="popupfordelete" tabindex="-1" aria-labelledby="popupfordeleteModalLabel"
data-bs-backdrop="static" aria-hidden="true">
<div class="modal-dialog">
    <div class="modal-content">
        <div class="modal-header">
            <h1 class="modal-title fs-5" id="popupfordeleteModalLabel">Delete Leave</h1>
            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>
        <div class="modal-body">
            <h6>Are you sure you want to cancel Your Leave?</h6>
        </div>
        <div class="modal-footer">
            <button type="button" class="btn btn-secondary btn-sm" data-bs-dismiss="modal">Close</button>
            <button type="button" class="btn custom-button btn-sm" id="confirmDelete">Confirm</button>
            <input type="hidden" id="confirmDeletehidden" />
        </div>
    </div>
</div>
</div>
<input type="hidden" id="employee_id_hidden" />
{% endblock maincontent %}
{% block extrascript %}




<script>
    // Function to format date inputs to YYYY-MM-DD format
    function formatDateInputs() {
        var dateInputs = document.querySelectorAll('input[type="date"]');
        dateInputs.forEach(function (input) {
            var date = new Date(input.value);
            var formattedDate = date.getFullYear() + '-' + ('0' + (date.getMonth() + 1)).slice(-2) + '-' + ('0' + date.getDate()).slice(-2);
            input.value = formattedDate;
        });
    }

    // Call the function to format date inputs when the document is ready
    document.addEventListener('DOMContentLoaded', function () {
        formatDateInputs();
    });
</script>

<script>
    function downloadSelectedSalarySlip() {
        var selectedSalaryId = document.getElementById("selectedMonth").value;

        if (selectedSalaryId) {
            var downloadUrl = "{% url 'employee:download_pdf' salary_id=0 %}".replace('0', selectedSalaryId);
            window.open(downloadUrl, '_blank');
        } else {
            alert("Please select a month to download.");
        }
    }


</script>
<script>
    function validateDOB() {
        var dobInput = document.getElementById("createemployeedateofbirth");
        var dob = new Date(dobInput.value);
        var currentDate = new Date();
        var minAge = parseInt(dobInput.getAttribute("data-min-age"));
        var dobError = document.getElementById("dobError");
        var currentAgeDisplay = document.getElementById("currentAge");
        if (dob > currentDate) {
            dobError.textContent = "Please select a valid date of birth.";
            currentAgeDisplay.textContent = "";
        } else {
            dobError.textContent = "";
            var age = currentDate.getFullYear() - dob.getFullYear();
            if (currentDate.getMonth() < dob.getMonth() || (currentDate.getMonth() === dob.getMonth() && currentDate
                .getDate() < dob.getDate())) {
                age--;
            }
            if (age < minAge) {
                dobError.textContent = "Employee must be at least " + minAge + " years old.";
                currentAgeDisplay.textContent = "";
            } else {
                currentAgeDisplay.textContent = "Current Age: " + age + " years old";
            }
        }
    }
</script>
<script>
    $(document).ready(function () {
        checkEmailExists(); // Initial check on page load
        $('#email').on('input', function () {
            checkEmailExists(); // Check on email input
        });

        function checkEmailExists() {
            var email = $('#email').val();
            var candidateEmail = '{{ candidate.email }}';

            // Check if the entered email is different from the candidate's email
            if (email !== candidateEmail) {
                $.ajax({
                    type: 'GET',
                    url: '{% url "hr:check_email_exists" %} ',
                    data: {
                        'email': email
                    },
                    success: function (response) {
                        if (response.exists) {
                            $('#email-error').text('Email already exists.');
                            // Optionally, you can disable the form submission or handle it accordingly.
                        } else {
                            $('#email-error').text('');
                        }
                    }
                });
            } else {
                $('#email-error').text('');
            }
        }
    });
</script>
<script>
    $(document).ready(function () {
        // Handle checkbox change event
        $('#sameasabove').change(function () {
            if ($(this).prop('checked')) {
                // Copy values from permanent address to correspondence address
                $('#caddress').val($('#paddress').val());
                $('#ccity').val($('#pcity').val());
                $('#cstate').val($('#pstate').val());
                $('#ccountry').val($('#pcountry').val());
                $('#cpincode').val($('#ppincode').val());

            } else {
                // Clear values in correspondence address
                $('#caddress').val('');
                $('#ccity').val('');
                $('#cstate').val('');
                $('#ccountry').val('');
                $('#cpincode').val('');

            }
        });
    });
</script>


<script>
    // Fetch designation based on department_id
    $("#workdepartment").change(function () {
        var id = $(this).val();

        $.ajax({
            url: "{% url 'hr:ajax_load_designation' %}",
            data: {
                'department': id
            },
            success: function (data) {
                var designationSelect = $("#workdesignation");
                designationSelect.empty(); // Clear existing options

                var designations = data.designations;
                for (var i = 0; i < designations.length; i++) {
                    designationSelect.append(
                        $("<option>").attr('value', designations[i].id).text(designations[i]
                            .name)
                    );
                }
            }
        });
    });
</script>
<script>
    // Fetch designation based on department_id
    $("#reportingdepartment").change(function () {
        var id = $(this).val();

        $.ajax({
            url: "{% url 'hr:ajax_load_designation' %}",
            data: {
                'department': id
            },
            success: function (data) {
                var designationSelect = $("#reportingdesignation");
                designationSelect.empty(); // Clear existing options

                var designations = data.designations;
                for (var i = 0; i < designations.length; i++) {
                    designationSelect.append(
                        $("<option>").attr('value', designations[i].id).text(designations[i]
                            .name)
                    );
                }
            }
        });
    });
</script>
<script>
    $(document).ready(function () {
        // Load reporting managers based on selected department
        $('#workdepartment').change(function () {
            var department_id = $(this).val();
            var reportingSelect = $('#reporting_to');

            $.ajax({
                url: "{% url 'hr:ajax_load_reporting_managers' %}",
                data: {
                    'department_id': department_id
                },
                success: function (data) {
                    var reportingManagers = data.reporting_managers;
                    reportingSelect.empty(); // Clear existing options
                    reportingSelect.append(
                        '<option value="" selected>Select Reporting Manager</option>');

                    for (var i = 0; i < reportingManagers.length; i++) {
                        reportingSelect.append(
                            $("<option>").attr('value', reportingManagers[i].emp_id)
                                .text(reportingManagers[i].name)
                        );
                    }
                }
            });
        });


    });
</script>
<script>
    $(document).ready(function () {
        // Personal Info Edit Button
        $('#editPersonalInfoBtn').click(function (event) {
            // Prevent the default behavior of the button
            event.preventDefault();

            // Toggle the disabled attribute of input fields within #Personal-tab-pane
            $('#Personal-tab-pane input').prop('disabled', function (i, v) {
                return !v;
            });

            // Toggle the disabled attribute of select fields within #Personal-tab-pane
            $('#Personal-tab-pane select').prop('disabled', function (i, v) {
                return !v;
            });

            // Enable the Save Changes button
            $('#savePersonalInfoBtn').prop('disabled', function (i, v) {
                return !v;
            });
        });

        // After form submission
        $('#personalInfoForm').submit(function (event) {
            // Prevent the default form submission
            event.preventDefault();
            const csrftoken = document.cookie.match(/csrftoken=([^ ;]+)/)[1];
            // Perform an AJAX request to submit the form data
            $.ajax({
                url: $(this).attr('action'), // Get the form action URL
                method: $(this).attr('method'), // Get the form method (POST)
                headers: {
                    'X-CSRFToken': csrftoken
                },
                data: $(this).serialize(), // Serialize the form data

                success: function (response) {
                    // Display a success message
                    alert('Employee updated successfully.');

                    // Re-disable the input fields after successful submission
                    $('#Personal-tab-pane input').prop('disabled', true);
                    $('#Personal-tab-pane select').prop('disabled', true);
                    $('#savePersonalInfoBtn').prop('disabled', true);

                    location.reload();

                },
                error: function (xhr, status, error) {
                    // Handle errors if any
                    alert('Error: ' + error);
                }
            });
        });
    });
</script>
<script>
    $(document).ready(function () {
        // Work Info Edit Button
        $('#editWorkInfoBtn').click(function (event) {
            // Prevent the default behavior of the button
            event.preventDefault();

            // Toggle the disabled attribute of input fields within #Work-tab-pane
            $('#Work-tab-pane input').prop('disabled', function (i, v) {
                return !v;

            });

            // Toggle the disabled attribute of select fields within #Work-tab-pane
            $('#Work-tab-pane select').prop('disabled', function (i, v) {
                return !v;
            });

            // Enable the Save Changes button
            $('#saveWorkInfoBtn').prop('disabled', function (i, v) {
                return !v;

            });

        });

        // After form submission
        $('#workInfoForm').submit(function (event) {
            // Prevent the default form submission
            event.preventDefault();
            const csrftoken = document.cookie.match(/csrftoken=([^ ;]+)/)[1];
            // Perform an AJAX request to submit the form data
            $.ajax({
                url: $(this).attr('action'), // Get the form action URL
                method: $(this).attr('method'), // Get the form method (POST)
                headers: {
                    'X-CSRFToken': csrftoken
                },
                data: $(this).serialize(), // Serialize the form data
                success: function (response) {
                    // Display a success message
                    alert('Work info updated successfully.');

                    // Re-disable the input fields after successful submission
                    $('#Work-tab-pane input').prop('disabled', true);
                    $('#Work-tab-pane select').prop('disabled', true);
                    $('#saveWorkInfoBtn').prop('disabled', true);

                    location.reload();
                },
                error: function (xhr, status, error) {
                    // Handle errors if any
                    alert('Error: ' + error);
                }
            });
        });

    });
</script>
<script>
    $(document).ready(function () {
        // Reporting Info Edit Button
        $('#editTeamInfoBtn').click(function (event) {
            // Prevent the default behavior of the button
            event.preventDefault();

            // Toggle the disabled attribute of input fields within #Team-tab-pane
            $('#Team-tab-pane input').prop('disabled', function (i, v) {
                return !v;
            });

            // Toggle the disabled attribute of select fields within #Team-tab-pane
            $('#Team-tab-pane select').prop('disabled', function (i, v) {
                return !v;
            });

            // Enable the Save Changes button
            $('#saveTeamInfoBtn').prop('disabled', function (i, v) {
                return !v;
            });

            // Fetch reporting managers when the Edit button is clicked
            fetchReportingManagers();
        });

        // After form submission
        $('#teamInfoForm').submit(function (event) {
            // Prevent the default form submission
            event.preventDefault();
            const csrftoken = document.cookie.match(/csrftoken=([^ ;]+)/)[1];

            // Perform an AJAX request to submit the form data
            $.ajax({
                url: $(this).attr('action'), // Get the form action URL
                method: $(this).attr('method'), // Get the form method (POST)
                headers: {
                    'X-CSRFToken': csrftoken
                },
                data: $(this).serialize(), // Serialize the form data
                success: function (response) {
                    // Display a success message
                    alert('Reporting info updated successfully.');

                    // Re-disable the input fields after successful submission
                    $('#Team-tab-pane input').prop('disabled', true);
                    $('#Team-tab-pane select').prop('disabled', true);
                    $('#saveTeamInfoBtn').prop('disabled', true);

                    location.reload();
                },
                error: function (xhr, status, error) {
                    // Handle errors if any
                    alert('Error: ' + error);
                }
            });
        });

        // Function to fetch reporting managers via AJAX
        function fetchReportingManagers() {
            var department_id = $('#workdepartment').val();
            var reportingSelect = $('#reporting_to');

            $.ajax({
                url: "{% url 'hr:ajax_load_reporting_managers' %}",
                data: {
                    'department_id': department_id
                },
                success: function (data) {
                    var reportingManagers = data.reporting_managers;
                    reportingSelect.empty(); // Clear existing options
                    reportingSelect.append(
                        '<option value="" selected>Select Reporting Manager</option>');

                    for (var i = 0; i < reportingManagers.length; i++) {
                        reportingSelect.append(
                            $("<option>").attr('value', reportingManagers[i].emp_id).text(
                                reportingManagers[i].name)
                        );
                    }
                }
            });
        }
    });
</script>


<script>
    $(document).ready(function () {
        // payroll Info Edit Button
        $('#editpayrollInfoBtn').click(function (event) {
            // Prevent the default behavior of the button
            event.preventDefault();

            // Enable only specific input fields by targeting their IDs
            $('#ctcInput , #basicAmount, #hraAmount, #ca, #sa,#grossAmount,#employerPF, #employerESIC,#professionalTax,#employeePF,#employeeESIC,#yearlyCTC,#totaldeduction,#netPay,#paymentmode,#newCTC,#paymentmode, #applicable_from, #office_email').prop('disabled', function (i,
                v) {
                return !v;
            });

            // Enable the Save Changes button
            $('#savepayrollInfoBtn').prop('disabled', function (i, v) {
                return !v;
            });
        });

        // After form submission
        $('#payrollInfoForm').submit(function (event) {
            // Prevent the default form submission
            event.preventDefault();
            const csrftoken = document.cookie.match(/csrftoken=([^ ;]+)/)[1];
            // Perform an AJAX request to submit the form data
            $.ajax({
                url: $(this).attr('action'), // Get the form action URL
                method: $(this).attr('method'), // Get the form method (POST)
                headers: {
                    'X-CSRFToken': csrftoken
                },
                data: $(this).serialize(), // Serialize the form data
                success: function (response) {
                    // Display a success message
                    alert('payroll info updated successfully.');

                    // Re-disable the input fields after successful submission
                    $('#payroll-tab-pane input').prop('disabled', true);
                    $('#payroll-tab-pane select').prop('disabled', true);
                    $('#savepayrollInfoBtn').prop('disabled', true);

                    location.reload();
                },
                error: function (xhr, status, error) {
                    // Handle errors if any
                    alert('Error: ' + error);
                }
            });
        });
    });
</script>
<script>
    $('#updatenewimg').click(function () {
        $('#updateimg').modal('show');
    });

    $('.close').click(function () {
        $('.modal').modal('hide');
    });
    $('#updatepsimg').submit(function (event) {
        event.preventDefault(); // Prevent default form submission
        var formData = new FormData(this);
        $.ajax({
            url: $(this).attr('action'),
            type: 'POST',
            data: formData,
            processData: false,
            contentType: false,
            success: function (response) {
                $('#successModal').modal('show');
                setTimeout(function () {
                    location.reload(); // Reload the page
                }, 2000); // 2000 milliseconds = 2 seconds
            },
            error: function (xhr, status, error) {
                console.error(xhr.responseText);
                // Handle error message or any other action
            }
        });
    });
    // Update Aadhaar Card
    $('#updatenewaadhaar').click(function () {
        $('#updateaadhaar').modal('show');
    });
    $('.close').click(function () {
        $('.modal').modal('hide');
    });
    $('#updatepsaadhaar').submit(function (event) {
        event.preventDefault(); // Prevent default form submission
        var formData = new FormData(this);
        $.ajax({
            url: $(this).attr('action'),
            type: 'POST',
            data: formData,
            processData: false,
            contentType: false,
            success: function (response) {
                $('#successModal').modal('show');
                setTimeout(function () {
                    location.reload(); // Reload the page
                }, 2000); // 2000 milliseconds = 2 seconds
            },
            error: function (xhr, status, error) {
                console.error(xhr.responseText);
                // Handle error message or any other action
            }
        });
    });

    // Update PAN Card
    $('#updatenewpan').click(function () {
        $('#updatepan').modal('show');
    });

    $('.close').click(function () {
        $('.modal').modal('hide');
    });
    $('#updatepspan').submit(function (event) {
        event.preventDefault(); // Prevent default form submission
        var formData = new FormData(this);
        $.ajax({
            url: $(this).attr('action'),
            type: 'POST',
            data: formData,
            processData: false,
            contentType: false,
            success: function (response) {
                $('#successModal').modal('show');

                setTimeout(function () {
                    location.reload(); // Reload the page
                }, 2000); // 2000 milliseconds = 2 seconds

            },
            error: function (xhr, status, error) {
                console.error(xhr.responseText);
                // Handle error message or any other action
            }
        });
    });
    // Update Bank Details
    $('#updatenewbankdetails').click(function () {
        $('#updatebankdetails').modal('show');
    });

    $('.close').click(function () {
        $('.modal').modal('hide');
    });
    $('#updatepsbankdetails').submit(function (event) {
        event.preventDefault(); // Prevent default form submission
        var formData = new FormData(this);
        $.ajax({
            url: $(this).attr('action'),
            type: 'POST',
            data: formData,
            processData: false,
            contentType: false,
            success: function (response) {
                $('#successModal').modal('show');
                setTimeout(function () {
                    location.reload(); // Reload the page
                }, 2000); // 2000 milliseconds = 2 seconds
            },
            error: function (xhr, status, error) {
                console.error(xhr.responseText);
                // Handle error message or any other action
            }
        });
    });
    // Update bankstatement
    $('#updatenewbankstatement').click(function () {
        $('#updatebankstatement').modal('show');
    });
    $('.close').click(function () {
        $('.modal').modal('hide');
    });
    $('#updatepsbankstatement').submit(function (event) {
        event.preventDefault(); // Prevent default form submission
        var formData = new FormData(this);
        $.ajax({
            url: $(this).attr('action'),
            type: 'POST',
            data: formData,
            processData: false,
            contentType: false,
            success: function (response) {
                $('#successModal').modal('show');
                setTimeout(function () {
                    location.reload(); // Reload the page
                }, 2000); // 2000 milliseconds = 2 seconds
            },
            error: function (xhr, status, error) {
                console.error(xhr.responseText);
                // Handle error message or any other action
            }
        });
    });
    // Update salaryslips
    $('#updatenewsalaryslips').click(function () {
        $('#updatesalaryslips').modal('show');
    });
    $('.close').click(function () {
        $('.modal').modal('hide');
    });
    $('#updatepssalaryslips').submit(function (event) {
        event.preventDefault(); // Prevent default form submission
        var formData = new FormData(this);
        $.ajax({
            url: $(this).attr('action'),
            type: 'POST',
            data: formData,
            processData: false,
            contentType: false,
            success: function (response) {
                $('#successModal').modal('show');
                setTimeout(function () {
                    location.reload(); // Reload the page
                }, 2000); // 2000 milliseconds = 2 seconds
            },
            error: function (xhr, status, error) {
                console.error(xhr.responseText);
                // Handle error message or any other action
            }
        });
    });
    // Update expletter
    $('#updatenewexpletter').click(function () {
        $('#updateexpletter').modal('show');
    });

    $('.close').click(function () {
        $('.modal').modal('hide');
    });
    $('#updatepsexpletter').submit(function (event) {
        event.preventDefault(); // Prevent default form submission
        var formData = new FormData(this);
        $.ajax({
            url: $(this).attr('action'),
            type: 'POST',
            data: formData,
            processData: false,
            contentType: false,
            success: function (response) {
                $('#successModal').modal('show');
                setTimeout(function () {
                    location.reload(); // Reload the page
                }, 2000); // 2000 milliseconds = 2 seconds

            },
            error: function (xhr, status, error) {
                console.error(xhr.responseText);
                // Handle error message or any other action
            }
        });
    });
    // Update previousjoiningletter
    $('#updatenewpreviousjoiningletter').click(function () {
        $('#updatepreviousjoiningletter').modal('show');
    });

    $('.close').click(function () {
        $('.modal').modal('hide');
    });
    $('#updatepspreviousjoiningletter').submit(function (event) {
        event.preventDefault(); // Prevent default form submission
        var formData = new FormData(this);
        $.ajax({
            url: $(this).attr('action'),
            type: 'POST',
            data: formData,
            processData: false,
            contentType: false,
            success: function (response) {



                $('#successModal').modal('show');

                setTimeout(function () {
                    location.reload(); // Reload the page
                }, 2000); // 2000 milliseconds = 2 seconds

            },
            error: function (xhr, status, error) {
                console.error(xhr.responseText);
                // Handle error message or any other action
            }
        });
    });
    // Update degree
    $('#updatenewdegree').click(function () {
        $('#updatedegree').modal('show');
    });

    $('.close').click(function () {
        $('.modal').modal('hide');
    });
    $('#updatepsdegree').submit(function (event) {
        event.preventDefault(); // Prevent default form submission
        var formData = new FormData(this);
        $.ajax({
            url: $(this).attr('action'),
            type: 'POST',
            data: formData,
            processData: false,
            contentType: false,
            success: function (response) {

                $('#successModal').modal('show');

                setTimeout(function () {
                    location.reload(); // Reload the page
                }, 2000); // 2000 milliseconds = 2 seconds

            },
            error: function (xhr, status, error) {
                console.error(xhr.responseText);
                // Handle error message or any other action
            }
        });
    });
    // Update masters
    $('#updatenewmasters').click(function () {
        $('#updatemasters').modal('show');
    });

    $('.close').click(function () {
        $('.modal').modal('hide');
    });
    $('#updatepsmasters').submit(function (event) {
        event.preventDefault(); // Prevent default form submission
        var formData = new FormData(this);
        $.ajax({
            url: $(this).attr('action'),
            type: 'POST',
            data: formData,
            processData: false,
            contentType: false,
            success: function (response) {



                $('#successModal').modal('show');

                setTimeout(function () {
                    location.reload(); // Reload the page
                }, 2000); // 2000 milliseconds = 2 seconds

            },
            error: function (xhr, status, error) {
                console.error(xhr.responseText);
                // Handle error message or any other action
            }
        });
    });
    // Update hsc
    $('#updatenewhsc').click(function () {
        $('#updatehsc').modal('show');
    });

    $('.close').click(function () {
        $('.modal').modal('hide');
    });
    $('#updatepshsc').submit(function (event) {
        event.preventDefault(); // Prevent default form submission
        var formData = new FormData(this);
        $.ajax({
            url: $(this).attr('action'),
            type: 'POST',
            data: formData,
            processData: false,
            contentType: false,
            success: function (response) {



                $('#successModal').modal('show');

                setTimeout(function () {
                    location.reload(); // Reload the page
                }, 2000); // 2000 milliseconds = 2 seconds

            },
            error: function (xhr, status, error) {
                console.error(xhr.responseText);
                // Handle error message or any other action
            }
        });
    });
    // Update ssc
    $('#updatenewssc').click(function () {
        $('#updatessc').modal('show');
    });

    $('.close').click(function () {
        $('.modal').modal('hide');
    });
    $('#updatepsssc').submit(function (event) {
        event.preventDefault(); // Prevent default form submission
        var formData = new FormData(this);
        $.ajax({
            url: $(this).attr('action'),
            type: 'POST',
            data: formData,
            processData: false,
            contentType: false,
            success: function (response) {
                $('#successModal').modal('show');

                setTimeout(function () {
                    location.reload(); // Reload the page
                }, 2000); // 2000 milliseconds = 2 seconds

            },
            error: function (xhr, status, error) {
                console.error(xhr.responseText);
                // Handle error message or any other action
            }
        });
    });
    // Update othercertificate
    $('#updatenewothercertificate').click(function () {
        $('#updateothercertificate').modal('show');
    });

    $('.close').click(function () {
        $('.modal').modal('hide');
    });
    $('#updatepsothercertificate').submit(function (event) {
        event.preventDefault(); // Prevent default form submission
        var formData = new FormData(this);
        $.ajax({
            url: $(this).attr('action'),
            type: 'POST',
            data: formData,
            processData: false,
            contentType: false,
            success: function (response) {



                $('#successModal').modal('show');

                setTimeout(function () {
                    location.reload(); // Reload the page
                }, 2000); // 2000 milliseconds = 2 seconds

            },
            error: function (xhr, status, error) {
                console.error(xhr.responseText);
                // Handle error message or any other action
            }
        });
    });


    // Update resume
    $('#updatenewresume').click(function () {
        $('#updateresume').modal('show');
    });

    $('.close').click(function () {
        $('.modal').modal('hide');
    });
    $('#updatepsresume').submit(function (event) {
        event.preventDefault(); // Prevent default form submission
        var formData = new FormData(this);
        $.ajax({
            url: $(this).attr('action'),
            type: 'POST',
            data: formData,
            processData: false,
            contentType: false,
            success: function (response) {



                $('#successModal').modal('show');

                setTimeout(function () {
                    location.reload(); // Reload the page
                }, 2000); // 2000 milliseconds = 2 seconds

            },
            error: function (xhr, status, error) {
                console.error(xhr.responseText);
                // Handle error message or any other action
            }
        });
    });
</script>
<script>
    function calculateSalary() {
        var basic_perc = 60.0;
        var hra_perc = 30;
        var pf_perc = 12;
        var pf_fix = 1800;
        var employer_esic_perc = 3.25;
        var employee_esic_perc = 0.75;
        var tolerance = 0.01;

        var ctcAmount = document.getElementById('ctcInput');
        var basicAmount = document.getElementById('basicAmount');
        var hraAmount = document.getElementById('hraAmount');
        var ca = document.getElementById('ca');
        var sa = document.getElementById('sa');
        var grossAmount = document.getElementById('grossAmount');
        var employeePF = document.getElementById('employeePF');
        var employerPF = document.getElementById('employerPF');
        var employeeESIC = document.getElementById('employeeESIC');
        var employerESIC = document.getElementById('employerESIC');
        var newCTC = document.getElementById('newCTC');

        var professionalTax = document.getElementById('professionalTax');
        var netPay = document.getElementById('netPay');
        var totaldeduction = document.getElementById('totaldeduction');
        var yearlyCTC = document.getElementById('yearlyCTC');

        var ctcAmountValue = parseFloat(ctcAmount.value) || 0;
        var basicAmountValue = Math.round((basic_perc * ctcAmountValue) / 100);
        var hraAmountValue = Math.round((hra_perc * basicAmountValue) / 100);

        var allowances = ctcAmountValue - (basicAmountValue + hraAmountValue);

        var finalCTC = 0;
        while (Math.abs(finalCTC - ctcAmountValue) > tolerance) {
            var grossAmountValue = basicAmountValue + hraAmountValue + allowances;
            var employerESICValue = grossAmountValue < 21000 ? 0.0325 * grossAmountValue : 0;
            var employerPFValue = (basicAmountValue + allowances > 15000) ? pf_fix : 0.12 * (grossAmountValue - hraAmountValue);
            finalCTC = basicAmountValue + hraAmountValue + allowances + employerPFValue + employerESICValue;

            if (finalCTC < ctcAmountValue) {
                allowances += tolerance;
            } else {
                allowances -= tolerance;
            }
        }

        allowances = Math.round(allowances);
        grossAmountValue = Math.round(basicAmountValue + hraAmountValue + allowances);
        employerPFValue = Math.round((basicAmountValue + allowances > 15000) ? pf_fix : 0.12 * (grossAmountValue - hraAmountValue));
        employerESICValue = Math.round(grossAmountValue < 21000 ? 0.0325 * grossAmountValue : 0);
        finalCTC = Math.round(basicAmountValue + hraAmountValue + allowances + employerPFValue + employerESICValue);

        var employeePFValue = employerPFValue;
        var employeeESICValue = grossAmountValue < 21000 ? Math.round(0.0075 * grossAmountValue) : 0;

        caValue = allowances * 0.6;
        saValue = allowances * 0.4;

        basicAmount.value = basicAmountValue.toFixed(2);
        hraAmount.value = hraAmountValue.toFixed(2);
        ca.value = caValue.toFixed(2);
        sa.value = saValue.toFixed(2);
        grossAmount.value = grossAmountValue.toFixed(2);
        employeePF.value = employeePFValue.toFixed(2);
        employerPF.value = employerPFValue.toFixed(2);
        employeeESIC.value = employeeESICValue.toFixed(2);
        employerESIC.value = employerESICValue.toFixed(2);
        newCTC.value = finalCTC.toFixed(2);

        if (grossAmountValue > 12000) {
            professionalTaxValue = 200;
        } else {
            professionalTaxValue = 0;
        }

        netPayValue = finalCTC - employeeESICValue - employeePFValue - employerESICValue - employerPFValue - professionalTaxValue;
        totaldeductionValue = employeeESICValue + employeePFValue + professionalTaxValue;
        yearlyCTCValue = finalCTC * 12;

        professionalTax.value = professionalTaxValue.toFixed(2);
        netPay.value = netPayValue.toFixed(2);
        totaldeduction.value = totaldeductionValue.toFixed(2);
        yearlyCTC.value = yearlyCTCValue.toFixed(2);
    }

    // Example usage: assuming the function is triggered by an event
    calculateSalary();

</script>

<script>
    $(document).ready(function () {
        // Work Info Edit Button
        $('#editbankInfoBtn').click(function (event) {
            // Prevent the default behavior of the button
            event.preventDefault();

            // Toggle the disabled attribute of input fields within #BankAccount-tab-pane
            $('#bank_name, #account_no, #account_no, #branch, #ifsc_code').prop('disabled', function (i,
                v) {
                return !v;

            });

            // Toggle the disabled attribute of select fields within #BankAccount-tab-pane
            $('#BankAccount-tab-pane select').prop('disabled', function (i, v) {
                return !v;
            });

            // Enable the Save Changes button
            $('#savebankInfoBtn').prop('disabled', function (i, v) {
                return !v;

            });

        });

        // After form submission
        $('#bankInfoForm').submit(function (event) {
            // Prevent the default form submission
            event.preventDefault();
            const csrftoken = document.cookie.match(/csrftoken=([^ ;]+)/)[1];
            // Perform an AJAX request to submit the form data
            $.ajax({
                url: $(this).attr('action'), // Get the form action URL
                method: $(this).attr('method'), // Get the form method (POST)
                headers: {
                    'X-CSRFToken': csrftoken
                },
                data: $(this).serialize(), // Serialize the form data
                success: function (response) {
                    // Display a success message
                    alert('bank info updated successfully.');

                    // Re-disable the input fields after successful submission
                    $('#BankAccount-tab-pane input').prop('disabled', true);
                    $('#BankAccount-tab-pane select').prop('disabled', true);
                    $('#savebankInfoBtn').prop('disabled', true);

                    location.reload();
                },
                error: function (xhr, status, error) {
                    // Handle errors if any
                    alert('Error: ' + error);
                }
            });
        });

    });
</script>
<script>
    $(document).ready(function () {
        // Work Info Edit Button
        $('#editpermissionInfoBtn').click(function (event) {
            // Prevent the default behavior of the button
            event.preventDefault();

            // Toggle the disabled attribute of input fields within #permission-tab-pane
            $('#permission-tab-pane input').prop('disabled', function (i, v) {
                return !v;
            });

            // Toggle the disabled attribute of select fields within #permission-tab-pane
            $('#permission-tab-pane select').prop('disabled', function (i, v) {
                return !v;
            });

            // Enable or disable the Save Changes button based on its current state
            $('#savepermissionInfoBtn').prop('disabled', function (i, v) {
                return !v;
            });
        });

        // After form submission
        $('#permissionInfoForm').submit(function (event) {
            // Prevent the default form submission
            event.preventDefault();
            const csrftoken = document.cookie.match(/csrftoken=([^ ;]+)/)[1];
            // Perform an AJAX request to submit the form data
            $.ajax({
                url: $(this).attr('action'), // Get the form action URL
                method: $(this).attr('method'), // Get the form method (POST)
                headers: {
                    'X-CSRFToken': csrftoken
                },
                data: $(this).serialize(), // Serialize the form data
                success: function (response) {
                    // Display a success message
                    alert('Permission info updated successfully.');
                    // Re-disable the input fields after successful submission
                    $('#permission-tab-pane input').prop('disabled', true);
                    $('#permission-tab-pane select').prop('disabled', true);
                    $('#savepermissionInfoBtn').prop('disabled', true);
                    location.reload();
                },
                error: function (xhr, status, error) {
                    // Handle errors if any
                    alert('Error: ' + error);
                }
            });
        });
    });
</script>
<script>
    const weeksData = [
        { week: 1, days: [1, 1, 1, 1, 1, 1, 2] }, // Example data for week 1
        { week: 2, days: [1, 1, 1, 1, 1, 1, 2] }, // Example data for week 2
        { week: 3, days: [1, 1, 1, 1, 1, 1, 2] }, // Example data for week 2
        { week: 4, days: [1, 1, 1, 1, 1, 1, 2] }, // Example data for week 2
        { week: 5, days: [1, 1, 1, 1, 1, 1, 2] }, // Example data for week 2

        // Add more weeks as needed
    ];

    const colorsData = {
        1: 'green',  // Color for state 1
        2: 'red',  // Color for state 2
        3: 'yellow', // Color for state 3
    };

    // Function to generate the HTML table based on data
    function generateWeekTable() {
        const tableBody = document.getElementById('weekTableBody');
        tableBody.innerHTML = ''; // Clear existing table body

        weeksData.forEach(weekData => {
            const row = document.createElement('tr');
            weekData.days.forEach(dayState => {
                const cell = document.createElement('td');
                cell.className = `day ${colorsData[dayState]}`;
                cell.dataset.state = dayState;
                cell.dataset.savedState = dayState;

                const div = document.createElement('div');
                div.className = 'day-switch';
                cell.appendChild(div); // Add div inside td

                cell.onclick = function () {
                    changeState(this);
                };
                row.appendChild(cell);
            });
            tableBody.appendChild(row);
        });
    }

    // Function to handle click event and change state
    function changeState(cell) {
        const currentState = parseInt(cell.dataset.state);
        const newState = currentState === 3 ? 1 : currentState + 1; // Toggle between 1, 2, 3
        cell.dataset.state = newState;
        cell.className = `day ${colorsData[newState]}`;
        console.log([newState]);
    }

    // Call the function to generate the table when the page loads
    window.onload = function () {
        generateWeekTable();
    };
</script>

<script>
    // Delete Branch 

    $(document).ready(function () {
        // AJAX for deleting a Branch list
        $('.delete-resign_list').on('click', function () {
            var resign_list_id = $(this).data('resign_list-id');
            if (confirm('Are you sure you want to delete this Resignation?')) {
                $.ajax({
                    url: '/employee/delete_resign_list/' + resign_list_id + '/',
                    type: 'POST',
                    data: {
                        'csrfmiddlewaretoken': '{{ csrf_token }}'
                    },
                    success: function (data) {
                        
                        alert('Resignation deleted successfully');
                        location
                    .reload(); // Reload the page to update the Resignation list
                    },
                    error: function (xhr, status, error) {
                        alert('Failed to delete Resignation: ' + xhr.responseJSON
                            .error);
                    }
                });
            }
        });

    });
</script>

<script>
    const months = [
        "January", "February", "March", "April", "May", "June", "July",
        "August", "September", "October", "November", "December"
    ];
</script> 

{% endblock extrascript %}